
/**!
* qt_web_v2.4.9
* generated by QuickTracking
* 2025-06-27 10:37:06
* md5: c9282bef9281c092163f3e5190347dec
*/
e=function(){"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,u(a.key),a)}}function a(e,t,a){return t&&n(e.prototype,t),a&&n(e,a),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(e,t,n){return(t=u(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function s(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;n[a]=e[a]}return n}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function c(t,n){return function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var a,o,r,i,s=[],c=!0,u=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(a=r.call(n)).done)&&(s.push(a.value),s.length!==t);c=!0);}catch(e){u=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw o}}return s}}(t,n)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var a={}.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?e(t,n):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function f(e,t){if(e)if(h(e)&&void 0===e.length)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n],e);else{var a,o=e.length;for(a=0;a<o&&"break"!==t(e[a],a);a++);}}function p(e){return Array.isArray?Array.isArray(e):/Array/.test(Object.prototype.toString.call(e))}var d={isArray:p,indexOf:function(e,t){var n=-1;try{n=e.indexOf(t)}catch(o){for(var a=0;a<e.length;a++)e[a]===t&&(n=a)}finally{return n}},itemMatch:function(e,t){var n=!1;try{if(!this.isArray(e))return n;n=e.some(function(e){return e&&e.length>0&&-1!==t.indexOf(e)})}catch(o){for(var a=0;a<e.length;a++)if(-1!==t.indexOf(e[a])){n=!0;break}}return n},find:function(e,t){try{return e.find(t)}catch(a){for(var n=0;n<e.length;n++)if(t(e[n]))return e[n]}},flat:function e(t){var n=[];if(p(t))for(var a=0;a<t.length;a++){var o=t[a];if(p(o)){t[a]=e(o);n=n.concat(t[a])}else n.push(o)}return n},assign:g,some:function(e,t){var n,a=e.length;for(n=0;n<a;n++)if(t(e[n]))return!0;return!1},each:f};function g(e,t){return"function"!=typeof Object.assign?function(e){for(var t=Object(e),n=1;n<arguments.length;n++){var a=arguments[n];if(null!==a)for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(t[o]=a[o])}return t}(e,t):Object.assign({},e,t)}function h(e){if("object"!==l(e)||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function _(e,t){if(Object&&Object.keys)for(var n=Object.keys(e),a=n.length,o=0;o<a;o++){var r=n[o];t(r,e[r])}else for(var i in e)t(i,e[i])}var m={isObject:h,assign:g,cloneDeep:function e(t){var n,a=Array.isArray(t)?[]:{};if("object"===l(t)){if(JSON&&JSON.parse){n=JSON.stringify(t);a=JSON.parse(n)}else for(var o in t)a[o]="object"===l(t[o])?e(t[o]):t[o];return a}},isEmptyObject:function(e){try{if(!e)return!0;if("function"==typeof Object.keys&&0===Object.keys(e).length)return!0;for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}catch(e){return!1}},each:f,eachMap:_,deleteKeys:function(e,t){f(t,function(t){delete e[t]});return e},cloneDeepForFunc:function e(t){if(p(t)||"object"===l(t)){var n=p(t)?[]:{};_(t,function(a){p(t[a])||"object"===l(t[a])?n[a]=e(t[a]):n[a]=t[a]});return n}return t}};function v(e){return"[object String]"===Object.prototype.toString.call(e)}var y={stringfy:function(e){if(e)try{return JSON.stringify(e)}catch(e){}return""},parse:function(e){if(e)try{return JSON.parse(e)}catch(e){}return null},jsonStr2json:function(e){if(!e||"string"!=typeof e)return{};for(var t=e.replace(/['"{}]+/g,"").split(","),n=[],a=0;a<t.length;a++)n.push(t[a].split(":"));return A(n)}};function b(e){return"function"==typeof e}function A(e){var t,n,a,o={},r=e.length;for(a=0;a<r;a++){t=e[a][0]&&e[a][0].trim();n=e[a][1];o[t]=n}return o}function S(e){if("object"===l(e))return e;var t={};if(!e||"string"!=typeof e)return t;for(var n=e.split("&"),a=0;a<n.length;a++){var o=n[a],r=o.indexOf("="),i=o.split("="),s=o.length;if(2===i.length)t[i[0]]=i[1]||"";else if(r>0){var c=o.slice(0,r),u=o.slice(r+1,s)||"";t[c]=u}else t[i[0]]=""}return t}var E="::-plain-::";function w(e,t){var n,a,o,r=[];for(n in e)if(n&&Object.prototype.hasOwnProperty.call(e,n)){o="object"===l(e[n])?a=""+this.obj2queryStr(e[n]):n+"="+(a=""+e[n]);t?r.push(o):r.push(0===n.indexOf(E)?a:o)}return r.join("&")}function T(e){for(var t,n=e.split("&"),a=0,o=n.length,r=[];a<o;a++){t=n[a].split("=");r.push([t.shift(),t.join("=")])}return r}function P(){var e=navigator?navigator.userAgent:"",t=/AliApp|Yunos|cyclone/i.test(e),n=navigator&&(("MacIntel"===navigator.platform||e.includes("Macintosh"))&&navigator.maxTouchPoints>1||!!e.match(/(iPad).*OS\s([\d_]+)/)),a=/iPhone|iPod/i.test(e)||n,o=/Android/i.test(e),r=/Windows Phone/i.test(e)||/IEMobile/i.test(e)||/WPDesktop/i.test(e),i=/BlackBerry/i.test(e),s=/Opera Mini/i.test(e);return t||a||o||r||i||s}var O={isString:v,isStartWith:function(e,t){return!(!e||!t||0===t.length||t.length>e.length)&&0===e.indexOf(t)},isEndWith:function(e,t){if(String.prototype.endsWith)return e.endsWith(t);var n=e.length,a=t.length;return n>=a&&e.substring(n-a)===t},isContain:function(e,t){return e.indexOf(t)>-1},getRandomStr:function(e){for(var t="",n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],a=0;a<Number(e);a++)t+=n[Math.round(Math.random()*(n.length-1))];return t},trim:function(e){return"string"==typeof e?e.replace(/^\s+|\s+$/g,""):""},query2obj:S},I={query2obj:S,arr2obj:A,arr2queryStr:function(e,t){var n,a,o,r=[],i=e.length;for(o=0;o<i;o++){n=e[o][0];a=e[o][1];var s=0===n.indexOf(E),c=s||t?a:encodeURIComponent(a);r.push(s?c:n+"="+c)}return r.join("&")},obj2queryStr:w},C=function(){var e=null,t=!1,n="";function a(){this.setDebug=function(e,a){t=e;n=a?"[APLUS] -- ":"[QT] -- "};this.i=function(){if(t)try{"string"==typeof arguments[0]&&(arguments[0]=n+arguments[0]);console.info.apply(console,arguments)}catch(e){}};this.e=function(){if(t)try{"string"==typeof arguments[0]&&(arguments[0]=n+arguments[0]);console.error.apply(console,arguments)}catch(e){}};this.w=function(){if(t)try{"string"==typeof arguments[0]&&(arguments[0]=n+arguments[0]);console.warn.apply(console,arguments)}catch(e){}};this.v=function(){try{"string"==typeof arguments[0]&&(arguments[0]=n+arguments[0]);console.warn.apply(console,arguments)}catch(e){}};this.tip_w=function(e){try{console.log("%c "+n+e,"background:red; padding: 4px; padding-right: 8px; border-radius: 4px; color: #fff;")}catch(e){}};this.repeat=function(e){for(var t=e;t.length<86;)t+=e;return t}}return function(){null===e&&(e=new a);return e}}();function k(){}k.prototype.extend=function(){};k.prototype.create=function(){};k.extend=function(e){return this.prototype.extend.call(this,e)};k.prototype.create=function(e){var t=new this;for(var n in e)t[n]=e[n];return t};k.prototype.extend=function(e){var t=function(){};try{b(Object.create)||(Object.create=function(e){function t(){}t.prototype=e;return new t});t.prototype=Object.create(this.prototype);for(var n in e)t.prototype[n]=e[n];t.prototype.constructor=t;t.extend=t.prototype.extend;t.create=t.prototype.create}catch(e){C&&C().w(e)}finally{return t}};var N,R=k.extend({create:function(e,t){var n=t.apiName,a=t.queueName,o=new this;o._sdkApiName=n;o._sdkQueueName=a;e[n]=e[n]||(e[n]={});e[a]=e[a]||(e[a]=[]);o.ctx=e;return o},getSdkApiName:function(){return this._sdkApiName},getSdkQueueName:function(){return this._sdkQueueName},setContextValue:function(e,t){this.ctx[this._sdkApiName]&&(this.ctx[this._sdkApiName][e]=t)},getContextValue:function(e){var t;this.ctx[this._sdkApiName]&&(t=this.ctx[this._sdkApiName][e]);!t&&this.ctx.goldlog&&(t=this.ctx.goldlog[e]);return t}});function M(){return N}function x(){return M().getSdkApiName()}function D(){return M().getSdkQueueName()}function L(e){return M().ctx[e]}function U(e){return M().getContextValue(e)}function j(e,t){M().setContextValue(e,t)}var B="function",V=function(){var e=L(x())[x()+"_pubsub"]||{};return l(e.publish)===B?e:""};function F(e){var t=V();t&&l(t.publish)===B&&t.publish.apply(t,e)}function G(e){var t=V();t&&l(t.cachePubs)===B&&t.cachePubs.apply(t,e)}function H(e,t){var n=V();n&&l(n.subscribe)===B&&n.subscribe(e,t)}var K="mw_change",W="MetaInfo",q="append".concat(W),z="set".concat(W),Y="_pubsub",$="2101",Q="2201",J="19999",X="aplus",Z={PAGE_ENTER:"PAGE_ENTER",CURRENT_PAGE_CONFIG:"CURRENT_PAGE_CONFIG",_ANONY_ID:"_anony_id",_DEV_ID:"_dev_id",_CNA:"cna",_browerFP:"_abfpc",_USER_ID:"_user_id",UNSUBSCRIBE:"".concat(X,".").concat(X).concat(Y,".unsubscribe"),SUBSCRIBE:"".concat(X,".").concat(X).concat(Y,".subscribe"),PUBLISH:"".concat(X,".").concat(X).concat(Y,".publish"),CACHE_PUBS:"".concat(X,".").concat(X).concat(Y,".cachePubs"),SDK_READY:"".concat(X,"Ready"),SDK_PUB:"".concat(X).concat(Y),COMPLETE:"complete",PV_CODE:"2001",EXP_CODE:Q,CLK_CODE:$,OTHER_CODE:J,CLK:"CLK",EXP:"EXP",OTHER:"OTHER",SPM_CNT:"spm-cnt",SPM_URL:"spm-url",SPM_PRE:"spm-pre",MW_CHANGE_PV:"".concat(K,"_pv"),MW_CHANGE_HJLJ:"".concat(K,"_hjlj"),HTTP:"".concat("http",":"),HTTPS:"https:",APPEND_META_INFO:q,SET_META_INFO:z,SDK_APPEND_META_INFO:"".concat(X,".").concat(q),SDK_SET_META_INFO:"".concat(X,".").concat(z),PVID:"pvid",WEB_PC_PV_SUFFIX:"v.gif",WEB_WAP_PV_SUFFIX:"m.gif",NATIVE_TRANSP_READY:"".concat(X,"NativeTranspReady")},ee=["send","enter","sendPV","record","combineRecord","recordUdata","requestVTConfig","requestRemoteConfig","setPageSPM","setMetaInfo","appendMetaInfo","updatePageProperties","updateNextPageProperties","updatePageUtparam","updateNextPageUtparam","pageAppear","pageDisappear","skipPage","updateSessionProperties","getPageSpmUrl","getPageSpmPre","setPageName","getElementSPM","recordAppLink","onPageShow","onPageHide","reportUserInfo"],te={EXP:Q,IMPEXP:"2202",CLK:$,OTHER:J,SHOW:"1023",H_OR_U:"1010"};i(i({},{ekvs:"e",active_user:"active_user"}),{},{sessions:"sn"});var ne={sdk_type:"sdt",device_model:"dm",language:"lang",device_type:"dt",os_version:"ov",appkey:"ak",sdk_version:"sv",resolution:"rl",pixel_ratio:"pr",_id:"id",id_type:"it",id_tracking:"itr"};i(i({},ne),{},{imprint:"imp",debugId:"dk"});i(i({},ne),{},{access:"ac",access_subtype:"acs",device_manufacturer:"dmf",device_name:"dn",platform_version:"pv",font_size_setting:"fss",device_manuid:"did",platform_sdk_version:"psv",device_brand:"db",imprint:"imp",miniappDebugId:"dk"});var ae={APLUS:X,APPKEY:"appKey",APLUS_PV_DOMAIN:"aplus-rhost-v",APLUS_EKV_DOMAIN:"aplus-rhost-g",SESSION_INTERVAL:3e4,PAGE_SCROLL_DURATION:4e3,SESSION_PAUSE_TIME:"session_pause_time",IMPRINT:"imprint",CURRENT_SESSION:"current_session",MAX_EVENTID_LENGTH:128,MAX_PROPERTY_KEY_LENGTH:256,MAX_PROPERTY_KEYS_COUNT:100,FAILED_REQUESTS:"failed_requests",REQUESTS:"requests",SHARES:"shares",EKVS:"ekvs",EVENT_MAX_COUNT:1e4,MEMORY_MAX_COUNT:1,MAX_QUEUE_COUNT:1,EVENT_SEND_DEFAULT_INTERVAL:3e3,PAGE_START:"$$_page_start",PAGE_END:"$$_page_end",APP_START:"$$_app_start",APP_END:"$$_app_end",PULL_DOWN_REFRESH:"$$_pull_down_refresh",REACH_BOTTOM:"$$_reach_bottom",SHARE:"$$_share",ADD_TO_FAVORITE:"$$_addtofavorite",REF_SHARE_ID:"$$_ref_share_id",REF_SHARE_URL:"$$_ref_share_url",USER_PROFILE:"$$_user_profile",ITEM_CLICK:"$$_mp_item_click",SHARE_CACHE_INTERVAL:18e5,GLOBAL_PROPERTY:"globalproperty",JSBRIDGE_ONLY:"aplus-jsbridge-only",JSBRIDGE_AGENT:"Umeng4Aplus",APLUS_SKIP_APV_RULES:"aplus-skip-apv-rules",APLUS_IMPRINT_VERSION:"APLUS_IMPRINT_VERSION",APLUS_REMOTE_CONFIG:"APLUS_REMOTE_CONFIG",WEB_EVENT_SUFFIX:"/web_logs",PAGE_LEAVE:"$$_page_leave",PAGE_STAY:"$$_page_stay",APLUS_AUTOTRACK_ENABLED:"aplus-autotrack-enabled",APLUS_AUTOTRACK_ENABLED_REMOTE:"apus-autotrack-enabled-remote",APLUS_AUTOTRACK_CONFIG:"aplus-autotrack-config",APLUS_AUTOTRACK_CONFIG_REMOTE:"aplus-autotrack-config-remote",APLUS_DISABLE_AUTOEVENT:"aplus-disable-autoevent",APLUS_DISABLE_AUTOEVENT_REMOTE:"aplus-disable-autoevent",APLUS_DISABLE_AUTOPV:"aplus-disable-apv",APLUS_DISABLE_AUTOPV_REMOTE:"aplus-disable-apv-remote",APLUS_EVENT_LIMITRATES:"aplus-event-limitrates",APLUS_DEVICE_ENABLE:"aplus-device-enable",PERFORMANCE_WARING:"$$_perf_warning",START_ID:"START_ID",AUTO_GET_OPENID:"autoGetOpenid",TRACKDOMAIN:"trackDomain",APLUS_MINI_REQUEST_TIMEOUT:"aplus-request-timeout",APLUS_LATEAST_UTM:"APLUS_LATEAST_UTM",APLUS_FORWARD_APPKEY:"aplus-forward-appkey",APLUS_FORWARD_DOMAIN:"aplus-forward-domain",APLUS_FORWARD_EVENT_FILTER:"aplus-forward-event-filter",CNA_SYNC_READY:"cnaSyncReady",PAGE_CONFIG:"pageConfig",APLUS_VT_CONFIG_URL:"aplus-vt-cfg-url",APLUS_EXPOSURE_EVENT_CAN_REPEAT:"aplus-exposure-event-can-repeat",APLUS_MINI_REQUESTS_LIMIT:"aplus-mini-requests-limit",DEBUG:"DEBUG",APLUS_UTM_EXPIRE_DAYS:"aplus-utm-expire-days",APLUS_PAGEVIEW_DURATION_CAN_TRACK:"aplus-pageview-duration-can-track",APLUS_PRESET_EVENTS_DISABLED:"aplus-preset-events-disabled",APLUS_GLOBALPROPERTY_SYNC_ENABLE:"aplus-globalproperty-sync-enable",APLUS_NEXT_PAGE_TRANSP:"aplus-nextpage-properties",APLUS_LOCALSTORE_PAGE_TRANSP:"aplus-native-page-properties",APLUS_CALLBACK:"qtCallback",START_TIME:"start_time",DEFAULT_REQUEST_TIMEOUT:3e3,DEFAULT_BATCH_INTERVAL:5e3,APLUS_SDK_DISABLE:"aplus-sdk-disable",APLUS_AUTOTRACK_METHODS_ENABLE:"autotrackMethodEnable",APLUS_AUTOTRACK_METHODS_FILTER_MAP:"autotrackMethodFilterMap",MAX_QUEUE_COUNT_KEY:"max-queue-count",APLUS_REQUEST_BATCH_INTERVAL:"aplus-request-batch-interval"},oe={record:"".concat(X,".record"),sendPV:"".concat(X,".sendPV"),setMetaInfo:"".concat(X,".setMetaInfo"),appendMetaInfo:"".concat(X,".appendMetaInfo")},re=Object.freeze({OK:200,MULTIPLE_CHOICES:300,MOVED_PERMANENTLY:301,FOUND:302,BAD_REQUEST:400,NOT_FOUND:404,SERVER_ERROR:500}),ie=Object.freeze({GET:"GET",POST:"POST",PUT:"PUT",DELETE:"DELETE",WebSocket:"WS",WebSocketOnly:"WS-ONLY"}),se=Object.freeze({codelessCollectorPageStatus:"codelessCollectorPageStatus",currentDeviceEnable:"currentDeviceEnable",codelessClickEventStatus:"codelessClickEventStatus",codelessStatus:"codelessStatus",codelessIgnoreComponent:"codelessIgnoreComponent"}),ce=d.indexOf;function ue(){}ue.prototype.create=function(e){for(var t in e)void 0===this[t]&&(this[t]=e[t]);return this};ue.prototype.calledList=[];ue.prototype.setCalledList=function(e){-1===ce(this.calledList,e)&&this.calledList.push(e)};ue.prototype.resetCalledList=function(){this.calledList=[]};ue.prototype.wrap=function(e,t){var n=this,a=((this.context||{}).Compose||{}).maxTimeout||1e4;return function(o){var r,i=e.length,s=0,c=0,u=function(l,f){if(s!==i){if(-1===ce(n.calledList,s)){n.setCalledList&&n.setCalledList(s);if(!(e&&e[s]&&b(e[s][0])))return;try{o=e[s][0].call(n,o,function(){s++;c=1;u(s)})}catch(e){console.log(e)}}var p="number"==typeof o;if("pause"===o||p){c=0;var d=p?o:a,g=e[s]?e[s][1]:"";r=setTimeout(function(){if(0===c){C().w("jump the middleware about "+g+", because waiting timeout maxTimeout = "+d);o=null;s++;u()}},d)}else if("done"===o)u(s=i,o);else{s++;u()}}else{o="done";n.resetCalledList();b(t)&&f!==o&&t.call(n,o);clearTimeout(r)}};n.calledList&&n.calledList.length>0&&n.resetCalledList();return u()}};function le(){return{init:function(e){this.opts=e;e&&"object"===l(e.middleware)&&e.middleware.length>0?this.middleware=e.middleware:this.middleware=[];this.plugins_name=[]},pubsubInfo:function(e,t){try{var n=e.pubsub;n&&n.publish("plugins_change_"+e.pubsubType,t)}catch(e){console.log(e)}},isConstructor:function(e){var t=!0;try{new e}catch(e){t=!1}return t},run:function(e){e||(e=0);var t=this,n=this.middleware,a=this.opts||{},o=a.plugins;if(o&&"object"===l(o)&&o.length>0){var r=o[e];this.plugins_name.push(r.name);n.push([function(e,n){t.pubsubInfo(this,r);var o;r.path&&t.isConstructor(r.path)?o=r.path:r.path.default&&t.isConstructor(r.path.default)&&(o=r.path.default);if(o){var i=new o({context:this.context,config:g(r.config||{},a.config)});if(!i.options){i.init||(i.init=function(e){this.options=e});i.init({context:this.context,config:g(r.config||{},a.config)})}return i.run(e,function(e){setTimeout(function(){n(r,e)},1)})}},r.name]);if(o[++e])return this.run(e)}return n}}}var fe,pe,de=function(){};de.prototype.run=function(e,t,n){var a=new le;a.init({middleware:[],config:t.config,plugins:e.plugins});var o=a.run(),r=b(e.context)?new e.context:e.context;r.userdata=t.userdata;var i={context:r,pubsub:U(x()+"_pubsub"),pubsubType:t&&t.pubsubType},s=new ue;s.create(i);s.wrap(o,function(){i.context.status="complete";if(t){t.middlewareMessageKey&&F([t.middlewareMessageKey,i.context]);t.messageFnQueue&&f(t.messageFnQueue,function(t){t(getGlobalValue(x()),e)})}b(n)&&n(i.context)})()};var ge,he,_e,me,ve,ye={pushIntoGoldlogQueue:function(e,t){var n=L(D()),a=L(x()),o=e.split("."),r=a[o[1]],i=r?r[o[2]]:null;a&&2===o.length&&r?r.apply(a,t):3===o.length&&i?i.apply(r,t):n.push({action:e,arguments:t})}},be=!1,Ae={},Se="touchstart",Ee="touchend",we="touchmove",Te="tapping",Pe="touchcancel",Oe="aplus_tap".concat((he=1e5,(ge=1)+Math.floor(Math.random()*(he-ge+1))));function Ie(e,t,n){var a=document.createEvent("HTMLEvents");a.initEvent(t,!0,!0);if("object"===l(n))for(var o in n)a[o]=n[o];e.dispatchEvent(a)}function Ce(e){var t=document.documentElement;if(0===Object.keys(Ae).length){t.addEventListener(we,ke,!1);t.addEventListener(Ee,Ne,!1);t.addEventListener(Pe,Ne,!1)}for(var n=0;n<e.changedTouches.length;n++){var a=e.changedTouches[n],o={};for(var r in a)o[r]=a[r];var i={startTouch:o,startTime:Date.now(),status:Te,element:e.srcElement||e.target};Ae[a.identifier]=i}}function ke(e){for(var t=0;t<e.changedTouches.length;t++){var n=e.changedTouches[t],a=Ae[n.identifier];if(!a)return;var o=n.clientX-a.startTouch.clientX,r=n.clientY-a.startTouch.clientY,i=Math.sqrt(Math.pow(o,2)+Math.pow(r,2));(a.status===Te||"pressing"===a.status)&&i>10&&(a.status="panning")}}function Ne(e){for(var t=0;t<e.changedTouches.length;t++){var n=e.changedTouches[t],a=n.identifier,o=Ae[a];if(o){if(o.status===Te&&e.type===Ee){o.timestamp=Date.now();Ie(o.element,Oe,{touch:n,touchEvent:e})}delete Ae[a]}}var r=document.documentElement;if(0===Object.keys(Ae).length){r.removeEventListener(we,ke,!1);r.removeEventListener(Ee,Ne,!1);r.removeEventListener(Pe,Ne,!1)}}function Re(e,t){!function(){if(!be){document.documentElement.addEventListener(Se,Ce,!1);be=!0}}();if(e&&e.addEventListener&&t){!function(e){if(!e.__fixTouchEvent){e.addEventListener(Se,function(){},!1);e.__fixTouchEvent=!0}}(e);e.addEventListener(Oe,t._aplus_tap_callback=function(e){t(e,e.target)},!1)}}function Me(){var e=[];try{var t=location.hostname;if("localhost"===t)return[t];for(var n=t.split("."),a=2;a<=n.length;){e.push(n.slice(n.length-a).join("."));a++}}catch(e){}return e}function xe(e,t){return e&&e.getAttribute&&e.getAttribute(t)||""}function De(e,t,n){if(e&&e.setAttribute)try{e.setAttribute(t,n)}catch(e){}}function Le(){me||(me=document.getElementById("beacon-aplus")||document.getElementById("tb-beacon-aplus"));return me}function Ue(e){var t=xe(Le(),"cspx");e&&t&&(e.nonce=t)}function je(e,t){var n=((L(x())._$||{}).meta_info||{}).aplus_ctap||{};n&&"function"==typeof n.on?n.un(e,t):function(e,t){e&&e.removeEventListener&&t&&t._aplus_tap_callback&&e.removeEventListener(Oe,t._aplus_tap_callback,!1)}(e,t)}function Be(e){try{document.documentElement.doScroll("left")}catch(t){setTimeout(function(){Be(e)},1);return}e()}function Ve(e){var t,n=0,a=function(){0===n&&e();n++};"complete"===document.readyState&&a();if(document.addEventListener){t=function(){document.removeEventListener("DOMContentLoaded",t,!1);a()};document.addEventListener("DOMContentLoaded",t,!1);window.addEventListener("load",a,!1)}else if(document.attachEvent){t=function(){if("complete"===document.readyState){document.detachEvent("onreadystatechange",t);a()}};document.attachEvent("onreadystatechange",t);window.attachEvent("onload",a);var o=!1;try{o=null===window.frameElement}catch(e){}document.documentElement.doScroll&&o&&Be(a)}}function Fe(){var e,t,n=window,a=arguments;if(2===a.length){"DOMReady"===a[0]&&Ve(a[1]);"onload"===a[0]&&Ge(a[1])}else if(3===a.length){var o=a[0],r=a[1],i=a[2];if("tap"===r||"tapSpm"===r)!function(e,t,n){var a=(L(x())._$||{}).meta_info||{},o=a.aplus_ctap||{},r=a["aplus-touch"];if(o&&"function"==typeof o.on)o.on(e,t);else{var i="ontouchend"in document.createElement("div");!i||"tap"!==r&&"tapSpm"!==n&&"tap"!==n?Fe(e,i?"touchstart":"mousedown",t):Re(e,t)}}(o,i,r);else{["pushState","replaceState"].indexOf(r)>-1&&(history[r]=(e=r,t=history[e],function(){var n;try{(n=new Event(e)).arguments=arguments}catch(t){(n=document.createEvent("Event")).initEvent(e,!0,!0)}window.dispatchEvent(n);return t.apply(this,arguments)}));var s=document.attachEvent?"attachEvent":"addEventListener",c=!!document.attachEvent;o[s]((c?"on":"")+r,function(e){var t=(e=e||n.event).target||e.srcElement;"function"==typeof i&&i(e,t)},!!function(e){if("boolean"==typeof pe)return pe;if(!/touch|mouse|scroll|wheel/i.test(e))return!1;pe=!1;try{var t=Object.defineProperty({},"passive",{get:function(){pe=!0}});window.addEventListener("test",null,t)}catch(e){}return pe}(r)&&{passive:!0})}}}function Ge(e){"complete"===document.readyState?e():Fe(window,"load",e)}function He(e){try{return localStorage.getItem(e)}catch(e){return""}}function Ke(e,t){try{return e&&e[t]?e[t].toLowerCase():""}catch(e){C().w("getDomName failed error",e);return""}}function We(e,t){var n=e;do{n=n[t]}while(n&&1!==n.nodeType);return n}function qe(e){return We(e,"previousSibling")}function ze(e){return e&&e.id&&/^[A-Za-z][-A-Za-z0-9_:.]*$/.test(e.id)}function Ye(e){if(!e.parentNode)return-1;for(var t=0,n=Ke(e,"tagName"),a=e.parentNode.children,o=0;o<a.length;){if(n&&Ke(a[o],"tagName")===n){if(e===a[o])return t;t++}o++}return-1}function $e(e){var t=e.parentNode&&9===e.parentNode.nodeType?-1:Ye(e);return e.getAttribute&&e.getAttribute("id")&&/^[A-Za-z][-A-Za-z0-9_:.]*$/.test(e.getAttribute("id"))?"#".concat(e.getAttribute("id")):Ke(e,"tagName")+(~t?":nth-of-type(".concat(t+1,")"):"")}function Qe(e,t){if("aplus-autotrack-off"===t){for(var n=e,a=!1;n;){if(n.hasAttribute&&n.hasAttribute(t)){a="true"===n.getAttribute(t);break}n=n.parentNode}return a}return e.hasAttribute?e.hasAttribute(t):!(!e.attributes[t]||!e.attributes[t].specified)}function Je(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}function Xe(e){if(!document)return"";var t=document.cookie.match(new RegExp("(?:^|;)\\s*".concat(e,"=([^;]+)")));return t?t[1]:""}function Ze(e){var t=new Date,n="";if("session"===e.expires);else if(e.expires&&("number"==typeof e.expires||e.expires.toUTCString)){"number"==typeof e.expires?t.setTime(t.getTime()+24*e.expires*60*60*1e3):t=e.expires;n="expires=".concat(t.toUTCString())}else{t.setTime(t.getTime()+63072e7);n="expires=".concat(t.toUTCString())}return n}function et(e,t,n){if(document){n||(n={});t+=";".concat(Ze(n));t+="; path=".concat(n.path?n.path:"/");t+="; domain=".concat(n.domain);document.cookie="".concat(e,"=").concat(t);var a=0;try{var o=navigator.userAgent.match(/Chrome\/\d+/);o&&o[0]&&(a=o[0].split("/")[1])&&(a=parseInt(a,10))}catch(e){}if(n.SameSite&&a>=80){t+="; SameSite=".concat(n.SameSite);t+="; Secure";document.cookie="".concat(e,"=").concat(t)}return Xe(e)}}var nt=["tracknick","thw","cna"];function at(e,t){var n,a="";if(!e||!t)return a;try{var o=new RegExp("".concat(e,"=([^&|#|?|/]+)"));if("spm"===e||"scm"===e){var r=new RegExp("\\?.*".concat(e,"=([\\w\\.\\-\\*/]+)")),i=t.match(o),s=t.match(r),c=i&&2===i.length?i[1]:"",u=s&&2===s.length?s[1]:"";a=c>u?c:u;a=decodeURIComponent(a)}else a=(n=t.match(o))&&2===n.length?n[1]:"";return a}catch(e){C().w("get param from url failed",e);return a}}function ot(e){_e=_e||document.getElementsByTagName("head")[0];return ve&&!e?ve:_e?ve=_e.getElementsByTagName("meta"):[]}function rt(e,t){var n,a,o,r=ot(),i=r.length;for(n=0;n<i;n++)xe(a=r[n],"name")===e&&(o=xe(a,t||"content"));return o||""}function it(e,t){var n="aplus&sidx=aplusSidex&ckx=aplusCkx",a=e||n;try{if(t){var o=S(t),r=[ae.APLUS,"cna",Z.SPM_CNT,Z.SPM_URL,Z.SPM_PRE,"logtype","pre","uidaplus","asid","sidx","trid","gokey"];d.each(r,function(e){if(Object.prototype.hasOwnProperty.call(o,e)){C().w("Can not inject keywords: ".concat(e));delete o[e]}});delete o[""];var i="";if(e){var s=e.match(/aplus&/).index,c=s>0?S(e.substring(0,s)):{};delete c[""];i="".concat(w(m.assign(c,o)),"&").concat(e.substring(s,e.length))}else i="".concat(w(o),"&").concat(n);return i}return a}catch(e){return a}}function st(){var e=it(xe(Le(),"exparams"),function(){var e=L(x());return((e&&e._$?e._$:{}).meta_info||{})["aplus-exparams"]||""}())||"";return e&&e.replace(/&amp;/g,"&").replace(/\buser(i|I)d=/,"uidaplus=")}var ct="hash",ut="history";function lt(e){var t="";e&&(t=-1!==e.indexOf("?")?e.split("?")[0]:e);return t}var ft={tryToGet:xe,tryToSet:De,tryToRemove:function(e,t){if(e&&e.removeAttribute)try{e.removeAttribute(t)}catch(n){De(e,t,"")}}},pt={getSDKScriptNode:Le,setNonce:Ue,addScript:function(e,t,n){var a="script",o=document.createElement(a);o.type="text/javascript";o.async=!0;var r=Le();r&&r.hasAttribute("crossorigin")&&(o.crossOrigin="anonymous");var i=Z.HTTPS===location.protocol&&t||e;0===i.indexOf("//")&&(i=Z.HTTPS+i);o.src=i;n&&(o.id=n);Ue(o);var s=document.getElementsByTagName(a)[0];_e=_e||document.getElementsByTagName("head")[0];s?s.parentNode.insertBefore(o,s):_e&&_e.appendChild(o)},loadScript:function(e,t){try{var n=document.createElement("script");_e=_e||document.getElementsByTagName("head")[0];n.async=!0;var a=function(e){n.onreadystatechange=null;n.onload=null;n.onerror=null;n=null;t(e)};if("onload"in n)n.onload=a;else{var o=function(){/loaded|complete/.test(n.readyState)&&a()};n.onreadystatechange=o;o()}n.onerror=function(e){a(e)};n.src=e;Ue(n);var r="qt-setting";n.id=r;n.type="text/javascript";n.charset="utf-8";var i=document.getElementsByTagName("script");i&&i.length>0&&d.each(i,function(e){e&&e.id===r&&_e.removeChild(e)});_e.appendChild(n)}catch(e){}},isTouchEnabled:function(){return"ontouchend"in document.createElement("div")},getAttributeFromEachDom:function(e,t){for(var n="";"BODY"!==e.tagName&&!(n=xe(e,t));)e=e.parentNode;return n},siblings:function(e,t){return"nextSibling"===t?e.nextSibling:"previousSibling"===t?e.previousSibling:null},sibling:We,previousElementSibling:function(e){var t=e;if("previousElementSibling"in document.documentElement)return qe(t);for(;t.previousSibling;)if(1===(t=t.previousSibling).nodeType)return t;return null},getSameTypeSiblings:function(e){for(var t=e,n=t.parentNode,a=Ke(t,"tagName"),o=[],r=0;r<n.children.length;){var i=n.children[r];1===i.nodeType&&a&&Ke(i,"tagName")===a&&o.push(n.children[r]);r++}return o},getNext:function(e){return We(e,"nextSibling")},getPrev:qe,indexOf:function(e,t){var n=e.indexOf;if(n)return n.call(e,t);for(var a=0;a<e.length;a++)if(t===e[a])return a;return-1},getClosestLi:function(e){return function(e){for(;e&&e!==document&&1===e.nodeType;e=e.parentNode)if("li"===Ke(e,"tagName"))return e;return null}(e)},getElementPath:function(e){var t=[];if(!e)return"";for(;e.parentNode;){if(ze(e)){t.unshift("".concat(Ke(e,"tagName"),"#").concat(e.id));break}if(e===document.body){t.unshift("body");break}e.tagName&&e.tagName.toLowerCase&&t.unshift(Ke(e,"tagName"));e=e.parentNode}return t.join(" > ")},getXPath:function(e){var t,n,a,o,r,i,s=document.getElementsByTagName("*");for(t=[];e&&1===e.nodeType;e=e.parentNode)if(e.id){i=e.id;o=0;for(n=0;n<s.length;n++)if((r=s[n]).id&&r.id===i){o++;break}t.unshift("".concat(e.tagName.toLowerCase(),'[@id="').concat(i,'"]'));if(1===o){t.unshift("/");return t.join("/")}}else{for(n=1,a=e.previousSibling;a;a=a.previousSibling)a.tagName===e.tagName&&n++;t.unshift("".concat(e.tagName.toLowerCase(),"[").concat(n,"]"))}return t.length?"/".concat(t.join("/")):null},getDomIndex:Ye,selector:$e,getDomSelector:function e(t,n){if(!t||!t.parentNode||!t.parentNode.children)return null;n=n&&n.join?n:[];if("body"!==Ke(t,"tagName")&&1===t.nodeType){n.unshift($e(t));return t.getAttribute&&t.getAttribute("id")&&/^[A-Za-z][-A-Za-z0-9_:.]*$/.test(t.getAttribute("id"))?n.join(" > "):e(t.parentNode,n)}n.unshift("body");return n.join(" > ")},hasAttributes:function(e,t){if("string"==typeof t)return Qe(e,t);if(d.isArray(t)){for(var n=!1,a=0;a<t.length;a++)if(Qe(e,t[a])){n=!0;break}return n}},hasAttribute:Qe,getElementContent:function(e,t){var n="",a=L(x());e.textContent?n=Je(e.textContent):e.innerText?n=Je(e.innerText):"input"===t||"INPUT"===t?a.getMetaInfo(ae.SDK_AUTOTRACK_CONFIG).collect_input&&(n=encodeURIComponent(e.value)||""):"button"!==e.type&&"submit"!==e.type||(n=e.value||"");n&&(n=n.replace(/[\r\n]/g," ").replace(/[ ]+/g," ").substring(0,255));return n},nodelistToArray:function(e){var t,n;try{return t=[].slice.call(e)}catch(o){t=[];n=(e||[]).length;for(var a=0;a<n;a++)t.push(e[a]);return t}},addStyle:function(e,t){var n="".concat(e,"_style"),a=document.getElementById(n);if(!a){(a=document.createElement("link")).id=n;a.href=t;a.rel="stylesheet";a.type="text/css";document.getElementsByTagName("head").item(0).appendChild(a)}},getRefer:function(){return document.referrer||""},getDomName:Ke,setWinVariableKeyValue:function(e,t){try{window[e]=t}catch(e){C().w("setWinVariableKeyValue failed error",e);C().w("current window = ",window);C().w("current userAgent = ",window.navigator.userAgent)}}},dt={getCookie:Xe,trySetCookie:et,setCookie:function(e,t,n){try{if(!document)return"";n||(n={});if(n.domain)et(e,t,n);else for(var a=Me(),o=0;o<a.length;){n.domain=a[o];et(e,t,n)?o=a.length:o++}}catch(e){}},getData:function(){var e={};d.each(nt,function(t){e[t]=Xe(t)});if(location){var t=location.hostname;e.cnaui=/\btanx\.com$/.test(t)?Xe("cnaui"):""}return e},getHng:function(){return encodeURIComponent(Xe("hng")||"")},getCna:function(e){return Xe(e)||Xe("_".concat(e))},setCna:function(e,t,n){for(var a=Me(),o=0;o<a.length;){n.domain=a[o];if(et(e,t,n))o=a.length;else{if(o===a.length-1){var r="".concat(t,";").concat(Ze(n));r+="; path=/";document.cookie="_".concat(e,"=").concat(r)}o++}}},getCookieFP:function(){var e,t=Xe(Z._browerFP);t&&(e=t.split("_")[0]);return e},getAttrArgsFromCookie:function(e){var t={};d.each(e||[],function(e){var n=e.commitKey||e,a=e.cookieName||e;t[n]=Xe(a)||""});return t}},gt={on:Fe,un:function(e,t,n){"tap"!==t?document.attachEvent?e.detachEvent(t,n):e.removeEventListener(t,n):je(e,n)},onload:Ge,domReady:Ve,addHandler:function(e,t,n){if(e.addEventListener){var a=L(x()).getMetaInfo(ae.APLUS_AUTOTRACK_CONFIG)||{};e.addEventListener(t,n,!!a.element_capture_enable||!1)}else e.attachEvent?e.attachEvent("on".concat(t),n):e["on".concat(t)]=n},removeHandler:function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent("on".concat(t),n):e["on".concat(t)]=null},clickEvent:function(){return"ontouchstart"in document.documentElement==1?"touchstart":"click"}},ht={set:function(e,t){try{localStorage.setItem(e,t);return!0}catch(e){return!1}},get:He,test:function(){var e="grey_test_key";try{localStorage.setItem(e,1);localStorage.removeItem(e);return!0}catch(e){return!1}},remove:function(e){try{localStorage.removeItem(e);return!0}catch(e){return!1}},getLocalStorageFP:function(){var e,t=He(Z._browerFP);t&&(e=t.split("_")[0]);return e}},_t={getQueryFromUrl:function(){function e(e){for(var t=decodeURIComponent(e),n=t.indexOf("?")+1,a=t.substring(n),o=Object.create(null),r=a.split("&"),i=0;i<r.length;i++)o[r[i].split("=")[0]]=decodeURIComponent(r[i].split("=")[1]);return o}try{var t=location&&location.hash,n=location&&location.search;if(t&&-1!==t.indexOf("?"))return e(t);if(n&&-1!==n.indexOf("?"))return e(n)}catch(e){C().w("get query failed, current url =",location.href)}},getAParamFromUrl:at,addParamsIntoUrl:function(e,t){var n,a,o,r=t||location.href,i="&",s=[];d.each(e,function(e,t){new RegExp("".concat(e,"=")).test(r)||s.push("".concat(e,"=").concat(t))});if(0===s.length)return r;if(-1!==r.indexOf("#")){o=r.split("#");r=o.shift();a=o.join("#")}var c=r.split("?"),u=c.length-1;o=(o=c[0].split("//"))[o.length-1].split("/");if(u>0){n=c.pop();r=c.join("?")}n&&u>1&&-1===n.indexOf("&")&&-1!==n.indexOf("%")&&(i="%26");return r="".concat(r,"?").concat(s.join("&")).concat(n?i+n:"").concat(a?"#".concat(a):"")},getSPMFromUrl:function(e){return at("spm",e)},tryToEncode:function(e){var t=e||"";if(e)try{t=encodeURIComponent(decodeURIComponent(e))}catch(e){}return t},tryToDecode:function(e,t){var n=t||"";if(e)try{n=decodeURIComponent(e)}catch(e){}return n},getWebUrlParams:function(){for(var e=/[?&]([^=#]+)=([^&#]*)/g,t=window.location.href,n={},a=e.exec(t);a;){n[a[1]]=a[2];a=e.exec(t)}return n}},mt={getMetaTags:ot,getMetaCnt:rt,mergeExparams:it,getExParams:st,getExparamsInfos:function(e,t){for(var n={},a=e||["uidaplus","pc_i","pu_i"],o=st()||"",r=T(o=o.replace(/&aplus&/,"&"))||[],i=function(e){return d.indexOf(a,e)>-1},s=0;s<r.length;s++){var c=r[s],u=c[0]||"",l=c[1]||"";u&&l&&("EXPARAMS"===t||i(u))&&(n[u]=l)}return n}},vt={watchHistoryChange:function(e){var t=L(x()),n=location.pathname+location.search;if(history.pushState&&window.addEventListener){ye.pushIntoGoldlogQueue("".concat(x(),".on"),[window,"pushState",function(e){a(e)}]);ye.pushIntoGoldlogQueue("".concat(x(),".on"),[window,"popstate",function(){a()}]);(rt("aplus-track-replacestate")||t.getMetaInfo("aplus-track-replacestate"))&&ye.pushIntoGoldlogQueue("".concat(x(),".on"),[window,"replaceState",function(e){a(e)}])}function a(a){var o="";if(a){var r;if("object"===l(o=a&&a.arguments&&a.arguments.length>2&&a.arguments[2])){var i=o.toString();r=/^http|https/.test(i)?i:"".concat(location.protocol,"//").concat(location.host).concat(i)}else r=/^http|https/.test(o)?o:"".concat(location.protocol,"//").concat(location.host).concat(o);location.href!==r&&setTimeout(function(){e&&"function"==typeof e&&e(o,ut)},0)}else(o=location.pathname+location.search)!==n&&setTimeout(function(){e&&"function"==typeof e&&e(o,ut)},0);if(t.getMetaInfo(ae.APLUS_EXPOSURE_EVENT_CAN_REPEAT)){var s="".concat(x(),"_pubsub");t[s].publish("APLUS_AE_PAGE_CHANGE")}n=o}},watchHashChange:function(e){var t=lt(location.hash),n=location.href;ye.pushIntoGoldlogQueue("".concat(x(),".on"),[window,"hashchange",function(){var a=L(x()),o=a&&a.getMetaInfo(ae.PAGE_CONFIG),r=lt(location.hash),i=location.href;if(o&&o.hashMode)if(t!==r){t=r;e&&"function"==typeof e&&e(t,ct)}else if(o.hashAutoPVSupportFullURL&&i!==n){n=i;e&&"function"==typeof e&&e(t,ct)}}])},retrenchHash:lt};function yt(e,t){try{a=window,o={apiName:e.apiName,queueName:e.queueName},N=a._sdk_context||R.create(a,o);var n=L(x());F([Z.SDK_READY,"running"]);if(n){n.initParams=function(t){var n=U("_$")||{};n.meta_info=g(e.metaInfo,t);j("_$",n);!function(e){if("boolean"==typeof fe)return fe;if("boolean"==typeof e)fe=e;else if(localStorage&&location){var t=location.href.match(/debugMode=(true|false)/);t&&t.length>0&&localStorage.setItem("debugMode",t[1]);fe="true"===localStorage.getItem("debugMode")}else fe=!1;C().setDebug(fe,!1)}(t.DEBUG);if(t&&t.disableSDK){ht.set(ae.APLUS_SDK_DISABLE,!0);C().w("QuickTracking SDK is disabled!!!")}};n.use=function(e,t){C().w("use plugin: ",e);C().w("use plugin options: ",t);if(v(e)||h(e)){var a;v(e)&&window.QuickTrackingJSSdkPlugin&&h(window.QuickTrackingJSSdkPlugin)&&window.QuickTrackingJSSdkPlugin[e]&&(a=window.QuickTrackingJSSdkPlugin[e]);if(a&&b(a.init))return a._plugin_is_inited?a:function(){if(!a._plugin_is_inited){a.init(n,t);a._plugin_is_inited=!0}return a}();C().w("".concat(e," is not found, or it's not a valid plugin"))}else C().w("use plugin failed: plugin should be string or object")}}!function(e,t){(new de).run({plugins:e.plugins,context:e.context},{config:{},userdata:{},pubsubType:"aplusinit",messageFnQueue:[],middlewareMessageKey:"mw_change_aplusinit"},function(e){var n=["aplusInitContext",e];F(n);G(n);b(t)&&t(e)})}({plugins:e.plugins,context:function(){var t={PAGE_LOAD_TIME:new Date};f(e.plugins,function(e){t[e.name]=e.config||{};"aplus_log_inject"===e.name&&e.config&&e.config.plugins&&f(e.config.plugins.pv,function(e){t[e.name]=e.config})});return g(t,{sdk_config:e})}},function(e){if(b(t)){t(e);var n=["".concat(x(),"Ready"),"complete"];F(n);G(n)}})}catch(e){}var a,o}function bt(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){if(this instanceof e){var n=[null];n.push.apply(n,arguments);return new(Function.bind.apply(t,n))}return t.apply(this,arguments)};n.prototype=t.prototype}else n={};Object.defineProperty(n,"__esModule",{value:!0});Object.keys(e).forEach(function(t){var a=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,a.get?a:{enumerable:!0,get:function(){return e[t]}})});return n}var At="2.4.9",St=0,Et={},wt={getStartId:function(){return O.getRandomStr(10)+Date.now()+O.getRandomStr(9)},getUUID:function(){return O.getRandomStr(10)+Date.now()+O.getRandomStr(9)},fixDomain:function(e){if(-1!==e.indexOf("https://")||-1!==e.indexOf("http://"))return e;e=(/^\/\//.test(e)?"":"//")+e;return/(\d+\.){3,}\d+/.test(e)?Z.HTTP+e:Z.HTTPS+e},getAppKey:function(){var e=L(x());return e.getMetaInfo("appkey")||e.getMetaInfo("appId")||e.getMetaInfo("appKey")},getTrackDomain:function(){var e=L(x());return e.getMetaInfo(ae.APLUS_PV_DOMAIN)||e.getMetaInfo(ae.TRACKDOMAIN)},checkDomain:function(e,t){var n=new RegExp(/^((http|https|''):\/\/)?([a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+(:[0-9]{1,5})*)(\/.*)?$/),a=((e||"").match(n)||[])[0];if(!e||!a){C().tip_w(C().repeat("!"));C().tip_w("trackDomain error, please check ".concat(t," setting, current value is: ").concat(e)||"undefined");C().tip_w("we accept these three patterns:");C().tip_w("eg1: https://test-qtracking-xxx.com:port/a/b/c, port is optional");C().tip_w("eg2: http://test-qtracking-xxx.com:port/a/b/c, port is optional");C().tip_w("eg3: test-qtracking-xxx.com:port/a/b/c, port is optional");C().tip_w(C().repeat("!"));return!1}return!0},checkOpenid:function(e){if(!e){C().tip_w(C().repeat("!"));C().tip_w("QT need an unique id as QT's deviceid!!");C().tip_w("setting examples: aplus_queue.push({action: '".concat(x(),".setMetaInfo', arguments: ['_anony_id', xxxxxx]});"));C().tip_w("referrence document: https://t.tb.cn/1dTHjTTQF0UjOTNHiCkaCS");C().tip_w(C().repeat("!"));return!1}return!0},checkEvent:function(e,t){if(!e||"string"!=typeof e){C().w("event logkey is invalid, id =",e||"'' event properties = ",y.stringfy(t.cusp));return!1}var n=["id","du"],a={};n.forEach(function(e){a[e]=1});if(a[e]){C().e("eventId has conflict with reservewords: ".concat(n.join(",")));return!1}if(e.length>ae.MAX_EVENTID_LENGTH){C().e("The maximum length of event id shall not exceed ".concat(ae.MAX_EVENTID_LENGTH));return!1}if(t&&("object"!==l(t)||d.isArray(t))&&"string"!=typeof t){C().e("please check trackEvent properties. properties should be string or object(not include Array)");return!1}if("object"===l(t)){var o=0;for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r)){if(r.length>ae.MAX_PROPERTY_KEY_LENGTH){C().e("The maximum length of property key shall not exceed ".concat(ae.MAX_PROPERTY_KEY_LENGTH));return!1}if(o>=ae.MAX_PROPERTY_KEYS_COUNT){C().e("The maximum count of properties shall not exceed ".concat(ae.MAX_PROPERTY_KEYS_COUNT));return!1}if(a[r]){C().e("property key has conflict with reserveWords: ".concat(n.join(",")));return!1}o+=1}}return!0},rank:function(){St++;Object.prototype.hasOwnProperty.call(Et,St)?St++:Et[St]=St;return St},clear:function(){St=0;Et={}},zeroFill:function(e,t,n){var a="".concat(Math.abs(e)),o=t-a.length,r=e>=0,i=Math.pow(10,Math.max(0,o)).toString().substring(1)+a;return r?(n?"+":"")+i:"-".concat(i)},date2YYMMDD:function(e){try{var t=new Date;return[t.getFullYear(),this.zeroFill(t.getMonth()+1,2,0),this.zeroFill(t.getDate(),2,0)].join(e||"")}catch(e){return""}},date2YYMMDDHHMMSS:function(e){try{var t=new Date;return[t.getFullYear(),this.zeroFill(t.getMonth()+1,2,0),this.zeroFill(t.getDate(),2,0),this.zeroFill(t.getHours(),2,0),this.zeroFill(t.getMinutes(),2,0),this.zeroFill(t.getSeconds(),2,0)].join(e||"")}catch(e){return""}},mapEventSampleRates:function(e){var t=[];f(e,function(e){e.eventIds&&e.eventIds.length>0&&f(e.eventIds,function(n){t.push({eventId:n,samplingRate:e.samplingRate})})});return t},hash:function(e,t){var n,a=t||1315423911;for(n=e.length-1;n>=0;n--)a^=(a<<5)+e.charCodeAt(n)+(a>>2);for(var o=(2147483647&a).toString(16);o.length<8;)o+="0";return o},isDebug:function(){var e=!1,t=L(x());try{e=/debugMode=true/.test(location.href)||t.getMetaInfo("DEBUG")}catch(e){}return e},localAutoEventDisabled:function(){return!!L(x()).getMetaInfo(ae.APLUS_DISABLE_AUTOEVENT)},localAutoPVDisabled:function(){var e=L(x()),t=e.getMetaInfo(ae.APLUS_DISABLE_AUTOPV);return"string"==typeof t&&""===t?!(!e._$.meta_info[ae.APLUS_DISABLE_AUTOPV]&&"MAN"!==e._$.meta_info["aplus-waiting"]):!(!e.getMetaInfo(ae.APLUS_DISABLE_AUTOPV)&&"MAN"!==e.getMetaInfo("aplus-waiting"))},getAutoTrackStatus:function(){return!!L(x()).getMetaInfo(ae.APLUS_AUTOTRACK_ENABLED)},semicolonStr2Obj:function(e,t,n){t=t||{};var a,o,r=e.split(";"),i=r.length;for(o=0;o<i;o++){a=r[o].split("=");var s=O.trim(a.slice(1).join("="));t[O.trim(a[0])||""]=n?s:_t.tryToDecode(s)}return t},getEtagUrl:function(e){var t=L(x()),n=e;try{var a=t.getMetaInfo(ae.APLUS_PV_DOMAIN);a=this.fixDomain(a);n="".concat(a,"/eg.js")}catch(e){}return n},getImprintFromStorage:function(e){if(ht.get&&ht.test()){var t="",n=ht.get(e);if(n){var a=n.split("||")||[];t=a.length>1&&a[1]}return decodeURIComponent(t)}return""},setImprintToStorage:function(e,t){t&&ht.set&&ht.test()&&ht.set(e,"".concat(this.date2YYMMDDHHMMSS(),"||").concat(encodeURIComponent(t)))},setRemoteConfigToStorage:function(e,t){if(t&&ht.set&&ht.test()){var n=m.cloneDeep(t);"object"===l(n)&&(n=JSON.stringify(n));ht.set(e,"".concat(this.date2YYMMDDHHMMSS(),"||").concat(encodeURIComponent(n)))}},getRemoteConfigFromStorage:function(e){if(ht.get&&ht.test()){var t="",n=ht.get(e);if(n){var a=n.split("||")||[];t=a.length>1&&a[1]}return y.parse(decodeURIComponent(t))}return""},setCnaToStorage:function(e,t,n){n&&ht.set&&ht.test()&&ht.set(e,"".concat(t,"_").concat(encodeURIComponent(n)))},getCnaFromStorage:function(e,t){if(ht.get&&ht.test()){var n="",a=ht.get(e);if(a){var o=a.split("_")||[];n=t?o.length>1&&t===o[0]?o[1]:"":o.length>1?o[1]:""}return decodeURIComponent(n)}return""},deleteInfo:function(e,t){f(t,function(t){delete e[t]});return e},resetFn:function(){var e=arguments.length>0&&arguments[0]?arguments[0]:{},t=arguments.length>1&&arguments[1]?arguments[1]:"",n=arguments.length>2&&arguments[2]?arguments[2]:function(){},a=e[t];e[t]=function(){var e=a&&a.apply(this,arguments);return e?n.call(this,e):n.apply(this,arguments)}},rewriteFn:function(e,t,n){var a=e[t];e[t]=function(e){n.call(this,e);a&&a.call(this,e)}},getHashKey:function(e,t){var n=[t.logkey,t.cssSelector];t.positionSelector&&n.push(t.positionSelector);e.id?n.push(e.id):e.index>=0&&n.push(e.index);e.dataset&&e.dataset.privateNodeId&&delete e.dataset.privateNodeId;e.dataset&&n.push(JSON.stringify(e.dataset));return n=n.join("_")},getTimeZone:function(){var e=-(new Date).getTimezoneOffset()/60;return Math.abs(parseInt(e,10))},convertNativeMapStringToJSON:function(e){var t=e.replace(/(\w+)=([^,]+)/g,'"$1":"$2"').replace(/[{}]/g,""),n="{".concat(t,"}");return JSON.parse(n)}},Tt={rank:wt.rank,clear:wt.clear},Pt={localAutoEventDisabled:wt.localAutoEventDisabled,localAutoPVDisabled:wt.localAutoPVDisabled,getAutoTrackStatus:wt.getAutoTrackStatus},Ot={set:wt.setRemoteConfigToStorage,get:wt.getRemoteConfigFromStorage},It={set:wt.setImprintToStorage,get:wt.getImprintFromStorage},Ct={set:wt.setCnaToStorage,get:wt.getCnaFromStorage},kt={resetFn:wt.resetFn,rewriteFn:wt.rewriteFn};wt.LocalCfgUtils=Pt;wt.RemoteCfgUtils=Ot;wt.CNAUtils=Ct;wt.ImprintUtils=It;wt.AccessType={MOBILE_NETWORK_2G:"2g",MOBILE_NETWORK_3G:"3g",MOBILE_NETWORK_4G:"4g",MOBILE_NETWORK_NONE:"none"};wt.FunctionUtils=kt;wt.RankUtils=Tt;var Nt,Rt,Mt,xt=function(){return a(function e(n){t(this,e);this.options=n},[{key:"run",value:function(){try{var e=L(x()),t=wt.getStartId();e[ae.START_ID]=t;e[ae.START_TIME]=Date.now()}catch(e){}}}])}(),Dt=bt(Object.freeze({__proto__:null,default:xt})),Lt=function(){return a(function e(n){t(this,e);this.options=n},[{key:"run",value:function(){var e=document,t=L(x());if(!t._aplus_cplugin_track_deb){t._aplus_cplugin_track_deb={status:"init"};var n=window,a=function(e){t._aplus_cplugin_track_deb.status="start";var n={aplus_track_debug_id:e},a=L(D());a.push({action:"".concat(x(),".appendMetaInfo"),arguments:["aplus-exdata",n]});a.push({action:"".concat(x(),".appendMetaInfo"),arguments:["aplus-cpvdata",n]});t._aplus_cplugin_track_deb.status="complete"};gt.on(n,"message",function e(){var t=e&&e.data;if(t&&"qt_verify_msg"===t.message){window.localStorage.setItem("aplus_track_debug_id",t.data);a(t.data);e.source&&e.source.postMessage({message:"qt_msg_sdk"},e.origin)}});var o=function(){try{var t=n.localStorage,a="aplus_track_debug_id",o=new RegExp("[?|&]".concat(a,"=(\\w*)")),r=location.href.match(o);if(r&&r.length>0)t.setItem(a,r[1]);else{var i=(e.referrer||"").match(o);if(i&&i.length>0)t.setItem(a,i[1]);else{var s=(n.name||"").match(o);s&&s.length>0&&t.setItem(a,s[1])}}var c=t.getItem(a)||"";if(!(c&&c.length>50))return!1;var u,l=c.split("_");if(l&&l.length>0){u=l[l.length-1].replace(/log/,"");var f=new Date,p=f.getTime(),d=new Date;d.getTime();f.setFullYear(parseInt(u.substring(0,4),10));f.setMonth(parseInt(u.substring(4,2)-1,10));f.setDate(parseInt(u.substring(6,2),10));f.setHours(parseInt(u.substring(8,2),10));f.setMinutes(parseInt(u.substring(10,2),10));f.setSeconds(parseInt(u.substring(12,2),10));f.setMilliseconds(0);p=f.getTime();return d.getTime()-p<=36e5&&(c||r[1])}}catch(e){return!1}}();o&&a(o)}}}])}(),Ut=bt(Object.freeze({__proto__:null,default:Lt})),jt=function(){return a(function e(n){t(this,e);this.options=n},[{key:"run",value:function(e,t){var n=setInterval(function(){if(document.getElementsByTagName("body").length){clearInterval(n);n=null;t()}},50);setTimeout(function(){n&&clearInterval(n)},1e3);return 1e3}}])}(),Bt=bt(Object.freeze({__proto__:null,default:jt})),Vt=function(){return a(function e(n){t(this,e);this.options=n},[{key:"run",value:function(){L(x())._aplus_client=function(){var e=navigator.userAgent,t={},n=e.match(/iphone|ipad|android|macintosh/i),a=e.match(/Darwin/i);t=n?function(e,t){var n=e.substring(e.indexOf("(")+1,e.indexOf(")")),a={device_model:t},o=t.toLowerCase();switch(o){case"ipad":case"iphone":case"ipod":case"macintosh":"macintosh"===o?/Mac OS X/.test(n)?a.os="Mac OS X":a.os="Mac OS":a.os="IOS";a.os_version=n.match(/[0-9_.]+/)[0];break;case"android":a.os="Android";a.os_version=n.match(/[0-9.]+/)[0]}a.os_version=a.os_version.replace(/_/g,".");return a}(e,n[0]):a?{os:"Darwin",os_version:e.split(" ")[2].match(/[0-9.]+/)[0],device_model:"Darwin"}:function(e){for(var t=[["Windows NT 5.1","winXP"],["Windows NT 6.1","win7"],["Windows NT 6.0","winVista"],["Windows NT 6.2","win8"],["Windows NT 6.3","win8.1"],["Windows NT 10.0","win10"],["Ubuntu","ubuntu"],["Linux","linux"],["Windows NT 5.2","win2003"],["Windows NT 5.0","win2000"],["Windows 10(WOW64)","win10"],["Windows","winOther"],["rhino","rhino"]],n=0,a=t.length;n<a;++n){var o=t[n][0];if(-1!==e.indexOf(o)){var r=o.split(" ")[0];return{device_model:r,os:r,os_version:t[n][1]}}}var i="other";return{device_model:i,os:i,os_version:i}}(e);var o=screen||{};t.screenWidth=o.width;t.screenHeight=o.height;if(navigator){t.userAgent=navigator.userAgent||"-";t.language=navigator.language||navigator.userLanguage||"-"}return t}()}}])}(),Ft=bt(Object.freeze({__proto__:null,default:Vt})),Gt={};function Ht(){if(document){var e=mt.getMetaTags();!function(e){var t,n,a,o=e.length,r={};for(t=0;t<o;t++){n=e[t];if("microscope-data"===ft.tryToGet(n,"name")){a=ft.tryToGet(n,"content");wt.semicolonStr2Obj(a,r);Gt.is_head_has_meta_microscope_data=!0}}}(e);d.each(e,function(e){var t=ft.tryToGet(e,"name");(/^aplus/.test(t)||/^qt/.test(t))&&(Gt[t]=mt.getMetaCnt(t))});var t,n,a=["aplus-rate-ahot"],o=a.length;for(t=0;t<o;t++)Gt[n=a[t]]=parseFloat(Gt[n])}Rt=Gt||{};return Gt}function Kt(){return Rt||Ht()}function Wt(e,t){Rt||(Rt={});if("object"===l(Nt)&&Nt[e]){!function(e){C().w("please do not repeat setPriorityMetaInfo ".concat(e))}(e);return!0}Rt[e]="aplus-exinfo"===e?"object"===l(t)?t:S(t):t;if(e===ae.APLUS_SDK_DISABLE)if(t){C().w("QuickTracking SDK disabled!!!");ht.set(e,t)}else{C().w("QuickTracking SDK enabled!!!");ht.remove(e)}try{if(e===Z._DEV_ID||e===Z._USER_ID){e===Z._DEV_ID&&ht.get(e)&&ht.get(e)!==t&&F(["onDeviceIdChange",t]);e===Z._USER_ID&&ht.get(e)&&ht.get(e)!==t&&F(["onUserIdChange",t]);t?ht.set(e,t):ht.remove(e)}}catch(e){}return!0}function zt(e){Rt||(Rt={});try{if(e===Z._DEV_ID)return Rt[e]||ht.get(Z._DEV_ID)||ht.get(Z._CNA)||dt.getCna(Z._CNA);if(e===Z._USER_ID)return Rt[e]||ht.get(Z._USER_ID)}catch(e){}return Rt[e]||""}function Yt(){var e=document,t="//g.alicdn.com";if(e){var n=e.getElementById("beacon-aplus")||e.getElementById("tb-beacon-aplus"),a=["//assets.alicdn.com/g"];if(n)for(var o=0;o<a.length;o++)if(new RegExp(a[o]).test(n.src)){t=a[o];break}}return t}function $t(){Mt||(Mt=Yt());return"//assets.alicdn.com/g"===Mt||"//laz-g-cdn.alicdn.com"===Mt||"int"===zt("aplus-env")}var Qt=function(){return a(function e(n){t(this,e);this.options=n},[{key:"run",value:function(){!function(e){var t=L(x()),n=U("_$")||{},a=pt.getRefer();n.send_pv_count=0;n.spm={data:{},page_referrer:a};n.page_referrer=a;t.globalConfig=e.globalConfig;n.meta_info=m.assign(Kt(),n.meta_info)||{};for(var o in e.metaInfo)if(o===ae.APLUS_PV_DOMAIN||o===ae.APLUS_EKV_DOMAIN){n.meta_info[ae.APLUS_PV_DOMAIN]=n.meta_info[ae.TRACKDOMAIN];n.meta_info[ae.APLUS_EKV_DOMAIN]=n.meta_info[ae.TRACKDOMAIN]}else o!==ae.APPKEY&&(n.meta_info[o]=e.metaInfo[o]);for(var r in n.meta_info)Object.prototype.hasOwnProperty.call(n.meta_info,r)&&Wt(r,n.meta_info[r]);t._$=n;t.isInternational=$t;t.getCdnPath=Yt}(this.options.context.sdk_config)}}])}(),Jt=bt(Object.freeze({__proto__:null,default:Qt}));function Xt(e){if("function"==typeof e)try{e()}catch(e){t={msg:e.message||e},n="exception",L(D()).push({action:"".concat(x(),"._aplus_cplugin_track_deb.monitor"),arguments:[{key:"APLUS_PLUGIN_DEBUG",title:"aplus_core",msg:["_error_:methodName=".concat(n,",params=").concat(JSON.stringify(t))],type:"updateMsg",description:n||"aplus_core"}]})}var t,n}var Zt="data-aplus-ae",en="data-aplus-clk",tn="data-spm-anchor-id",nn="data-aplus-vt-pos",an=1e3;function on(){return{method:ie.POST,pkgSize:10}}function rn(e){var t=L(x());return t&&t.getMetaInfo?t.getMetaInfo(e):mt.getMetaCnt(e)}var sn=function(e){var t=e;try{var n=rn("aplus-auto-exp-visible");n&&(t=parseFloat(n));t<=0&&(t=e);return t}catch(n){return t=e}},cn=sn(.3),un=sn("aplus-auto-exp-visible"),ln=sn("aplus-auto-exp-window")||un,fn=function(e){var t=e;try{var n=rn("aplus-auto-exp-duration"),a=parseInt(n,10);"NaN"!=="".concat(a)&&(t=a);return t}catch(e){return t}}(300);function pn(e,t){var n,a=[],o=[];try{n=t||rn(e);var r=[];if(n&&"string"==typeof n)try{r=JSON.parse(n)}catch(e){r=JSON.parse(n.replace(/'/g,'"'))}else"object"===l(n)&&n.constructor===Array&&(r=n);if(r&&r.constructor===Array)for(var i=0;i<r.length;i++){var s=r[i]||{},c=s.logkey||"",u=s.tag?s.tag:"",f=s.filter,p=s.cssSelector;if(!c||!(p||u&&f))throw new Error("meta ".concat(e," config error, ").concat(JSON.stringify(s)));f="string"==typeof f?f.split("="):[];var g=u;f.length>=2?g+="[".concat(f.shift(),'="').concat(decodeURIComponent(f.join("")),'"]'):1===f.length&&f[0]&&(g+="[".concat(decodeURIComponent(f[0]),"]"));p&&(g+=p);s.elementSelector=g;if(d.indexOf(o,g)>-1)throw new Error("meta ".concat(e," config error, tag_filter_cssSelector ").concat(g," repeated"));o.push(g);a.push(s)}return a}catch(e){C().w(e);return a}}function dn(e){return pn("aplus-auto-exp",e)||[]}function gn(){var e=rn("aplus-auto-exp-userfn");if(e){var t=window[e]||e;if("function"==typeof t)return t}return null}function hn(){var e=!1;try{e="throttle"===rn("aplus-auto-exp-watchdom")}catch(e){}return e}function _n(e){return pn("aplus-auto-clk",e)||[]}var mn=document,vn=window;function yn(e,t){var n=[];if((t||mn).querySelectorAll)n=pt.nodelistToArray(document.querySelectorAll(e.elementSelector)||[]);else for(var a=document.getElementsByTagName(e.tag),o=e.filter.split("="),r=o.length>0?o[0].trim():"",i=o.length>1?o[1].trim():"",s=0;s<a.length;s++){var c=a[s],u=c.getAttribute(r);!c.hasAttribute(r)||i&&i!==u||n.push(c)}return n}var bn=/aplusDebug=true/.test(location.href)||/debugMode=true/.test(location.href);function An(e,t,n){var a=n;a||(a={});try{var o=e.props||[];if(o&&p(o)&&o.length>0)for(var r=0;r<o.length;r++)if(t&&t.getAttribute){var i=o[r],s=t.getAttribute(i);null!=s&&""!==s&&(a[i.toLowerCase().replace(/^data-/,"")]=s)}}catch(e){C().w(e&&e.message)}return a}function Sn(e,t,n){var a=n;a||(a={});try{var o=(e.filter||"").split("=");if(p(o)&&o[1])a[o[0]]=o[1];else if(o[0]&&t&&t.getAttribute){var r=t.getAttribute(o[0])||"";null!=r&&""!==r&&(a[o[0]]=r)}}catch(e){C().w(e&&e.message)}return a}var En="data-tracker-params";function wn(e){var t={};try{var n=Sn({filter:En},e);n&&n[En]&&(t=JSON.parse(n[En]))}catch(e){}return t}function Tn(e,t,n){n||(n={});var a,o,r;a=e&&e.spmB?e.spmB:document.body.dataset&&document.body.dataset.pagename;o=e&&e.spmC?e.spmC:t.parentNode&&t.parentNode.dataset&&t.parentNode.dataset.spmc;r=e&&e.spmD?e.spmD:t.dataset&&t.dataset.spmd;t.dataset&&t.dataset.aplusVtPos&&(r+="_".concat(t.dataset.aplusVtPos));a&&(n.spmB=a);o&&(n.spmC=o);r&&(n.spmD=r);return n}function Pn(e){return!!/^POST|GET$/i.test(e)}function On(e){return!!(/^\d+$/.test(e)&&parseInt(e,10)>0)}function In(e){var t=on()||{};try{var n=e||{};Pn(n.method)&&(t.method=n.method);On(n.pkgSize)&&(t.pkgSize=parseInt(n.pkgSize,10))}catch(e){C().w(e&&e.message)}return t}function Cn(e,t,n,a){var o={userdata:{},spm:"",scm:""};try{var r=e(t,n,a);if(r)if("string"==typeof r)o.userdata=function(e){var t=e.split("&"),n={};t.length>0&&f(t,function(e){var t=e.split("=");2===t.length&&(n[t[0]]=_t.tryToEncode(t[1]))});return n}(r);else if("object"===l(r)&&"object"===l(r.userdata)){_(r.userdata,function(e,t){o.userdata[e]=t});o.spm=r.spm;o.scm=r.scm}}catch(e){C().w(e)}return o}function kn(e,t){var n=L(x()),a={};"aplus_webvt"!==e.source&&(a=function(e){var t=e.getAttribute("data-spm-anchor-id");if(t){var n=t.split(".");return{a:n[0],b:n[1],c:n[2],d:n[3],e:n[4]}}}(t.ele)||(window.g_SPM?window.g_SPM.getParam(t.ele):{}));var o="",r="x".concat(t.index);if(a.a&&a.b&&a.c&&a.d){var i=/^i/.test(a.d)?r:a.d;o="".concat(a.a,"_").concat(a.b,"_").concat(a.c,"_").concat(i);a.e&&(o+="_".concat(a.e))}else{o=r;n.pvid&&(o+=n.pvid)}if(!t.ignore_attr){o+="".concat(e.logkey,"_");o+="".concat(e.elementSelector,"_");o+=function(e,t){var n="";if(e&&t){var a=[e.getAttribute(t.filter)],o=t.props||[];if(o)for(var r=0;r<o.length;r++)a.push(e.getAttribute(o[r]));n=a.join("_")}return n}(t.ele,e)}return"".concat(r,"_").concat(wt.hash(o))}var Nn=function(e,t,n,a){n||(n="ADD");if(e&&"object"===l(t)){var o=U(a)||{},r=o._acHashMap||{},i=r[e]||[],s=function(){for(var e=0,n=i.length;e<n;){if((i[e]||{}).hash_value===t.hash_value)return e;e++}return-1}();if("ADD"===n&&-1===s){i.push(t);!function(e,t,n){var a=t.hash_value,o=U(n)||{};o.hash_value||(o.hash_value={});o.hash_value[e]||(o.hash_value[e]=vn.Map?new vn.Map:{});if(vn.Map){var r=o.hash_value[e].get(a);r?++r:r=1;o.hash_value[e].set(a,r)}else o.hash_value[e][a]?++o.hash_value[e][a]:o.hash_value[e][a]=1;j(n,o)}(e,t,a)}else"CLEAR"===n&&s>-1?i.splice(s,1):"UPDATE"===n&&(i=function(e,t){for(var n,a=0,o=e.length;a<o;){if((e[a]||{}).hash_value===t.hash_value){e[a]=t;n=!0;return e}a++}n||e.push(t);return e}(i,t));r[e]=i;o._acHashMap=r;j(a,o)}};function Rn(e,t,n){Nn(e,t,n,"_aplus_auto_exp")}function Mn(e,t,n){Nn(e,t,n,"_aplus_ac")}var xn=function(){return(new Date).getTime()};function Dn(e,t,n){var a,o,r,i,s=0;n||(n={});var c=function(){s=!1===n.leading?0:xn();a=null;i=e.apply(o,r);if(!a){o=null;r=null}},u=function(){var u=xn();s||!1!==n.leading||(s=u);var l=t-(u-s);o=this;r=arguments;if(l<=0||l>t){if(a){clearTimeout(a);a=null}s=u;i=e.apply(o,r);if(!a){o=null;r=null}}else a||!1===n.trailing||(a=setTimeout(c,l));return i};u.cancel=function(){clearTimeout(a);s=0;a=null;o=null;r=null};return u}function Ln(e){var t=U(e.aplusKey)||{},n=(t.hash_value||{})[e.logkey]||(vn.Map?new vn.Map:{});if((n&&n.get?n.get(e.hash_value):n[e.hash_value])>1)return!0;for(var a=(t._acHashMap||{})[e.logkey]||[],o=a.length,r=0;r<o;r++)if(a[r].hash_value===e.hash_value)return!0;return!1}function Un(e,t){try{var n=e?e.element:{},a=e.hash_value||"";n&&n.setAttribute&&n.setAttribute(t,a)}catch(e){}}var jn=window,Bn=["iframe","html","body","head"],Vn=en,Fn=function(e){var t=[],n=e?ft.tryToGet(e,Vn):"";if(n){var a=(U("_aplus_ac")||{})._acHashMap||{};m.eachMap(a,function(e,a){d.each(a,function(e){e.hash_value===n&&t.push(e.clkConfig)})})}return{clkConfigs:t,el:e}},Gn=function(e){var t=(e=e||jn.event).target||e.srcElement,n=L(x()),a=L(D()),o=function(e){var t=Fn(e);if(t&&t.clkConfigs&&t.clkConfigs.length>0)return t;for(;(e=e.parentNode)&&-1===d.indexOf(Bn,e.tagName?pt.getDomName(e,"tagName"):"html");)if((t=Fn(e))&&t.clkConfigs&&t.clkConfigs.length>0)return t}(t)||{},r=o.clkConfigs;o&&r&&o.el&&d.each(r,function(r){var i=r;t=o.el;!n.spm_ab||n.spm_ab.join(".");jn.g_SPM&&"function"==typeof jn.g_SPM.spm&&jn.g_SPM.spm(t);var s={is_auto:1},c={},u=An(i,t,c);u=Sn(i,t,c);u=Tn(i,t,c);u=m.assign(u,wn(t));i.customArgs&&(u=m.assign(u,i.customArgs));var f=function(){var e=rn("aplus-auto-clk-userfn");if(e){var t=window[e]||e;if("function"==typeof t)return t}return null}();if(f){var p=Cn(f,t,i.elementSelector,e);if("object"===l(p)){"object"===l(p.userdata)&&(u=m.assign(u,p.userdata));p.spm&&p.spm;p.scm&&p.scm}else if(!1===p)return}if((s=m.assign(s,u)).pagename){s.page_name=s.pagename;delete s.pagename}var d=i.method||ie.POST;a.push({action:"".concat(x(),".record"),arguments:[i.logkey,Z.CLK,s,d]})})};function Hn(){pt.isTouchEnabled()?gt.on(document,"tap",Gn):gt.on(document,"mousedown",Gn)}var Kn=window,Wn=document,qn=k.extend({eachElements:function(e,t){for(var n=t.logkey||"",a=L(x()),o=0;o<e.length;o++){var r=e[o];t._pos_id&&!r.getAttribute("data-aplus-pos-id")&&r.setAttribute("data-aplus-pos-id",t._pos_id);var i=r.getAttribute(en);if(!(i&&i.indexOf("_")>0)){if(isNaN(parseInt(i,10))){i=a._aplus_ac.elementSelectorSizeMap[t.elementSelector]++;r.setAttribute(en,i)}if(t.spmB&&t.spmC&&t.spmD){r.setAttribute(tn,[t.spmB,t.spmC,"".concat(t.spmD,"_").concat(o+1)].join("."));r.setAttribute(nn,"".concat(o+1))}var s=kn(t,{ignore_attr:!1,index:i,ele:r});if(!Ln({logkey:n,hash_value:s,aplusKey:"_aplus_ac"})){var c={clkConfig:t,hash_value:s,element:r,status:0,elementSelector:t.elementSelector};Mn(n,c,"ADD");Un(c,en)}}}},handler_dom_change:function(){for(var e=L(x()),t=this.autoClkConfig||[],n=0;n<t.length;n++){var a=t[n];e._aplus_ac.elementSelectorSizeMap[a.elementSelector]||(e._aplus_ac.elementSelectorSizeMap[a.elementSelector]=1);var o=yn(a,Wn);this.eachElements(o,a)}},throttle_handler_dom_change:Dn(function(){this.handler_dom_change()},200),init_observer:function(e,t){var n=L(x()),a=new e(function(){Xt(function(){++(n._aplus_ac||{}).observer_times;t()})});a.observe(Wn.body,{attributes:!0,childList:!0,characterData:!0,subtree:!0});bn&&C().w("aplus_ac init MutationObserver success!");this._observer=a},init_watch_dom:function(){var e=this,t=L(x())._aplus_ac||{};e._loop_observer=setTimeout(function(){if("blur"!==t.current_win_status){bn&&C().w("watch_dom in ac LOOP_TIME is ".concat(an,"ms total: ").concat(++t.watch_times));e.throttle_handler_dom_change();e.init_watch_dom()}else t.watch_dom_running=!1},an)},onFocusHandler:function(){var e=L(x())._aplus_ac||{};e.current_win_status="focus";e.watch_dom_running||this.init_watch_dom()},onBlurHandler:function(){(L(x())._aplus_ac||{}).current_win_status="blur"},onVisibilityChange:function(){"visible"===Wn.visibilityState?this.onFocusHandler():"hidden"===Wn.visibilityState&&this.onBlurHandler()},addAllListener:function(){var e=this,t=L(x())._aplus_ac||{};t.watch_times=0;t.watch_dom_running=!0;e.init_watch_dom();if(Kn.WindVane&&Wn.addEventListener){gt.on(Wn,"WV.Event.APP.Active",e.onFocusHandler,!1);gt.on(Wn,"WV.Event.APP.Background",e.onBlurHandler,!1)}if("hidden"in Wn)gt.on(Kn,"visibilitychange",e.onVisibilityChange);else{gt.on(Kn,"blur",e.onBlurHandler);gt.on(Kn,"focus",e.onFocusHandler)}},removeAllListener:function(){var e=this;if(Kn.WindVane&&Wn.removeEventListener){gt.un(Wn,"WV.Event.APP.Active",e.onFocusHandler,!1);gt.un(Wn,"WV.Event.APP.Background",e.onBlurHandler,!1)}if("hidden"in Wn)gt.un(Kn,"visibilitychange",e.onVisibilityChange);else{gt.un(Kn,"blur",e.onBlurHandler);gt.un(Kn,"focus",e.onFocusHandler)}},init:function(){var e=this,t=L(x())._aplus_ac||{};e.throttle_handler_dom_change();var n=Kn.MutationObserver||Kn.WebKitMutationObserver||Kn.MozMutationObserver;if(n){t.observer_times=0;e.init_observer(n,function(){e.throttle_handler_dom_change()})}else e.addAllListener()},clearDom:function(e,t){var n=this.autoClkConfig||[];if(t&&"appendMetaInfo"!==t.from)for(var a=0;a<n.length;a++)try{for(var o=n[a].elementSelector,r=Wn.querySelectorAll(o),i=0;i<r.length;i++)r[i].setAttribute(en,"")}catch(e){}this.autoClkConfig=e&&e.autoClkConfig},clear:function(e){if(!e||"appendMetaInfo"!==e.from){var t=L(x()),n=t._aplus_ac||{};n._acHashMap&&(n._acHashMap={});n.hash_value&&(n.hash_value={});t._aplus_ac=n;if(this._loop_observer){clearTimeout(this._loop_observer);this._loop_observer=null}this._observer?this._observer.disconnect():this.removeAllListener()}},reset:function(e,t){this.clearDom(e,t);this.init()}});function zn(e){var t,n=L(x()),a=!1;setTimeout(function(){a||C().w("sdk_ac_init failed! please check whether aplusJs is loaded correctly!")},5e3);L(D()).push({action:Z.SUBSCRIBE,arguments:[Z.SDK_READY,function(e){"complete"===e&&function(){if(!a){Xt(function(){var e;if((t=_n())&&t.length>0){(e=qn.create({autoClkConfig:t})).init();Hn()}n[Z.SDK_PUB].subscribe("setMetaInfo",function(n,a,o){if("aplus-auto-clk"===n){var r=_n(a);if(JSON.stringify(r)===JSON.stringify(t))return;t=r;o||(o={from:"setMetaInfo"});e&&e.clear(o);e&&e.clearDom({autoClkConfig:t},o);if(a)if(e)e.reset({autoClkConfig:t},o);else{(e=qn.create({autoClkConfig:t})).init();Hn()}}})});a=!0}}()}]});"function"==typeof e&&e()}var Yn=function(){return a(function e(n){t(this,e);this.options=n},[{key:"run",value:function(){!function(){var e=L(x());if(e._aplus_ac);else{e._aplus_ac={status:"init",elementSelectorSizeMap:{}};zn(function(){e._aplus_ac.status="complete"})}}()}}])}(),$n=bt(Object.freeze({__proto__:null,default:Yn})),Qn=document,Jn=function(e,t){return t.x>=e.pLeftTop[0]&&t.x<=e.pRightBottom[0]&&t.y>=e.pLeftTop[1]&&t.y<=e.pRightBottom[1]},Xn=function(e,t){var n=0,a=Jn(e,t),o=Jn(e,{x:t.x+t.width,y:t.y}),r=Jn(e,{x:t.x,y:t.y+t.height}),i=Jn(e,{x:t.x+t.width,y:t.y+t.height});return(n=function(){var e=0;a&&i&&(e=t.size/t.size);return e}())>0||(n=function(){var n=0,s=0;if(a&&o&&!r&&!i){n=t.width;s=e.pLeftBottom[1]-t.y}else if(!a&&o&&!r&&i){n=e.pLeftTop[0]-t.x;s=t.y}else if(!a&&!o&&r&&i){n=t.width;s=t.height-Math.abs(e.pLeftTop[1]-t.y)}else if(a&&!o&&r&&!i){n=e.pRightTop[0]-t.x;s=t.height}return t.size>0?Math.abs(n*s)/t.size:0}())>0?n:n=function(){var n=0,s=0;if(!a||o||r||i)if(a||!o||r||i)if(a||o||!r||i){if(!a&&!o&&!r&&i){n=e.pLeftTop[0]-t.x;s=e.pLeftTop[1]-t.y}}else{n=e.pRightTop[0]-t.x;s=e.pRightTop[1]-t.y}else{n=e.pLeftBottom[0]-t.x;s=e.pLeftBottom[1]-t.y}else{n=e.pRightBottom[0]-t.x;s=e.pRightBottom[1]-t.y}return t.size>0?Math.abs(n*s)/t.size:0}()};function Zn(e,t,n){var a=0;if(e)for(var o=0;o<e.length;o++)if((a=Xn(e[o],t))<n)return!1;return a}var ea=function(e){return"number"==typeof e&&!isNaN(e)};function ta(e){var t={};if(e){"function"==typeof e.getBoundingClientRect&&(t=e.getBoundingClientRect()||{});ea(t.x)||ea(t.left)&&(t.x=t.left);ea(t.y)||ea(t.top)&&(t.y=t.top);ea(t.width)||(t.width=e.offsetWidth);ea(t.height)||(t.height=e.offsetHeight)}return t}function na(e){var t=[];if(e&&"function"==typeof document.querySelector){var n=document.querySelector(e);if(n){var a=ta(n)||{};ea(a.x)&&ea(a.y)&&ea(a.width)&&ea(a.height)&&t.push({pLeftTop:[a.x,a.y],pRightTop:[a.x+a.width,a.y],pLeftBottom:[a.x,a.y+a.height],pRightBottom:[a.x+a.width,a.y+a.height]})}}var o=Qn.documentElement,r=Qn.body,i=o.clientWidth||r.offsetWidth||0,s=o.clientHeight||r.offsetHeight||0;t.push({pLeftTop:[0,0],pRightTop:[i,0],pLeftBottom:[0,s],pRightBottom:[i,s]});return t}function aa(e,t,n){var a;try{if(e&&e.getAttribute){var o=e.getAttribute(n)||"";a=t?o===t:!!o}}catch(e){}return a}function oa(e,t,n){var a=0;if(e)for(var o=0;o<e.length;o++)if((a=t/e[o].size)>=n)return a;return a}var ra,ia=cn,sa=ln,ca=function(e){for(var t;e&&"HTML"!==e.tagName&&"none"!==(t=e.style.display);)e=e.parentNode;return"none"===t};function ua(e,t){var n=0;ra=na();var a=(U("_aplus_auto_exp")||{})._acHashMap||{};for(var o in a)if(Object.prototype.hasOwnProperty.call(a,o))for(var r=a[o]||[],i=0;i<r.length;i++){var s=r[i]||{};if(0===s.status&&s.expConfig&&!ca(s.element)){var c=ta(s.element);if(c.width&&c.height){s.x=c.x;s.y=c.y;s.eventType=t;s.width=c.width;s.height=c.height;s.size=c.width*c.height;var u=void 0;s.expConfig.positionSelector&&(u=na(s.expConfig.positionSelector));var l=Zn(u||ra,s,ia),f=l>=ia,p=l;u&&(p=Zn(ra,s,ia));var d=s.width*s.height*p,g=oa(ra,d,sa),h=aa(s.element,s.hash_value,"_aplus_auto_exp");if((f||g>=sa)&&!h){s.exposureTime=e;s.status=1;var _=gn();_&&(s.userParams=Cn(_,s.element,s.elementSelector,s.expConfig));if(!fn){s.viewabilityRate=f?l:g;s.viewability=f?"intersection":"fillwindow";s.status=2}Rn(o,s,"UPDATE");++n}}}}return n}function la(e,t){var n=0;ra||(ra=na());var a=(U("_aplus_auto_exp")||{})._acHashMap||{};for(var o in a)if(Object.prototype.hasOwnProperty.call(a,o))for(var r=a[o]||[],i=0;i<r.length;i++){var s=r[i]||{};if(1===s.status&&s.exposureTime===e&&s.expConfig){s.eventType=t;s.expConfig.positionSelector&&(ra=na(s.expConfig.positionSelector));var c=Zn(ra,s,ia),u=aa(s.element,s.hash_value,"_aplus_auto_exp");if(c&&!u){s.viewabilityRate=c;s.status=2;Rn(o,s,"UPDATE");++n}else{s.status=0;s.exposureTime="";Rn(o,s,"UPDATE")}}}return n}var fa=function(e){var t="APLUS_AE_EXPOSURE_CHANGE",n=e&&e.type?e.type:"init",a=(new Date).getTime(),o=L(x()),r="".concat(x(),"_pubsub"),i=ua(a,n);i>0&&(fn?setTimeout(function(){(i=la(a,n))>0&&o[r].publish(t,{size:i,eventType:n})},fn):o[r].publish(t,{size:i,eventType:n}))},pa=Dn(function(e){fa(e)},100),da={},ga=function(e,t){if(e&&e.forEach&&Object.keys&&document.querySelector){e.forEach(function(e){e.positionSelector&&document.querySelector(e.positionSelector)&&(da[e.positionSelector]=!0)});Object.keys(da).forEach(function(e){gt[t]&&gt[t](document.querySelector(e),"scroll",function(e){pa(e)})})}},ha=Object.freeze({__proto__:null,clear:function(e){gt.un(window,"touchmove",pa);gt.un(window,"scroll",pa);gt.un(window,"resize",fa);ga(e,"un")},watch_exposure_change:function(e){L(x())["".concat(x(),"_pubsub")].subscribe("APLUS_AE_DOM_CHANGE",fa);gt.on(window,"touchmove",pa);gt.on(window,"scroll",pa);gt.on(window,"resize",fa);ga(e,"on")}}),_a=cn,ma=ln,va=window.IntersectionObserver,ya={};function ba(e,t){var n="APLUS_AE_EXPOSURE_CHANGE",a=e&&e.type?e.type:"IObserver",o=(new Date).getTime(),r=L(x()),i="".concat(x(),"_pubsub"),s=0;s=t?ua(o,e):function(e,t,n){var a=na(),o=0,r=(U("_aplus_auto_exp")||{})._acHashMap||{};for(var i in r)if(Object.prototype.hasOwnProperty.call(r,i))for(var s=r[i]||[],c=0;c<s.length;c++){var u=s[c]||{};u.eventType="IObserver";var l=!!n||u.element===t.target;if(0===u.status&&u.expConfig&&l){var f=t.boundingClientRect||{};f.width||f.height||(f=t.target.getBoundingClientRect()||{});if(f.width&&f.height){(u=m.assign(u,f)).x=f.x||f.left;u.y=f.y||f.top;u.width=f.width;u.height=f.height;u.size=f.width*f.height;var p=aa(u.element,u.hash_value,"_aplus_auto_exp"),d=oa(a,u.width*u.height*t.intersectionRatio,ma);if(!p){var g=t.intersectionRatio>=_a;if(g||d>=ma){u.exposureTime=e;u.status=1;var h=gn();h&&(u.userParams=Cn(h,u.element,u.elementSelector));u.viewabilityRate=g?t.intersectionRatio:d;u.viewability=g?"intersection":"fillwindow";fn||(u.status=2);Rn(i,u,"UPDATE");++o}else d&&Rn(i,m.assign(s[c],{lastEventType:u.eventType}),"UPDATE")}}}}return o}(o,e);s>0&&(fn?setTimeout(function(){(s=la(o,a))>0&&r[i].publish(n,{size:s,eventType:a})},fn):r[i].publish(n,{size:s,eventType:a}))}function Aa(e){var t={root:null,rootMargin:"0px",threshold:_a};return new va(function(e){d.each(e,function(e){e.intersectionRatio>0&&ba(e)})},m.assign(t,e))}function Sa(e){if(va){ya.io_base||(ya.io_base=Aa());var t=(U("_aplus_auto_exp")||{})._acHashMap||{};for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n))for(var a=t[n]||[],o=0;o<a.length;o++){var r=a[o]||{};if(!r.inObserver){var i="io_v_".concat(encodeURIComponent(r.positionSelector)),s=void 0;if(r.positionSelector&&!ya[i]){s=Aa({root:document.querySelector(r.positionSelector),expConfig:e});ya[i]=s}s?s.observe(r.element):ya.io_base.observe(r.element);r.inObserver=!0}}}return!0}var Ea=Object.freeze({__proto__:null,clear:function(e,t){if(t&&"appendMetaInfo"!==t.from)for(var n in ya)ya[n].disconnect()},watch_exposure_change:function(e){L(x())["".concat(x(),"_pubsub")].subscribe("APLUS_AE_DOM_CHANGE",function(){Sa(e)});Sa(e)}});function wa(e,t,n){var a="0";if(n){if("spmc"===e){var o=n.split(".");a=o[2]?o[2]:o[3];/^(\i|\d)[0-9]+$/.test(a)&&(a="0");n=[o[0],o[1],a].join(".")}}else{n="";var r=window.g_SPM||{};if("function"==typeof r.getParam){var i=r.getParam(t);if("spmc"===e){a=t.getAttribute("data-spm")||"0";n=[i.a,i.b,a].join(".")}else n=[i.a,i.b,i.c,i.d].join(".")}}return n}var Ta,Pa,Oa=function(e){var t=L(x()),n="".concat(x(),"_pubsub"),a=(U("_aplus_auto_exp")||{})._acHashMap||{},o=[];m.eachMap(a,function(a,r){for(var i=function(e){for(var t=[],n=function(){var n=e[a]||{},o={};m.eachMap(n,function(e,t){"element"!==e&&(o[e]=t)});var r=m.cloneDeep(o);r.element=n.element;t.push(r)},a=0,o=e.length;a<o;a++)n();return t}(r)||[],s=0,c=i.length;s<c;s++){var u=i[s]||{},l=r[s]||{};if(3===u.status)try{Un(l,Zt);t[n].publish("APLUS_ELEMENT_EXPOSURE",{logkey:a,v_origin:l,options:e});o.push(l)}catch(e){C().w(e&&e.message)}}for(;o.length>0;)Rn(a,o.pop(),"CLEAR")})},Ia=[],Ca=function(e){if(e.size>0){Ta||function(){var e=L(D());Ta=setInterval(function(){if(Ia.length>0)e.push(Ia.pop());else{clearInterval(Ta);Ta=null}},200)}();!function(e,t,n){var a=e.logkeyContainer||[],o=e.request_cfg||{},r=L(D());Xt(function(){m.eachMap(a,function(e,a){if(a&&a.length>0){for(var i=0;i<a.length;){var s={_eventType:t.eventType,_method:o.method,is_auto:1},c=a[i];for(var u in c)s[u]=c[u];if(s.pagename){s.page_name=s.pagename;delete s.pagename}var l=o.method||ie.POST;r.push({action:"".concat(x(),".record"),arguments:[e,Z.EXP,s,l]});i+=1}n(t)}})})}(function(){var e={},t=on(),n=L(x()),a=U("_aplus_auto_exp")||{},o=a._acHashMap||{};m.eachMap(o,function(o,r){for(var i=r||[],s=0,c=i.length;s<c;s++){var u=i[s]||{};if(2===u.status){u.status=3;Rn(o,u,"UPDATE");a.exp_times++;var f=u.expConfig||{},p=(n.spm_ab&&n.spm_ab.join("."),void wa(f.eltype,u.element));try{p=Number(u.viewabilityRate).toFixed(2)}catch(e){p=u.viewabilityRate}var d={_w:u.width,_h:u.height,_x:u.x,_y:u.y,_rate:p,_viewability:u.viewability};if("object"===l(u.userParams)){"object"===l(u.userParams.userdata)&&(d=m.assign(d,u.userParams.userdata));u.userParams.spm&&wa(f.eltype,"",u.userParams.spm);u.userParams.scm&&u.userParams.scm}(Pn(f.method)||On(f.pkgSize))&&(t=In(f));var g,h=An(f,u.element,d);h=Sn(f,u.element,d);h=m.assign(h,wn(u.element));var _=Tn(f,u.element,d);h=m.assign(h,_);f.customArgs&&(h=m.assign(h,f.customArgs));g=h;e[o]||(e[o]=[]);e[o].push(g)}}});return{logkeyContainer:e,request_cfg:t}}()||{},e,Oa)}};function ka(){L(x())["".concat(x(),"_pubsub")].subscribe("APLUS_AE_EXPOSURE_CHANGE",Ca);!function(){if(!Pa){Pa=!0;var e=L(x()),t=L(D());e.on(window,"beforeunload",function(){clearInterval(Ta);for(var e=0;e<Ia.length;e++)t.push(Ia[e])})}}()}var Na,Ra,Ma=window,xa=document,Da=k.extend({eachElements:function(e,t){for(var n=L(x()),a=t.logkey||"",o=0;o<e.length;o++){var r=e[o],i=r.getAttribute(Zt);if(!(i&&i.indexOf("_")>0)){if(isNaN(parseInt(i,10))){i=n._aplus_auto_exp.elementSelectorSizeMap[t.elementSelector]++;r.setAttribute(Zt,i)}if(t.spmB&&t.spmC&&t.spmD){r.setAttribute(tn,[t.spmB,t.spmC,"".concat(t.spmD,"_").concat(o+1)].join("."));r.setAttribute(nn,"".concat(o+1))}var s=kn(t,{ignore_attr:!1,index:i,ele:r}),c=aa(r,s,Zt),u=Ln({logkey:a,hash_value:s,aplusKey:"_aplus_auto_exp"});c||u||Rn(a,{expConfig:t,hash_value:s,element:r,status:0,elementSelector:t.elementSelector},"ADD")}}},handler_dom_change:function(e,t){try{var n=this;setTimeout(function(){for(var e=L(x()),a="".concat(x(),"_pubsub"),o=n.autoExpConfig||[],r=0;r<o.length;r++){var i=o[r],s=yn(i,xa);e._aplus_auto_exp.elementSelectorSizeMap[i.elementSelector]||(e._aplus_auto_exp.elementSelectorSizeMap[i.elementSelector]=1);n.eachElements(s,i)}e[a].publish("APLUS_AE_DOM_CHANGE",t||{})},200)}catch(e){C().w(e&&e.message)}},throttle_handler_dom_change:Dn(function(e,t){this.handler_dom_change(e,t)},200),init_watch_dom:function(){var e=this,t=L(x())._aplus_auto_exp||{};e._loop_observer=setTimeout(function(){if("blur"!==t.current_win_status){C().w("watch_dom in ae LOOP_TIME is ".concat(an,"ms total: ").concat(++t.watch_times));e.handler_dom_change(null,{type:"polling"});e.init_watch_dom()}else t.watch_dom_running=!1},an)},onFocusHandler:function(){var e=L(x())._aplus_auto_exp||{};e.current_win_status="focus";e.watch_dom_running||this.init_watch_dom()},onBlurHandler:function(){(L(x())._aplus_auto_exp||{}).current_win_status="blur"},onVisibilityChange:function(){"visible"===xa.visibilityState?this.onFocusHandler():"hidden"===xa.visibilityState&&this.onBlurHandler()},addAllListener:function(){var e=this,t=L(x())._aplus_auto_exp||{};t.watch_times=0;t.watch_dom_running=!0;e.init_watch_dom();if(Ma.WindVane&&xa.addEventListener){gt.on(xa,"WV.Event.APP.Active",e.onFocusHandler);gt.on(xa,"WV.Event.APP.Background",e.onBlurHandler)}if("hidden"in xa)gt.on(Ma,"visibilitychange",e.onVisibilityChange);else{gt.on(Ma,"blur",e.onBlurHandler);gt.on(Ma,"focus",e.onFocusHandler)}},removeAllListener:function(){var e=this;if(Ma.WindVane&&xa.removeEventListener){gt.un(xa,"WV.Event.APP.Active",e.onFocusHandler,!1);gt.un(xa,"WV.Event.APP.Background",e.onBlurHandler,!1)}if("hidden"in xa)gt.un(Ma,"visibilitychange",e.onVisibilityChange);else{gt.un(Ma,"blur",e.onBlurHandler);gt.un(Ma,"focus",e.onFocusHandler)}},init_observer:function(e,t){var n=["IFRAME","BODY","OBJECT","SCRIPT","NOSCRIPT","LINK","STYLE","#comment"],a=["class","style"],o=function(e){return"characterData"===e.type||"attributes"===e.type&&a.indexOf(e.attributeName)>-1?[e.target]:"childList"!==e.type?[]:void 0},r=function(e,a){if(e&&e.length>0)for(var o=L(x()),r=function(){var r=e[i]||{},s=r.nodeName,c=o._aplus_auto_exp.tags||{};c[s]||(c[s]=0);c[s]++;o._aplus_auto_exp.tags=c;-1===n.indexOf(s)&&Xt(function(){++(o._aplus_auto_exp||{}).observer_times;var e=a.attributeName;t(r,{type:a.type+(e?"_".concat(e):"")})})},i=0;i<e.length;i++)r()};this._observer||(this._observer=new e(function(e){if(e&&e.length>0)for(var t=0;t<e.length;t++){var n=e[t]||{},a=pt.nodelistToArray(n.addedNodes||[]);a=pt.nodelistToArray(o(n));r(a,n)}}));this._observer.observe(xa.body,{attributes:!0,childList:!0,characterData:!0,subtree:!0});bn&&C().w("aplus_auto_exp init MutationObserver success!")},init:function(e){var t=this,n=L(x())._aplus_auto_exp||{};e&&"reset"!==e.type&&!n.hash_value&&(n.hash_value={});t.handler_dom_change(null,{type:"aplus_init"});var a=Ma.MutationObserver||Ma.WebKitMutationObserver||Ma.MozMutationObserver;if(a){n.observer_times=0;t.init_observer(a,function(e,n){var a=e&&e.parentElement?e.parentElement:e;t.throttle_handler_dom_change(a,n)})}else t.addAllListener()},clear:function(e){if(!e||"appendMetaInfo"!==e.from){var t=L(x()),n=t._aplus_auto_exp||{};n._acHashMap&&(n._acHashMap={});n.hash_value&&(n.hash_value={});t._aplus_auto_exp=n;if(this._loop_observer){clearTimeout(this._loop_observer);this._loop_observer=null}if(this._observer){this._observer.takeRecords();this._observer.disconnect()}else this.removeAllListener()}},clearDom:function(e,t){var n=this.autoExpConfig||[];if(t&&"appendMetaInfo"!==t.from)for(var a=0;a<n.length;a++)try{for(var o=n[a].elementSelector,r=xa.querySelectorAll(o),i=0;i<r.length;i++)r[i].setAttribute(Zt,"")}catch(e){}this.autoExpConfig=e&&e.autoExpConfig?e.autoExpConfig:[]},reset:function(e,t){this.clearDom(e,t);this.init({type:"reset"})}});function La(e,t){ka();Na.watch_exposure_change(e);var n={isThrottleWatch:hn(),autoExpConfig:e};Ra?Ra.reset(n,t):(Ra=Da.create(n)).init({type:"init"})}function Ua(e,t){L(x())["".concat(x(),"_pubsub")].unsubscribe("APLUS_AE_EXPOSURE_CHANGE",Ca);Na.clear(e,t);Ra&&Ra.clear(t)}function ja(e){var t,n=L(x()),a="".concat(x(),"_pubsub"),o=!1,r=!1;setTimeout(function(){o||C().w("aplus_auto_exp_init failed! please check whether aplusJs is loaded correctly!")},5e3);L(D()).push({action:Z.SUBSCRIBE,arguments:[Z.SDK_READY,function(e){"complete"===e&&function(e){if(!r){r=e;if(!o){Xt(function(){(t=dn()||[])&&t.length>0&&La(t);n[a].subscribe("setMetaInfo",function(e,n,a){if("aplus-auto-exp"===e){var o=dn(n);if(JSON.stringify(o)===JSON.stringify(t))return;a||(a={from:"setMetaInfo"});Ua(t=o,a);n&&t&&t.length>0&&La(t,a)}})});o=!0}}}(Z.SDK_READY)}]});"function"==typeof e&&e()}function Ba(){var e=L(x()),t=L(D());if(!e._aplus_auto_exp){e._aplus_auto_exp={tags:{},status:"init",exp_times:0,elementSelectorSizeMap:{}};Na=window.IntersectionObserver?Ea:ha;ja(function(){e._aplus_auto_exp.status="complete"});t.push({action:Z.SUBSCRIBE,arguments:[Z.SDK_READY,function(t){if("complete"===t)try{e.getMetaInfo(ae.APLUS_EXPOSURE_EVENT_CAN_REPEAT)&&H("APLUS_AE_PAGE_CHANGE",function(){var e=dn()||[];Ua(e,{from:"routeChange"});La(e,{from:"routerChange"})})}catch(e){}}]})}}var Va=function(){return a(function e(n){t(this,e);this.options=n},[{key:"run",value:function(){Ba()}}])}(),Fa=bt(Object.freeze({__proto__:null,default:Va})),Ga=k.extend({subscribeLogs:function(e,t){ye.pushIntoGoldlogQueue(Z.SUBSCRIBE,[e,function(e){e.status===Z.COMPLETE&&t(e)}])},getLogicSymbol:function(){return"ALI"===this.format?"&":"||"},handlerMiddleware:function(){},watchLOG:function(){var e=this;e.subscribeLogs(Z.MW_CHANGE_PV,function(t){e.handlerMiddleware(t,"pv")});e.subscribeLogs(Z.MW_CHANGE_HJLJ,function(t){e.handlerMiddleware(t,x())})},run:function(){this.watchLOG()}});function Ha(e,t){if("string"!=typeof e||!e){C().w("event logkey is invalid, id =",e||"'' event properties = ",y.stringfy(t.cusp));return null}var n=Object.create(null),a=Date.now();n.id=e;t&&t.ts||(n.ts=a);t&&t.uuid||(n.uuid=wt.getUUID());if("object"===l(t))for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(n[o]=t[o]);return n}function Ka(e,t){var n=L(x()).getMetaInfo("pageConfig")||{},a=e;n.hashMode&&(a=t);try{if(n&&"object"===l(n))for(var o in n){if(o===a)break;if(n[o]&&n[o].regRule&&n[o].regRule.test(a)){a=o;break}}}catch(e){C().w("parse pageConfig err =",e)}return n[a]||{}}function Wa(e,t){try{var n=t||{},a=L(x()),o=Ka(e,vt.retrenchHash(location.hash)).pageName,r=a.getMetaInfo&&(a.getMetaInfo("qt-pagename")||a.getMetaInfo("aplus-pagename"))||"",i=a.getMetaInfo&&(a.getMetaInfo("qt-dynamicpage")||a.getMetaInfo("aplus-dynamicpage")),s=location.href;i&&b(i)&&O.isString(i())&&(s=i());var c=location.href.split("?")[0],u=c;if(s.split("?").length>1){var l=s.split("?")[1],f=l.indexOf("/"),p=l.indexOf("#/"),d=-1;p>-1&&f>-1?p<f?d=p:p>f&&(d=f):f>-1?d=f+1:p>-1&&(d=p);if(d>-1){var g=l.substring(d),h=g.indexOf("?");h>-1&&(g=g.substring(0,h));u=O.isEndWith(c,"/")&&O.isStartWith(g,"/")?c+g.substring(1):O.isEndWith(c,"/")||O.isStartWith(g,"/")?c+g:"".concat(c,"/").concat(g)}}return n.spmB||n.page_name||document&&document.body&&document.body.dataset&&document.body.dataset.pagename||r||o||u||""}catch(e){C().w("get pagename failed e =",e)}}function qa(e,t){var n,a=t||{},o=Ka(e,vt.retrenchHash(location.hash)),r=m.assign({},o),i=(r=m.assign(r,a)).extData;b(i)?n=i():i&&(n=Object.keys(i).reduce(function(e,t){e[t]=b(i[t])?i[t]():i[t];return e},{}));return n||{}}function za(e,t){var n=t||{},a=Ka(e,vt.retrenchHash(location.hash));return n.page_title||a.pageTitle||document.title||""}function Ya(e){if(!e)return{};try{var t=document.createElement("a");t.href=e;var n=Ka(t.pathname,vt.retrenchHash(t.hash)).pageName,a=t.origin+t.pathname+(t.hash||"");return{page_name:n||a||"",host:t.origin}}catch(e){return""}}var $a={sessions:"sn",ekvs:"e",active_user:"active_user"},Qa={uuid:"ud",unionid:"und",openid:"od",anonymousid:"nd",alipay_id:"ad",device_id:"dd",userid:"puid"},Ja={sdk_type:"sdt",device_model:"dm",language:"lang",device_type:"dt",os_version:"ov",appkey:"ak",sdk_version:"sv",resolution:"rl",testToken:"ttn",pixel_ratio:"pr",_id:"id",id_type:"it",id_tracking:"itr",imprint:"imp",debugId:"dk",access:"ac",access_subtype:"acs",device_manufacturer:"dmf",device_name:"dn",platform_version:"pv",font_size_setting:"fss",device_manuid:"did",platform_sdk_version:"psv",device_brand:"db"};function Xa(e,t){var n={};for(var a in e)t[a]?n[t[a]]=e[a]:n[a]=e[a];return n}function Za(e,t){var n=Xa(e,t);e&&e.id_tracking&&(n[t.id_tracking||"id_tracking"]=Xa(e.id_tracking,Qa));return n}function eo(e,t){var n={};if(e)for(var a in e)e[a]&&(n[t[a]]=e[a]);return n}function to(){var e=L(x()),t=[];e.qt_abtest&&e.qt_abtest.localExpVariables&&m.eachMap(e.qt_abtest.localExpVariables,function(e,n){!m.isEmptyObject(n)&&Object.keys(n).indexOf("experiment_group_id")>-1&&Object.keys(n).indexOf("experiment_id")>-1&&n.experiment_group_id&&n.experiment_id&&!function(e,t,n){for(var a=0;a<e.length;a++)if(e[a].gid===t&&e[a].expid===n)return!0;return!1}(t,n.experiment_group_id,n.experiment_id)&&t.push({gid:n.experiment_group_id,expid:n.experiment_id})});return t}var no=["$sid"];function ao(e,t){var n=L(x()),a=n.deviceInfo||{};n.appendMetaInfo(ae.GLOBAL_PROPERTY,function(){var e={},t=_t.getQueryFromUrl()||{};try{m.eachMap(t,function(t,n){0===t.indexOf("utm_")&&(e[t]="".concat(n))});var n=L(x()),a=n.getMetaInfo&&n.getMetaInfo(ae.APLUS_UTM_EXPIRE_DAYS);(!a||"number"!=typeof a||a<=0)&&(a="session");var o=dt.getCookie(ae.APLUS_LATEAST_UTM),r=I.query2obj(decodeURIComponent(o));m.isEmptyObject(e)?e=r||{}:o&&y.stringfy(e)===y.stringfy(r)||dt.setCookie(ae.APLUS_LATEAST_UTM,I.obj2queryStr(e),{expires:a});if(t.$sid){e[ae.REF_SHARE_ID]=t.$sid;t.$sid;var i=s(t,no);location?location.hash?location.href.indexOf(location.search)<location.href.indexOf(location.hash)?e[ae.REF_SHARE_URL]="".concat(location.origin).concat(location.pathname).concat(I.obj2queryStr(i),"/").concat(vt.retrenchHash(location.hash)):e[ae.REF_SHARE_URL]="".concat(location.origin).concat(location.pathname).concat(vt.retrenchHash(location.hash),"?").concat(I.obj2queryStr(i)):e[ae.REF_SHARE_URL]="".concat(location.origin).concat(location.pathname,"?").concat(I.obj2queryStr(i)):C().w("current webview not support location api, UA = ",navigator.userAgent)}}catch(e){C().w("handle queryStr failed",e)}return e}());if(!e||!t||m.isEmptyObject(e)||m.isEmptyObject(t))return{};var o={},r=m.cloneDeep(function(e){var t={};t.sdk_type=e.sdk_type;t.appkey=e.appkey;t.sdk_version=e.sdk_version;t.device_type=e.device_type;t.os=e.os;t.os_version=e.os_version;t.platform=e.platform;t.pixel_ratio=e.pixel_ratio;t.resolution=e.resolution;t.language=e.language;t.app_version=e.app_version;t.jsver=e.jsver;t.pre=e.pre;t.url=e.url;t.debugId=e.track_debug_id;t.id_tracking={};t.timezone=wt.getTimeZone();return t}(e)),i=n.getMetaInfo(Z._ANONY_ID)||e.cna||dt.getCna()||ht.get("cna");i&&(r.id_tracking.anony_id=i);r.id_tracking._abfpc=a._abfpc||ht.getLocalStorageFP()||dt.getCookieFP();var c=n.getMetaInfo("_dev_id")||e.cna;c&&(r.id_tracking.dev_id=c);var u=n.getMetaInfo("openid");u&&(r.id_tracking.openid=u);var f=null;f=e.event_code===Z.PV_CODE?function(e,t){var n=L(x()).getMetaInfo(ae.GLOBAL_PROPERTY),a={};a.r=e.arg1;a.gp=n;a.is_auto=e.is_auto?1:0;a.track_type=e.track_type||"0";if(t._vt){a._vt=t._vt;delete t.track_type;delete t._vt}var o=t,r=m.cloneDeep(m.deleteKeys(m.cloneDeep(o),["_anony_id","_dev_id","_session_id","_user_id","_user_nick","_src_pos_id","cna","_abfpc","aplus_track_debug_id"]));if(r.duration){a.duration=r.duration;delete r.duration}r=m.assign(r,qa(location.pathname,r));if(e.url){a.page_name=Wa(location.pathname,r);a.page_title=za(location.pathname,r);a.url=e.url;a["spm-cnt"]=encodeURIComponent(a.page_name)}var i=_t.getAParamFromUrl("scene",location.href);i&&(a.scene=i);if(e.pre){a.ref_url="-"!==e.pre?e.pre:"";var s=Ya(a.ref_url);a.ref_page_name=s.page_name||"";a.ref_host=s.host||""}a.rank=wt.RankUtils.rank();to().length>0&&(a.ab=to());var c={};if(r.transp){c.transp=m.cloneDeep(r.transp);delete r.transp}c.cusp=r;return Ha(ae.PAGE_START,m.assign(a,c))}(e,t):function(e,t){var n=L(x());try{var a={},o=n.getMetaInfo(ae.GLOBAL_PROPERTY);a.gp=o;var r,i=t.gokey;if((r="string"==typeof i?wt.arr2obj(wt.param2arr(i)):"object"===l(i)?m.cloneDeep(i):{}).targetAppKey){a.targetAppKey=r.targetAppKey;delete r.targetAppKey}if(r._vt){a.track_type="2";a._vt=r._vt;a.is_auto=1;delete r.track_type;delete r._vt}else if(r.is_auto||-1!==[ae.PAGE_LEAVE,ae.PAGE_STAY].indexOf(t.logkey)){a.is_auto=1;a.track_type="1";delete r.is_auto}else{a.is_auto=0;a.track_type="0"}if(a.is_auto){delete r["aplus-ae"];delete r["aplus-clk"];delete r.auto_element;e.event_code&&(a.event_type_id=e.event_code)}if(r.ap){a.ap=r.ap;delete r.ap}if(e.url){a.page_name=Wa(location.pathname,r);a.page_title=za(location.pathname,r);a.url=e.url||"-";if(a.page_name&&r.spmC){a["spm-cnt"]=[encodeURIComponent(a.page_name),encodeURIComponent(r.spmC),encodeURIComponent(r.spmD)].filter(function(e){return!!e}).join(".");delete r.spmC;delete r.spmD;delete r.spmB}}if(e.pre){a.ref_url="-"!==e.pre?e.pre:"";var s=Ya(a.ref_url);a.ref_page_name=s.page_name||"";a.ref_host=s.host||""}var c=m.cloneDeep(r);for(var u in c)"string"==typeof u&&O.isStartWith(u,"_")&&(a[u]=c[u]);to().length>0&&(a.ab=to());a.rank=wt.RankUtils.rank();if(t.logkey===ae.PAGE_LEAVE){a.amount=a.rank;a.duration=Date.now()-n[ae.START_TIME]}else if(t.logkey===ae.PAGE_STAY){a.duration=r.duration;delete r.duration}var f=_t.getAParamFromUrl("scene",location.href);f&&(a.scene=f);var p={cusp:r};return Ha(t.logkey,m.assign(a,p))}catch(e){C().w("JSON parse failed",e);return{}}}(e,t);if(f){o={analytics:{ekvs:{sessionid:[m.cloneDeep(f)]}}};var p=n.getMetaInfo(Z._USER_ID);p&&o.analytics&&(o.analytics.active_user={puid:p});o.header=m.assign(r,{ts:Date.now(),traceId:O.getRandomStr(10)+Date.now()+O.getRandomStr(9)});try{var d=n.start_id||"";if(d)o.header.start_id=d;else{d=wt.getStartId();n.start_id=d;o.header.start_id=d}}catch(e){}var g=function(e){return{h:Za(e.header,Ja),a:eo(e.analytics,$a)}}(o);C().i("event data: ",g);return g}}var oo,ro="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",io=function(e){for(var t={},n=0,a=e.length;n<a;n++)t[e.charAt(n)]=n;return t}(ro),so=String.fromCharCode,co=function(e){var t;if(e.length<2)return(t=e.charCodeAt(0))<128?e:t<2048?so(192|t>>>6)+so(128|63&t):so(224|t>>>12&15)+so(128|t>>>6&63)+so(128|63&t);t=65536+1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320);return so(240|t>>>18&7)+so(128|t>>>12&63)+so(128|t>>>6&63)+so(128|63&t)},uo=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,lo=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[ro.charAt(n>>>18),ro.charAt(n>>>12&63),t>=2?"=":ro.charAt(n>>>6&63),t>=1?"=":ro.charAt(63&n)].join("")},fo=function(e){return t=function(e){return e.replace(uo,co)}(e),t.replace(/[\s\S]{1,3}/g,lo);var t},po=new RegExp(["[-][-]","[-][-]{2}","[-][-]{3}"].join("|"),"g"),go=function(e){switch(e.length){case 4:var t=((7&e.charCodeAt(0))<<18|(63&e.charCodeAt(1))<<12|(63&e.charCodeAt(2))<<6|63&e.charCodeAt(3))-65536;return so((t>>>10)+55296)+so(56320+(1023&t));case 3:return so((15&e.charCodeAt(0))<<12|(63&e.charCodeAt(1))<<6|63&e.charCodeAt(2));default:return so((31&e.charCodeAt(0))<<6|63&e.charCodeAt(1))}},ho=function(e){var t=e.length,n=t%4,a=(t>0?io[e.charAt(0)]<<18:0)|(t>1?io[e.charAt(1)]<<12:0)|(t>2?io[e.charAt(2)]<<6:0)|(t>3?io[e.charAt(3)]:0),o=[so(a>>>16),so(a>>>8&255),so(255&a)];o.length-=[0,0,2,1][n];return o.join("")},_o=function(e){return t=function(e){return e.replace(/[\s\S]{1,4}/g,ho)}(e),t.replace(po,go);var t},mo={encode:function(e,t){return t?fo(String(e)).replace(/[+\/]/g,function(e){return"+"===e?"-":"_"}).replace(/\=/g,""):fo(String(e))},decode:function(e){return _o(String(e).replace(/[-_]/g,function(e){return"-"===e?"+":"/"}).replace(/[^A-Za-z0-9\+\/]/g,""))}},vo=Ga.extend({encodeData:function(e,t,n){var a=L(x()),o=m.cloneDeep(e);if(t){var r=a.getMetaInfo(ae.APLUS_FORWARD_APPKEY);r&&(o.h.ak=r)}o=mo.encode(y.stringfy(o));n===ie.POST&&navigator&&navigator.sendBeacon||(o="d=".concat(encodeURIComponent(o)));return o},handlerMiddleware:function(e){var t=L(x());if(!t.getMetaInfo(ae.JSBRIDGE_ONLY)){var n=location&&(location.href.match(/debugMode=(true|false)/)||location.href.match(/debugMode=(true|false)/))||[],a=t.getMetaInfo("DEBUG")||n[1];C().setDebug(!!a);var o=function(e){var t=L(x()),n=e.event_timestamp.getTime().toString(),a=e.client||{},o=a.language||"-",r=e.gokey||{},i=JSON.stringify(r),s=JSON.stringify({customSdkId:e.sdk_info.customSdkId||"",platform_type:e.sdk_info.platformType||""}),c=e.appKey||e.appId||"-",u=JSON.stringify({appId:a.appId||t.getMetaInfo("miniAppId")||""}),l=JSON.stringify(e.sessionArgs||{}),f=JSON.stringify(e.globalArgs||{}),p=e.arg1||e.logkey||"-";0===p.indexOf("/$$_")&&(p=p.substring(1,p.length));e.event_code===Z.PV_CODE&&e.trackerEventCode&&(p=e.trackerEventCode);var d={};d.platform=e.sdk_info.platformType||"";d.sdk_type=d.platform?"".concat(d.platform,"mp"):"";d.appkey=c;d.sdk_version=e.sdk_info.lver;d.device_type=a.device_model||"";d.os=a.os||"";d.os_version=a.os_version||"";d.jsver=e.sdk_info.jsver;d.pixel_ratio=window.devicePixelRatio||"";var g=Math.round(a.screenWidth*(window.devicePixelRatio||1)),h=Math.round(a.screenHeight*(window.devicePixelRatio||1));d.resolution=g>h?"".concat(g,"*").concat(h):"".concat(h,"*").concat(g);d.language=o;d.app_version=t.getMetaInfo("appVersion")||"devtools";d.arg1=p;d.event_args=i;d.event_code=e.event_code||"";d.sessionArgs=l;d.global_args=f;d.app_ext_info=u;d.time=n;d.cna=e.cna||"";d.url=e.url||"";d.pre=e.pre||"";d.method=e.method||ie.GET;d.log_id=e.cache||"";d.sdk_info=s;d.is_auto=e.is_auto;d.track_type=e.track_type;var _=t.getMetaInfo("aplus-exdata");_&&_.aplus_track_debug_id&&(d.track_debug_id=_.aplus_track_debug_id);return d}(e.what_to_send.logdata),r=ao(o,e.userdata),i=e.where_to_send.method;if(e.where_to_send.subDomainUrl){var s=t.getMetaInfo(ae.APLUS_FORWARD_EVENT_FILTER)||[],c=this.encodeData(r,!0,i);try{r.a.e.sessionid[0].id===ae.PAGE_START&&-1===d.indexof(s,r.a.e.sessionid[0].page_name)&&t.send(e.where_to_send.subDomainUrl,c,i);r.a.e.sessionid[0].id!==ae.PAGE_START&&-1===d.indexof(s,r.a.e.sessionid[0].id)&&t.send(e.where_to_send.subDomainUrl,c,i)}catch(e){}}if(r){C().i("event before send to: ",e.where_to_send.url);t.send(e.where_to_send.url,this.encodeData(r,!1,i),i)}}}}),yo=bt(Object.freeze({__proto__:null,default:vo})),bo=function(){return a(function e(n){t(this,e);this.options=n},[{key:"run",value:function(){yo.default.create({WS:null,CTX:window,CTX_TYPE:"WEB"}).run(this.options)}}])}(),Ao=bt(Object.freeze({__proto__:null,default:bo})),So=function(e){for(var t=e.length,n=new Array(t-1),a=1;a<t;a++)n[a-1]=e[a];return n},Eo=k.extend({callable:function(e){if(!b(e))throw new TypeError(e+" is not a function");return e},create:function(e){var t=new this;for(var n in e)t[n]=e[n];t.handlers=[];t.pubs={};return t},setHandlers:function(e){this.handlers=e},subscribe:function(e,t){this.callable(t);var n=this,a=(n.pubs||{})[e]||[];if(a)for(var o=0;o<a.length;o++){var r=a[o]();t.apply(n,r)}var i=n.handlers||[];e in i||(i[e]=[]);i[e].push(t);n.setHandlers(i);return n},unsubscribe:function(e,t){this.callable(t);try{var n=this.handlers[e];if(!n)return this;if("object"===l(n)&&n.length>0){for(var a=0;a<n.length;a++)t.toString()===n[a].toString()&&n.splice(a,1);this.handlers[e]=n}else delete this.handlers[e]}catch(e){}return this},publish:function(e){var t=So(arguments),n=this.handlers||[],a=n[e]?n[e].length:0;if(a>0)for(var o=0;o<a;o++){var r=n[e][o];b(r)&&r.apply(this,t)}return this},cachePubs:function(e){var t=this.pubs||{},n=So(arguments);t[e]||(t[e]=[]);t[e].push(function(){return n})}}),wo=Eo.extend({subscribeOnce:function(e,t){this.callable(t);var n,a=this;this.subscribe.call(this,e,n=function(){a.unsubscribe.call(a,e,n);var o=Array.prototype.slice.call(arguments);t.apply(a,o)});return this}}),To=bt(Object.freeze({__proto__:null,default:wo})),Po=function(){return a(function e(n){t(this,e);this.options=n},[{key:"run",value:function(){var e=L(x()),t="".concat(x(),"_pubsub");if(!e[t]){var n=To.default.create();e[t]=n}}}])}(),Oo=bt(Object.freeze({__proto__:null,default:Po})),Io=function(){return a(function e(n){t(this,e);this.options=n},[{key:"getLogConfig",value:function(){var e={},t=this.options.config.plugins,n=function(n){e[n]={plugins:t[n],context:{}};f(t[n],function(t){e[n].context[t.name]=t.config||{}})};for(var a in t)n(a);return e}},{key:"run",value:function(){this.options.context.logConfig=this.getLogConfig();this.options.context.logConfig.pageLoadTime=this.options.context.PAGE_LOAD_TIME}}])}(),Co=bt(Object.freeze({__proto__:null,default:Io})),ko=function(e,t){if(ht.get&&ht.test()){var n="",a=ht.get(e);if(a){var o=a.split("||")||[];n=t?o.length>1&&t===o[0]?o[1]:"":o.length>1?o[1]:""}return decodeURIComponent(n)}return""},No=function(e,t,n){n&&ht.set&&ht.test()&&ht.set(e,"".concat(t,"||").concat(encodeURIComponent(n)))},Ro=function(e,t,n){if(n&&ht.set&&ht.test()){var a=m.cloneDeep(n);"object"===l(a)&&(a=JSON.stringify(a));ht.set(e,"".concat(t,"||").concat(encodeURIComponent(a)))}},Mo=function(e,t){if(ht.get&&ht.test()){var n="",a=ht.get(e);if(a){var o=a.split("||")||[];n=t?o.length>1&&t===o[0]?o[1]:"":o.length>1?o[1]:""}return y.parse(decodeURIComponent(n))}return""},xo=["$sid"],Do="httpRequest",Lo="request",Uo=function(){},jo=Object.freeze({WECHAT:"wx",DINGTALK:"dd",ALIPAY:"my",TAOBAO:"taobao",TIKTOK:"tt",BAIDU:"bd",JD:"jd",XHS:"xhs",UNKNOW:"UNKNOW"});function Bo(){try{return{ctx:dd,platType:jo.DINGTALK,sdkType:"ddmp",logDomain:"/ddm_logs"}}catch(e){try{return{ctx:my,platType:my&&my.tb?jo.TAOBAO:jo.ALIPAY,sdkType:my&&my.tb?"taobaomp":"mymp",logDomain:"/alipaym_logs"}}catch(e){try{return{ctx:tt,platType:jo.TIKTOK,sdkType:"ttmp",logDomain:"/bytedancem_logs"}}catch(e){try{return{ctx:swan,platType:jo.BAIDU,sdkType:"bdmp",logDomain:"/baidum_logs"}}catch(e){try{return{ctx:xhs,platType:"xhs",sdkType:"xhsmp",logDomain:"/wxm_logs"}}catch(e){try{return{ctx:wx,platType:"wx",sdkType:"wxmp",logDomain:"/wxm_logs"}}catch(e){try{return{ctx:jd,platType:jo.JD,sdkType:"jdmp",logDomain:"/wxm_logs"}}catch(e){return{ctx:{},platType:jo.UNKNOW,sdkType:"UNKNOW"}}}}}}}}}function Vo(){return Bo().platType}function Fo(){return Bo().ctx}function Go(){if("boolean"==typeof oo)return oo;var e=!1;try{var t=navigator?navigator.userAgent||navigator.swuserAgent:"";e=!!/AliApp/i.test(t);/AliApp\((AP|DingTalk|AMAP|UC|QUARK)/i.test(t)&&(e=!1);/AliApp\(KB/i.test(t)&&(e=!!/Mist/.test(t));/AlipayIDE Taobao/.test(t)&&(e=!0);if(e){var n=Vo().ctx;b(n.canIUse)&&(e=!!n.canIUse("callUserTrack"))}}catch(e){}oo=e;return e}var Ho={getPlatformType:Vo,getPlatformSdkType:function(){return Bo().sdkType},getPlatformContext:Fo,getLogDomain:function(){return Bo().logDomain},getCurrentPage:function(){var e=getCurrentPages();return e[e.length-1]||{}},getReferrerPage:function(){var e=getCurrentPages();return e[e.length-2]||{}},resetIsTB:function(e){oo=e},initIsTB:Go,isTB:function(){return"boolean"==typeof oo?!!oo:Go()},getWxTitle:function(e){if(!e)return"";var t=Vo(),n="";try{if(t===jo.WECHAT&&__wxConfig){var a=__wxConfig,o=__wxConfig.page||{},r=o[e]||o[e+".html"],i={},s={};a.global&&a.global.window&&a.global.window.navigationBarTitleText&&(i.title=a.global.window.navigationBarTitleText);r&&r.window&&r.window.navigationBarTitleText&&(s.title=r.window.navigationBarTitleText);if(!s.title&&__wxAppCode__){var c=__wxAppCode__[e+".json"];c&&c.navigationBarTitleText&&(s.title=c.navigationBarTitleText)}var u=M().ctx;u[x()].globalTitleMap&&m.eachMap(u[x()].globalTitleMap,function(t,a){t===e&&(n=a)});0===n.length&&(n=s.title||i.title||"")}return n}catch(e){C().w("current platform can not track page title");return n}},setStorageSync:function(e,t){try{var n=Vo(),a=Fo();n===jo.ALIPAY||n===jo.TAOBAO?a.setStorageSync({key:e,data:t}):a.setStorageSync(e,t)}catch(e){}},getStorageSync:function(e){try{var t=Vo(),n=Fo();return t===jo.ALIPAY||t===jo.TAOBAO?n.getStorageSync({key:e}).data:n.getStorageSync(e)}catch(e){}},getStorageAsync:function(e){return new Promise(function(t,n){try{Fo().getStorage({key:e,success:function(e){t(e.data)},fail:function(e){t(void 0)}})}catch(t){C().e("getStorageAsync failed, errormsg = ",t,e);n(t)}})},setStorageAsync:function(e,t){return new Promise(function(n,a){try{Fo().setStorage({key:e,data:t,success:function(){n()},fail:function(e){C().e("setStorageAsync failed, errormsg = ",e);a(e)}})}catch(e){C().e("setStorageAsync failed, errormsg = ",e);a(e)}})},removeStorageSync:function(e){try{var t=Vo(),n=Fo();t===jo.ALIPAY||t===jo.TAOBAO?n.removeStorageSync({key:e}):t===jo.XHS?n.removeStorage({key:e}):n.removeStorageSync(e)}catch(e){C().e("removeStorageSync failed, errormsg = ",e)}},request:function(e,t,n,a){var o=L(x()),r=Fo();b(a)||(a=Uo);b(n)||(n=Uo);var i=t.requestMethodName||Lo,s=r[i];b(s)||i===Lo||(s=r[i=Lo]);b(s)||i===Do||(s=r[i=Do]);var c,u,f=t&&t.dataType?t.dataType:"base64",p=o.getMetaInfo(ae.APLUS_MINI_REQUEST_TIMEOUT),d=t&&t.timeout?t.timeout:p,g=t.method||ie.GET;e=wt.fixDomain(e);if(b(s)){var h={url:e,method:g,dataType:f,timeout:d,success:function(e){if(!c){c=!0;n(e)}},fail:function(e){if(!c){c=!0;a({failure:!0,data:e})}}};if(g===ie.POST&&"object"===l(t.data)){h.url=h.url.split("?")[0];if(Do===i){h.headers={"Content-Type":"application/json"};h.dataType="json";h.data=JSON.stringify(t.data)}else h.data=t.data}s(h)}else if(!c){c=!0;a({failure:!0,data:u})}setTimeout(function(){if(!c){c=!0;u='aplus log request"'+e+' timeout", time spend'+d+"ms";console&&console.warn(u);a({failure:!0,data:u})}},d)},requestPromise:function(e,t){var n=Fo(),a=Vo();if([jo.WECHAT,jo.TIKTOK,jo.XHS].includes(a))return new Promise(function(o,r){var s=n[Lo];s&&b(s)?s(i(i({url:e},t),{},{success:o,fail:r})):C.w("current platform not support request method, platform = ",a)});C.w("current platform not support Promise, platform = ",a)},getUtmParamsObj:function(e,t){var n={};try{if(!e)return n;m.eachMap(e,function(a,o){if(0===a.indexOf("utm_"))n[a]="".concat(o);else if("scene"===a&&O.isString(o)){var r=decodeURIComponent(o)||"",i=O.query2obj(r);m.eachMap(i,function(e,t){0!==e.indexOf("utm_")&&"$sid"!==e||(n[e]="".concat(t))})}else if("$sid"===a){n[ae.REF_SHARE_ID]=o;e.$sid;var u=s(e,xo),l=I.obj2queryStr(u);n[ae.REF_SHARE_URL]="".concat(t,"?").concat(l)}else if("q"===a)try{var f=decodeURIComponent(o)||"";if(f.indexOf("?")>-1){var p=f.match(/\$sid=([^&]+)/);if(p&&p[1]){n[ae.REF_SHARE_ID]=p[1];n[ae.REF_SHARE_URL]=f}else C().i("qrcode don't contains $sid info, q = ",o);var d=f.split("?")[1]||"";d&&d.split("&").forEach(function(e){var t=c(e.split("="),2),a=t[0],o=t[1];0===a.indexOf("utm_")&&(n[decodeURIComponent(a)]=decodeURIComponent(o))})}}catch(e){C().w("handle query error:",e)}})}catch(e){C().e("handle query error:",e)}return n},PLATFORM_TYPE:jo},Ko=function(){var e=null,t="",n={},a=!1;function o(){var e=Ho.getPlatformContext();this.load=function(o){if(m.isEmptyObject(n)){t="aplus_cache_".concat(wt.getAppKey());e.getStorageInfo({success:function(r){r&&r.keys&&(r.keys||[]).indexOf(t)>-1&&e.getStorage({key:t,success:function(r){if(r&&r.data){var s=y.parse(r.data)||{};n=m.cloneDeep(i(i({},s),n||{}))}a=!0;e.removeStorage({key:t});b(o)&&o()},fail:function(n){C().w("".concat(t,": ").concat(n.errMsg));a=!0;e.removeStorage({key:t});b(o)&&o()}})},fail:function(e){C().w("getStorageInfo api invoke failed, errMsg = ".concat(e))}})}else{e.removeStorage({key:t});b(o)&&o()}};this.save=function(){m.isEmptyObject(n)||e.setStorage({key:t,data:y.stringfy(n)})};this.set=function(e,t){n&&(n[e]=t)};this.get=function(e){return(n||{})[e]};this.remove=function(e){n&&n[e]&&delete n[e]};this.getAll=function(){return n};this.clear=function(){n={}};this.has=function(e){return!!this.get(e)};this.isLoaded=function(){return a};this.getSync=function(e){try{var t=Ho.getStorageSync(e);return e===ae.APLUS_IMPRINT_VERSION?t:"string"==typeof t?y.parse(t):t}catch(e){}};this.setSync=function(e,t){try{"object"===l(t)?Ho.setStorageSync(e,JSON.stringify(t)):Ho.setStorageSync(e,t)}catch(e){}};this.getAsync=function(e){return Ho.getStorageAsync(e)};this.setAsync=function(e,t){Ho.setStorageAsync(e,t)}}return function(){e||(e=new o);return e}}();function Wo(e){var t;t=function(){try{return window}catch(e){}}()?wt.RemoteCfgUtils.get(ae.APLUS_REMOTE_CONFIG):Ko().getSync(ae.APLUS_REMOTE_CONFIG);return!!m.isEmptyObject(t)||t&&t[e]}function qo(){return Qo(ae.APLUS_DISABLE_AUTOEVENT_REMOTE)||Wo(se.codelessClickEventStatus)}function zo(){return Wo(se.currentDeviceEnable)}function Yo(){var e=Qo(ae.APLUS_DISABLE_AUTOPV_REMOTE)||Wo(se.codelessCollectorPageStatus);return"number"==typeof e?e:0}function $o(){return Qo(ae.APLUS_AUTOTRACK_ENABLED_REMOTE)||Wo(se.codelessStatus)}function Qo(e){var t=U("_$")||{};if(t.meta_info)return t.meta_info[e]}var Jo={getAutoEventStatus:qo,enableCfg:function(e){var t,n,a=L(D());if(e&&!m.isEmptyObject(e)){n=e.codelessClickEventStatus,L(D()).push({action:oe.setMetaInfo,arguments:[ae.APLUS_DISABLE_AUTOEVENT_REMOTE,n]});!function(e){L(D()).push({action:oe.setMetaInfo,arguments:[ae.APLUS_DISABLE_AUTOPV_REMOTE,e]})}(e.codelessCollectorPageStatus);!function(e){L(D()).push({action:oe.setMetaInfo,arguments:[ae.APLUS_AUTOTRACK_ENABLED_REMOTE,e]})}(e.codelessStatus);t=e.currentDeviceEnable,L(D()).push({action:oe.setMetaInfo,arguments:[ae.APLUS_DEVICE_ENABLE,t]});e.eventSamplingRate&&e.eventSamplingRate.length>0&&a.push({action:oe.setMetaInfo,arguments:[ae.APLUS_EVENT_LIMITRATES,wt.mapEventSampleRates(e.eventSamplingRate)]});e.codelessIgnoreComponent&&e.codelessIgnoreComponent.length>0&&a.push({action:oe.setMetaInfo,arguments:[ae.APLUS_AUTOTRACK_CONFIG_REMOTE,e.codelessIgnoreComponent]})}},getAutoTrackStatus:$o,getAutoPageStatus:Yo,getDeviceStatus:zo,getSyncConfigVersion:function(e){try{if(!e)return;var t=e.split("_"),n=(t[t.length-1]||"").split(".")||[];if(n.length)return n[0]}catch(e){}}},Xo=function(){return a(function e(n){t(this,e);this.options=n;this.ABFPC="_abfpc";this.VERSION="2.0";this.IMPRINT_VERSION="imprintVersion"},[{key:"tryGetStoreValue",value:function(e){return{lsValue:ht.get(e),cookieValue:dt.getCookie(e)}}},{key:"syncRcfg",value:function(e,t){var n=wt.getTrackDomain(),a=wt.fixDomain(n),o=wt.getAppKey();"string"==typeof n&&n&&pt.loadScript("".concat(a,"/rcfg.js?_abfpc=").concat(e,"&ak=").concat(o),t)}},{key:"setImprintVersion",value:function(e){this.impv=e;if(e&&ko(ae.APLUS_IMPRINT_VERSION)!==e){No(ae.APLUS_IMPRINT_VERSION,wt.date2YYMMDDHHMMSS(),e);var t=wt.getTrackDomain(),n=wt.fixDomain(t),a=Jo.getSyncConfigVersion(e),o=n+e;this.syncRemoteCfgData(o,a)}else{var r=Mo(ae.APLUS_REMOTE_CONFIG);Jo.enableCfg(r)}}},{key:"syncRemoteCfgData",value:function(e,t){var n=this;pt.loadScript(e,function(a){var o,r;if(a&&"error"===a.type)C().w("quicktracking load remote config failed",a);else{try{r="object"===l(o=U("imprint"))?o:JSON.parse(o);var i=o.version;if(i){var s;i!==t?s=setTimeout(function(){n.syncRemoteCfgData(e,t)},3e5):s&&clearTimeout(s)}Ro(ae.APLUS_REMOTE_CONFIG,wt.date2YYMMDDHHMMSS(),r)}catch(e){r=null}Jo.enableCfg(r)}})}},{key:"run",value:function(){var e=this,t=e.tryGetStoreValue(e.ABFPC),n=t.lsValue||t.cookieValue;n&&(n=n.replace("_".concat(e.VERSION),""));e.syncRcfg(n,function(t){if(t&&"error"===t.type)C().w("remote configuration request failed, err msg:",t);else{var n=U(e.IMPRINT_VERSION);e.setImprintVersion(n)}})}}])}(),Zo=bt(Object.freeze({__proto__:null,default:Xo})),er=function(){return a(function e(n){t(this,e);this.options=n},[{key:"getMetaInfo",value:function(){return(U("_$")||{}).meta_info}},{key:"getAplusWaiting",value:function(){return(this.getMetaInfo()||{})["aplus-waiting"]}},{key:"run",value:function(e,t){var n=this.options.config||{},a=this.getAplusWaiting();if(a&&n.is_auto){a="".concat(this.getAplusWaiting());this.options.context.when_to_sendpv={aplusWaiting:a};switch(a){case Z._USER_ID:case Z._ANONY_ID:case"MAN":return"done";case"1":this.options.context.when_to_sendpv.isWait=!0;setTimeout(function(){t()},6e3);return 6e3;default:var o=1*a;if("NaN"!=="".concat(o)){this.options.context.when_to_sendpv.isWait=!0;setTimeout(function(){t()},o);return o}}}}}])}(),tr=bt(Object.freeze({__proto__:null,default:er})),nr=function(){return a(function e(n){t(this,e);this.options=n},[{key:"getMetaInfo",value:function(){return(U("_$")||{}).meta_info}},{key:"getMetaValue",value:function(e){return(this.getMetaInfo()||{})[e]}},{key:"getRhost",value:function(){var e=this.getMetaValue(ae.APLUS_PV_DOMAIN)||this.getMetaValue(ae.TRACKDOMAIN);return wt.checkDomain(e)?e:""}},{key:"getHjljHostUrl",value:function(e){return(e=wt.fixDomain(e))+"/web_logs"}},{key:"getPvHostUrl",value:function(e){e=wt.fixDomain(e);var t=/\/$/.test(e)?"":"/",n="v.gif";P()&&(n="m.gif");return e+t+n}},{key:"getSubDomain",value:function(){var e=this.getMetaValue(ae.APLUS_FORWARD_DOMAIN);return e&&!wt.checkDomain(e,ae.APLUS_FORWARD_DOMAIN)?"":e}},{key:"getChannel",value:function(e){var t,n=this.getMetaValue("aplus-channel"),a=[ie.WebSocket,ie.WebSocketOnly,ie.GET,ie.POST];a.indexOf(e)>-1&&(t=e);!t&&a.indexOf(n)>-1&&(t=n);return t}},{key:"run",value:function(){if(!this.options.context.is_single){var e=this.options.config.recordType,t=this.getRhost(e);if(!t){C().w("current request domain invalid, please check your aplus-rhost-v value inside metainfo!");return"done"}var n,a,o=this.getSubDomain();n="PV"===e?this.getPvHostUrl(t):this.getHjljHostUrl(t);o&&(a="PV"===e?this.getPvHostUrl(o):this.getHjljHostUrl(o));var r=this.options.config||{},i=this.getChannel(r.method)||ie.POST;i!==ie.POST||navigator&&navigator.sendBeacon||(i=ie.GET);this.options.context.where_to_send.method=r.method;this.options.context.where_to_send.url=n;a&&(this.options.context.where_to_send.subDomainUrl=a)}}}])}(),ar=bt(Object.freeze({__proto__:null,default:nr})),or=Object.freeze({PC:"PC",WAP:"WAP"});function rr(){return P()?or.WAP:or.PC}var ir=function(){return a(function e(n){t(this,e);this.options=n},[{key:"getCommonParams",value:function(){var e=L(x()),t=e.getMetaInfo("aplus-globaldata")||{},n=this.options.context||{},a=n.etag||{},o=n.userdata||{},r=U("_$")||{},i=this.options.config||{},s=rr(),c={_dev_id:e.getMetaInfo("_dev_id"),_anony_id:e.getMetaInfo(Z._ANONY_ID),_user_id:e.getMetaInfo(Z._USER_ID),_user_nick:e.getMetaInfo("_user_nick")||dt.getCookie("tracknick"),_session_id:e.getMetaInfo("_session_id")},u=i.pageUrl||(location?location.href:"-"),l=i.title||document&&document.title,f=e.getMetaInfo("appKey")||e.getMetaInfo("appId");f||C().w("please set appKey in sdk metaInfo before sendPV!");return m.assign({appId:f,cna:t.cna||"",_abfpc:t._abfpc||"",etag:a,pre:r.page_referrer||"-",sdk_info:{jsver:e.globalConfig.script_name,lver:e.globalConfig.lver,customSdkId:e.getMetaInfo("customSdkId")||"",platformType:s.toLowerCase()},trackerEventCode:i.trackerEventCode,title:l,url:u,client:e._aplus_client||{},timeZone:wt.getTimeZone(),gokey:c,gmkey:o.gmkey||"",method:this.options.context.where_to_send.method},c)}},{key:"getPvParams",value:function(){var e,t=this.getCommonParams(),n=L(x());this.options.config.is_auto||(t.sdk_info.mansndlog=1);return m.assign(t,{event_code:Z.PV_CODE,uuid:wt.getUUID(),logtype:"1",logkey:(e=P()?"m":"v","/".concat(e,".gif")),event_timestamp:n._$.send_pv_count>0?new Date:n.logConfig.pageLoadTime,is_auto:this.options.config.is_auto,track_type:this.options.config.track_type})}},{key:"getHjljParams",value:function(){var e=(this.options.context||{}).userdata||{},t={event_code:te[e.gmkey]||Z.OTHER_CODE,logtype:"2",logkey:e.logkey,event_timestamp:new Date,uuid:wt.getUUID()};return m.assign(this.getCommonParams(),t)}},{key:"run",value:function(){var e={};e="PV"===this.options.config.recordType?this.getPvParams():this.getHjljParams();this.options.context.what_to_send.logdata=e}}])}(),sr=bt(Object.freeze({__proto__:null,default:ir})),cr=function(){return a(function e(n){t(this,e);this.options=n},[{key:"getUserdata",value:function(){var e=L(x()),t=this.options.config||{},n={};t&&!t.is_auto&&t.gokey&&("string"==typeof t.gokey?n=S(t.gokey):"object"===l(t.gokey)&&(n=t.gokey));var a=function(e){d.isArray(e)?e.forEach(function(e){n=m.assign(n,e)}):n=m.assign(n,e)};a(e.getMetaInfo("aplus-globaldata"));a(e.getMetaInfo("aplus-cpvdata"));a((this.options.context||{}).userdata||{});var o=e.getMetaInfo(ae.APLUS_NEXT_PAGE_TRANSP);if(!m.isEmptyObject(o)){n.transp=m.cloneDeep(o);e.setMetaInfo(ae.APLUS_NEXT_PAGE_TRANSP,null)}return n}},{key:"processLodashDollar",value:function(){var e=this.options.config||{},t=U("_$")||{};e&&e.referrer&&(t.page_referrer=e.referrer);j("_$",t)}},{key:"updatePre",value:function(e){var t=U("_$")||{};t.page_referrer&&(e.pre=t.page_referrer);return e}},{key:"run",value:function(){var e=this.options.context.what_to_send.logdata,t=m.assign(this.getUserdata(),e.userdata||{});this.processLodashDollar();e.gokey=m.assign(e.gokey,t);e=this.updatePre(e);this.options.context.what_to_send.logdata=e;this.options.context.userdata=e.gokey}}])}(),ur=bt(Object.freeze({__proto__:null,default:cr})),lr=function(){return a(function e(n){t(this,e);this.options=n},[{key:"getToNativeData",value:function(){var e=this.options.context||{},t=m.cloneDeep(e.userdata)||{},n=(e.what_to_send||{}).logdata||{},a=n.sdk_info||{},o=this.options.context.etag||{},r={},i={},s={};i.cna=o.cna;i.lver=a.lver;i.jsver=a.jsver;i.id=ae.PAGE_START;i.ts=Date.now();i.r=n.arg1||n.logkey||"-";i.is_h5="1";i.uuid=n.uuid;Object.prototype.hasOwnProperty.call(t,"autosend")||n.is_auto||"1"===n.track_type?i.is_auto=1:i.is_auto=0;if(t._vt){i.track_type=t.track_type;i._vt=t._vt;delete t._vt;delete t.track_type}else i.track_type="".concat(i.is_auto);if((s=m.cloneDeep(wt.deleteInfo(t,["_anony_id","_dev_id","_session_id","_src_pos_id","_user_id","_user_nick","_abfpc","cna"]))).duration){i.duration=s.duration;delete s.duration}if(s.page_start){i.page_start=s.page_start;delete s.page_start}if(n.url){i.page_name=Wa(location.pathname,s);i.page_title=za(location.pathname,s);i.url=n.url||"-";i["spm-cnt"]=encodeURIComponent(i.page_name)}if(n.pre){i.ref_url="-"!==n.pre?n.pre:"";var c=Ya(i.ref_url);i.ref_page_name=c.page_name||"";i.ref_host=c.host||""}s.ts&&delete s.ts;for(var u in s){var l=s[u];"boolean"==typeof l&&(s[u]=1&l)}m.isEmptyObject(s.transp)||(r.transp=s.transp);r.sdkArgs=m.cloneDeep(i);if(s.transp){r.transp=m.cloneDeep(s.transp);delete s.transp}r.cusp=m.assign(s,qa(location.pathname,s));return r}},{key:"run",value:function(){var e=(this.options.context||{}).what_to_send||{};e.pvdataToUmNative=this.getToNativeData();this.options.context.what_to_send=e}}])}(),fr=bt(Object.freeze({__proto__:null,default:lr})),pr="web";function dr(e,t){var n,a=L(x());"mini"===t?n=Ko().getSync(ae.APLUS_REMOTE_CONFIG):t===pr&&(n=Mo(ae.APLUS_REMOTE_CONFIG));if(n){var o=a.getMetaInfo(ae.APLUS_EVENT_LIMITRATES)||wt.mapEventSampleRates(n.eventSamplingRate);if(o&&o.length>0){var r=d.find(o,function(t){return t.eventId===e});if(r&&Math.ceil(1e3*Math.random())>1e3*r.samplingRate)return!0}}return!1}function gr(e){var t=L(x()).getMetaInfo(ae.APLUS_PRESET_EVENTS_DISABLED);if(t&&d.isArray(t)&&e&&e.indexOf("$$_")>-1&&-1!==t.indexOf(e))return!0}function hr(e,t){return!mr()&&function(e,t,n){if(!zo())try{var a=Ho.getPlatformContext();return m.isEmptyObject(a)?void 0:t===ae.APP_START||t===ae.APP_END}catch(e){}var o=$o(),r=qo(),i=wt.LocalCfgUtils.getAutoTrackStatus();if(("string"==typeof e?A(T(e)):e||{}).auto_element){if(2===r||2===o)return;if("number"==typeof o)return o;if("boolean"==typeof o&&!o)return;if(!i)return}return!gr(t)&&(!dr(t,n)||void 0)}(e,t,pr)}function _r(e,t){return!mr()&&function(e,t,n){var a=zo(),o=Yo(),r=wt.LocalCfgUtils.localAutoPVDisabled();return!(!a||gr(ae.PAGE_START)||dr(t,n)||e&&(o?2===o:r))}(e,t,pr)}function mr(){try{return!!ht.get(ae.APLUS_SDK_DISABLE)}catch(e){C().e("check sdk disable condition failed, errmsg = ",e)}}var vr=function(){return a(function e(n){t(this,e);this.options=n},[{key:"run",value:function(){var e=U("_$")||{},t=this.options.context.can_to_sendpv||{},n=this.options.config||{},a=this.options.context.userdata,o=Wa(location.pathname,a);if(!_r(n.is_auto,o))return"done";t.flag="YES";this.options.context.can_to_sendpv=t;j("_$",e)}}])}(),yr=bt(Object.freeze({__proto__:null,default:vr})),br=function(){return a(function e(n){t(this,e);this.options=n},[{key:"run",value:function(){var e=L(x())._$||{},t=this.options.context||{};j("pv_context",t);var n=e.send_pv_count,a={cna:t.etag?t.etag.cna:"",count:n};F(["sendPV","complete",a]);G(["sendPV","complete",a])}}])}(),Ar=bt(Object.freeze({__proto__:null,default:br})),Sr=function(){return a(function e(n){t(this,e);this.options=n},[{key:"getUserData",value:function(){var e=L(x()),t=this.options.context||{},n=t.userdata||{},a=t.what_to_send.logdata.gokey;a=m.assign(a,e.getMetaInfo("aplus-globaldata"));a=m.assign(a,S(n.gokey));var o=e.getMetaInfo("aplus-exdata");d.isArray(o)?o.forEach(function(e){a=m.assign(a,e)}):a=m.assign(a,e.getMetaInfo("aplus-exdata"));return a}},{key:"run",value:function(){this.options.context.what_to_send.logdata.gokey=this.getUserData()}}])}(),Er=bt(Object.freeze({__proto__:null,default:Sr})),wr=function(){return a(function e(n){t(this,e);this.options=n},[{key:"getToNativeData",value:function(){var e=this.options.context||{},t=e.userdata||{},n=e.etag||{},a=(e.what_to_send||{}).logdata||{},o=a.sdk_info||{},r={},i={},s={};i.cna=n.cna;i.lver=o.lver;i.jsver=o.jsver;i.id=t.logkey||"-";i.ts=Date.now();i.is_h5="1";i.uuid=a.uuid;if(t.gokey)switch(l(t.gokey)){case"string":i.is_auto=!!t.gokey.match("is_auto");break;case"object":i.is_auto=t.gokey.is_auto;break;default:i.is_auto=0}else i.is_auto=0;i.is_auto&&(i.event_type_id=a.event_code);i.track_type=i.is_auto||"".concat(0);s="string"==typeof t.gokey?A(T(t.gokey||"")):m.cloneDeep(wt.deleteInfo(t.gokey,["_anony_id","_dev_id","_session_id","_src_pos_id","_user_id","_user_nick"]));if(a.url){i.page_name=Wa(location.pathname,s);i.page_title=za(location.pathname,s);i.url=a.url||"-";if(i.page_name&&s.spmC){i["spm-cnt"]=[encodeURIComponent(i.page_name),encodeURIComponent(s.spmC),encodeURIComponent(s.spmD)].filter(function(e){return!!e}).join(".");delete s.spmC;delete s.spmB;delete s.spmD}}if(a.pre){i.ref_url="-"!==a.pre?a.pre:"";var c=Ya(i.ref_url);i.ref_page_name=c.page_name||"";i.ref_host=c.host||""}s.ts&&delete s.ts;for(var u in s){var f=s[u];"boolean"==typeof f&&(s[u]=1&f)}var p=m.cloneDeep(s);for(var d in p)if("string"==typeof d&&O.isStartWith(d,"_")){i[d]=p[d];delete s[d]}r.sdkArgs=m.cloneDeep(i);var g=m.cloneDeep(s);r.cusp=g;if(g.ap){r.ap=g.ap;delete g.ap}to().length>0&&(r.ab=to());return r}},{key:"run",value:function(){var e=(this.options.context||{}).what_to_send||{};e.hjljdataToUmNative=this.getToNativeData();this.options.context.what_to_send=e}}])}(),Tr=bt(Object.freeze({__proto__:null,default:wr})),Pr={};function Or(e){var t;try{for(var n;e&&(n=e.tagName)&&!(t=e&&e.getAttribute?e.getAttribute("data-aplus-pos-id"):"");){if("BODY"===n||"HTML"===n){t="PAGE";break}e=e.parentNode}}catch(e){}return{_pos_id:t,alinkEl:e,isPage:!1}}function Ir(e,t){var n=L(x()),a=e.getElementsByTagName("a"),o=function(e){var t=L(x()).getMetaInfo("aplus-auto-clk")||[],n={};if("PAGE"===e)return t[0]||{};d.each(t,function(t){if(t._pos_id===e){n=t;return"break"}});return n}(t)||{},r=Pr.page||{},i=o.spmB||r.spmB;if(i){var s=1;d.each(a,function(e){var a=Or(e)._pos_id;if(t===a){var o="PAGE"===t?[i,s++].join("."):[i,t,s++].join(".");n._current_spm=o;try{if(e&&e.setAttribute&&!e.getAttribute("aplus-anchor-id")){e.setAttribute("aplus-anchor-id",o);e.href&&"#"!==e.href&&e.setAttribute("href",function(e,t){e&&/&?\b_src_pos_id=[^&#]*/.test(e)&&(e=e.replace(/&?\b_src_pos_id=[^&#]*/g,"").replace(/&{2,}/g,"&").replace(/\?&/,"?").replace(/\?$/,""));if(!t)return e;var n,a,o,r="&";if(-1!==e.indexOf("#")){o=e.split("#");e=o.shift();a=o.join("#")}var i=e.split("?"),s=i.length-1,c=(o=(o=i[0].split("//"))[o.length-1].split("/")).length>1?o.pop():"";if(s>0){n=i.pop();e=i.join("?")}n&&s>1&&-1===n.indexOf("&")&&-1!==n.indexOf("%")&&(r="%26");e="".concat(e,"?_src_pos_id=").concat("").concat(t).concat(n?r+n:"").concat(a?"#".concat(a):"");var u=O.isContain(c,".")?c.split(".").pop().toLowerCase():"";if(u){if(Object.prototype.hasOwnProperty.call({png:1,jpg:1,jpeg:1,gif:1,bmp:1,swf:1},u))return 0;!n&&s<=1&&(a||Object.prototype.hasOwnProperty.call({htm:1,html:1,php:1,aspx:1,shtml:1,xhtml:1},u)||(e+="&file=".concat(c)))}return e}(e.href,o))}}catch(e){C().w(e)}}})}}function Cr(e,t){var n,a=function(e){for(var t,n;e&&(t=e.tagName);){if("A"===t){n=!0;break}if("BODY"===t||"HTML"===t)break;e=e.parentNode}return n?e:""}(t);if(a&&!(n=a.getAttribute("aplus-anchor-id"))){var o=Or(a);n=o._pos_id;Ir(o.alinkEl,n)}return n}function kr(e){var t=document;ye.pushIntoGoldlogQueue(Z.SUBSCRIBE,[Z.CURRENT_PAGE_CONFIG,function(e){Pr=e||{}}]);L(x()).doTrace=Cr;if(e&&e.isTouchEnabled)gt.on(t,"tapSpm",Cr);else{gt.on(t,"mousedown",Cr);gt.on(t,"keydown",Cr)}}var Nr=function(){return a(function e(n){t(this,e);this.options=n},[{key:"run",value:function(){kr({isTouchEnabled:pt.isTouchEnabled()})}}])}(),Rr=bt(Object.freeze({__proto__:null,default:Nr}));function Mr(e,t){!function(e,t,n,a){var o=window||{},r=new Image,i="_img_".concat(Math.random());o[i]=r;var s=function(){if(o[i])try{delete o[i]}catch(e){o[i]=void 0}};r.onload=function(){s();n&&n()};r.onerror=function(){s();a&&a()};setTimeout(function(){if(window[i]){window[i].src="";s()}},t||5e3);r.src=e;r=null}(e,t,function(){},function(){C().w("imgRequest send failed, src = ".concat(e))})}var xr="path",Dr="campaign 4*1024",Lr="title 4*1024",Ur=" user_email",jr=" user_mobile",Br="",Vr="xhr, ",Fr=Object.freeze({UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4});function Gr(e,t,n,a,o){var r=(o.method||ie.GET).toUpperCase(),i=o.timeout||ae.DEFAULT_REQUEST_TIMEOUT,s=wt.fixDomain(e),c=void 0===o.credentials||o.credentials,u=n,p=a,d=null,g=o.cors?"XMLHttpRequest"in window&&"withCredentials"in XMLHttpRequest.prototype?new XMLHttpRequest:"XDomainRequest"in window?new XDomainRequest:null:new XMLHttpRequest;if(g){var h=function(e){u(e);if(d){clearTimeout(d);d=null}},_=function(e){p(e);if(d){clearTimeout(d);d=null}};d=setTimeout(function(){!function(){try{g&&"object"===l(g)&&g.abort&&g.abort()}catch(e){}if(d){clearTimeout(d);g.onreadystatechange=null;p&&p();g.onload=null;g.onerror=null}}()},i);if("undefined"!=typeof XDomainRequest&&g instanceof XDomainRequest){g.onload=function(){h(v(g.responseText));g.onreadystatechange=null;g.onload=null;g.onerror=null};g.onerror=function(){_(v(g.responseText));g.onreadystatechange=null;g.onerror=null;g.onload=null}}g.onreadystatechange=function(){try{if(g.readyState===Fr.DONE){g.status>=re.OK&&g.status<re.MULTIPLE_CHOICES||g.status===re.NOT_MODIFIED?h(v(g.responseText)):_(v(g.responseText));g.onreadystatechange=null;g.onload=null}}catch(e){g.onreadystatechange=null;g.onload=null}};g.open(r,s,!0);try{c&&(g.withCredentials=!0);m.isObject(o.header)&&f(o.header,function(e,t){g.setRequestHeader&&g.setRequestHeader(e,t)});if(t){o.cors||g.setRequestHeader&&g.setRequestHeader("X-Requested-With","XMLHttpRequest");"application/json"===o.contentType?g.setRequestHeader&&g.setRequestHeader("Content-type","application/json; charset=UTF-8"):g.setRequestHeader&&g.setRequestHeader("Content-type","application/x-www-form-urlencoded")}}catch(e){C().w("http request failed, error = ".concat(e))}t?g.send(JSON.stringify(t)):g.send()}else C().w("".concat(Vr,"").concat(navigator.userAgent));function v(e){if(!e)return"";try{return JSON.parse(e)}catch(e){}}}function Hr(e,t,n,a,o){window.fetch?function(e,t,n,a,o){var r=wt.fixDomain(e),s=!0,c=o&&o.timeout?o.timeout:ae.DEFAULT_REQUEST_TIMEOUT;setTimeout(function(){if(s){s=!1;a({timeout:c})}},c);window.fetch(r,i({method:o.method||ie.GET,headers:{"Content-Type":o.header||"application/json"},body:t?JSON.stringify(t):void 0},o)).then(function(e){return/application\/json/.test(e.headers.get("content-type"))?e.json():e.text()}).then(function(e){if(s){n(e);s=!1}}).catch(function(e){s&&a(e)})}(e,t,n,a,o):Gr(e,t,n,a,o)}var Kr=function(e,t,n,a){try{var o=t.url;if(e&&e.code===re.OK){var r,i=e.data.shareId;r=a?{path:o.indexOf("?")>-1?"".concat(o,"&$sid=").concat(i):"".concat(o,"?$sid=").concat(i),$soriPath:o,title:t.title,$sid:i,$scampaign:t.meta&&t.meta.campaignId}:{$sid:i};if(!n||!b(n))return r;n(r)}else{C().e(new Error(e.message));if(!n||!b(n))return{};n()}}catch(e){C().e(new Error(e.message));if(!n||!b(n))return{};n(new Error(e.message))}},Wr=document,qr=[],zr=[],Yr=[],$r=[],Qr=k.extend({beforeSendPV:function(e){qr.push(e)},afterSendPV:function(e){zr.push(e)},send:function(e,t,n){var a,o=L(x());if(0===e.indexOf("//")){var r=Z.HTTPS;/(\d+\.){3,}\d+/.test(e)&&(r="http:");e=r+e}a=n===ie.POST&&navigator&&navigator.sendBeacon?function(e,t){navigator.sendBeacon(e,t);return e}(e,t):Mr("".concat(e,"?").concat(t),function(){var e=5e3;try{var t=L(x()).getMetaInfo("aplus-mmstat-timeout");if(t){var n=parseInt(t,10);n>=1e3&&n<=1e4&&(e=n)}}catch(e){}return e}());o.req=a;return a},sendPV:function(e,t){var n=e||{},a=L(x());if(d.some(qr,function(e){return!1===e(a,n)}))return!1;var o=a.getMetaInfo(ae.APLUS_SKIP_APV_RULES)||[];if(!d.itemMatch(o,location.href)||!n.is_auto){var r=new de;n.recordType="PV";n.method=n.method!==ie.GET?ie.POST:ie.GET;var i=a.logConfig.pv;r.run({plugins:i.plugins,context:m.cloneDeep(i.context)},{config:n,userdata:t,pubsubType:"pv",messageFnQueue:zr,middlewareMessageKey:"mw_change_pv"});return!0}},getParam:function(e){var t=window.WindVane||{};return t&&"function"==typeof t.getParam?t.getParam(e):""},beforeRecord:function(e){Yr.push(e)},afterRecord:function(e){$r.push(e)},record:function(e,t,n,a,o){var r=L(x());if(d.some(Yr,function(e){return!1===e(r)}))return!1;var i=new de,s=r.logConfig.hjlj;hr(n,e)&&i.run({plugins:s.plugins,context:m.cloneDeep(s.context)},{config:{recordType:"COMMON_HJLJ",method:a||ie.POST},userdata:{logkey:e,gmkey:t,gokey:n||{}},pubsubType:"hjlj",messageFnQueue:$r,middlewareMessageKey:"mw_change_hjlj"},function(){b(o)&&o()});return!0},recordUdata:function(e,t,n,a,o){var r=L(x()),i=new de,s=r.logConfig.hjlj;i.run({plugins:s.plugins,context:m.cloneDeep(s.context)},{config:{recordType:"DATACLICK_HJLJ",method:a||ie.POST},userdata:{logkey:e,gmkey:t,gokey:n||{}},pubsubType:"hjlj",messageFnQueue:$r,middlewareMessageKey:"mw_change_hjlj"},function(){b(o)&&o()});return!0},setMetaInfo:function(e,t,n){var a,o,r="OVERWRITE",i=r;if("object"===l(e)){a=e.metaName;o=e.metaValue;i=e.mode||r}else{a=e;o=t}if(i!==r)return this.appendMetaInfo(a,o);if(Wt(a,o)){var s=U("_$")||{};s.meta_info=Kt();j("_$",s);var c=["setMetaInfo",a,o,n];F(c);G(c)}},appendMetaInfo:function(e,t){var n,a,o=L(x());if(e&&t){var r,i=function(n){n.constructor===Array?function(n){try{var a="string"==typeof t?JSON.parse(t):t;s(e,n.concat(a))}catch(e){}}(n):function(n){try{var a="string"==typeof t?JSON.parse(t):t;s(e,m.assign(n,a))}catch(e){}}(n)},s=function(e,t){o.setMetaInfo(e,t,{from:"appendMetaInfo"})},c=o.getMetaInfo(e);if("aplus-exinfo"===e){n=c,a=S(t),s(e,m.assign(n,a));r=!0}if(c)if("object"===l(c)){i(c);r=!0}else try{var u=JSON.parse(c);if("object"===l(u)){i(u);r=!0}}catch(e){}r||s(e,t)}},updatePageProperties:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e&&!m.isEmptyObject(t)){var a=this.getMetaInfo(ae.PAGE_CONFIG)||{},o=location.pathname,r=vt.retrenchHash(location.hash),i=n?r:o,s=!1;if(m.isEmptyObject(a))a[i]={pageName:e,extData:t};else{for(var c in a){var u=a[c];if(c===i||u.regRule&&u.regRule.test(i)||u.pageName===e){s=!0;u.extData?u.extData=g(u.extData,t):u.extData=t;break}}s||(a[i]={pageName:e,extData:t})}this.appendMetaInfo(ae.PAGE_CONFIG,a)}else C().w("invoke updatePageProperties failed, current properties = ".concat(t))},updateNextPageProperties:function(e){if(m.isEmptyObject(e))C().w("invoke updateNextPageProperties failed, current properties = ".concat(e));else{var t=this.getMetaInfo(ae.APLUS_NEXT_PAGE_TRANSP),n={};for(var a in e)"function"==typeof e[a]&&e[a]?n[a]=e[a]():n[a]=e[a];n=m.assign(n,t);this.setMetaInfo(ae.APLUS_NEXT_PAGE_TRANSP,e);try{localStorage.setItem(ae.APLUS_LOCALSTORE_PAGE_TRANSP,JSON.stringify(e))}catch(e){}}},getPageProperties:function(e){if(e){var t={},n=this.getMetaInfo(ae.PAGE_CONFIG)||{};if(!m.isEmptyObject(n))for(var a in n){var o=n[a];if(o.pageName===e){t.cusp=Object.create(null);if(o.extData)for(var r in o.extData)b(o.extData[r])?t.cusp[r]=o.extData[r]():t.cusp[r]=o.extData[r];break}}var i=null,s=this.getMetaInfo(ae.APLUS_NEXT_PAGE_TRANSP),c=JSON.parse(localStorage.getItem(ae.APLUS_LOCALSTORE_PAGE_TRANSP));i=s||c;m.isEmptyObject(i)||(t.transp=i);return t}C().w("invoke getPageProperties method failed, page_name should not be empty, but ".concat(e))},onPageShow:function(){},onPageHide:function(){try{localStorage.getItem(ae.APLUS_LOCALSTORE_PAGE_TRANSP)&&localStorage.removeItem(ae.APLUS_LOCALSTORE_PAGE_TRANSP)}catch(e){}},getPageProperty:function(e,t,n){if(e)if(t&&"string"==typeof t){if(n){var a=this.getPageProperties(e),o=a.cusp,r=a.transp;switch(n){case"cusp":if(!m.isEmptyObject(o))return o[t];break;case"transp":if(!m.isEmptyObject(r))return r[t];break;default:C().w("invoke getPageProperty failed, invalid propType = ".concat(n))}}}else C().w("invoke getPageProperty failed, invalid propKey = ".concat(t));else C().w("invoke getPageProperty failed, page_name should not be empty")},getMetaInfo:function(e){return zt(e)},on:gt.on,cloneDeep:m.cloneDeep,setCookie:dt.setCookie,getCookie:dt.getCookie,updateSessionProperties:function(e){var t=L(x());"object"===l(e)&&t.setMetaInfo("_session_args",e)},setPageName:function(e){if(e&&"string"==typeof e){var t=Wr.querySelector("body");try{t.setAttribute("data-pagename",e)}catch(e){C().w("setPageName failed: err=".concat(e))}}else C().w("setPageName failed: pagename=".concat(e))},getPageName:function(){return Wa(location.pathname)},getElementSPM:function(e){if(e&&e.dataset)return e.getAttribute("data-spm-anchor-id")},recordAppLink:function(e,t,n){if(!e.targetAppKey){C().w("send $$_app_link failed: targetAppKey is null");return!1}e.is_auto=1;return L(x()).record("$$_app_link",Z.OTHER,e,t,n)},reportUserInfo:function(e,t){var n={};e&&("string"==typeof e?n._user_email=e:C().w(Ur));t&&("string"==typeof t?n._user_mobile=t:C().w(jr));Object.keys(n).length&&this.record("$$_user_profile",Z.OTHER,n)},requestShareParams:function(e,t){var n=e.url||location.href,a=function(){var e=L(x()),t=e.getMetaInfo(ae.TRACKDOMAIN)||e.getMetaInfo(ae.APLUS_PV_DOMAIN);if(wt.checkDomain(t))return"".concat(wt.fixDomain(t),"/share/getShareId")}(),o=function(e,t,n,a){var o=e.path,r=e.campaign,i=e.title,s=e.shareId;o||C().w(xr);if(r&&O.isString(r)&&r.length>=4096)C().e(Dr);else{if(!(i&&O.isString(i)&&i.length>=4096)){var c=L(x()),u=c.getMetaInfo(ae.APPKEY),l="mini"===a?c.getMetaInfo(Z._ANONY_ID):c.getMetaInfo(Z._DEV_ID),f=c.getMetaInfo(Z._USER_ID),p={meta:{campaignId:r||""},shareId:s,shareTitle:i,url:n,ts:Date.now(),umid:l,puid:f,sharePlatform:t,appkey:u};C().i("before requestShareParams: \n ".concat(JSON.stringify(p)," \n"));return p}C().e(Lr)}}(e,rr(),n,pr)||{};if(!a){b(t)&&t(new Error(Br));C().e(new Error(Br));return Promise.reject(new Error(Br))}if(!b(t))return function(e,t){return new Promise(function(n,a){Hr(e,t,n,a,{timeout:ae.DEFAULT_REQUEST_TIMEOUT,method:ie.POST,credentials:!!window.fetch&&"same-origin",header:window.fetch?null:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:-1}})}).then(function(e){return Kr(e,t)}).catch(function(e){C().e(new Error(e.msg))})}(a,o);!function(e,t,n){Hr(e,t,function(e){Kr(e,t,n)},function(e){var t=new Error(e.msg);C().e(t);n&&n(t)},{timeout:ae.DEFAULT_REQUEST_TIMEOUT,method:ie.POST,credentials:!!window.fetch&&"same-origin",contentType:"application/json",cors:!0,header:window.fetch?null:{"Cache-Control":"no-cache",Pragma:"no-cache",Expires:-1}})}(a,o,t)},getRefShareParams:function(){var e=L(x()).getMetaInfo(ae.GLOBAL_PROPERTY)||{};return{$$_ref_share_url:e[ae.REF_SHARE_URL]||"",$$_ref_share_id:e[ae.REF_SHARE_ID]||""}},disableSDK:function(){try{ht.set(ae.APLUS_SDK_DISABLE,!0);C().w("QuickTracking SDK disabled!!!")}catch(e){C().e("disable sdk failed, errormsg: ",e)}},enableSDK:function(){try{ht.remove(ae.APLUS_SDK_DISABLE);C().w("QuickTracking SDK enabled!!!")}catch(e){C().e("enable sdk failed, errormsg: ",e)}}}),Jr={run:Qr},Xr=function(){return a(function e(n){t(this,e);this.options=n},[{key:"run",value:function(){!function(e){var t=L(x());if(!t._aplus_api){t._aplus_api={status:"complete"};var n=Jr.run.create({logConfig:e});for(var a in n)t[a]=n[a]}}(this.options.context.logConfig)}}])}(),Zr=bt(Object.freeze({__proto__:null,default:Xr}));function ei(e){for(var t="",n=7;n>=0;n--)t+="0123456789abcdef".charAt(e>>4*n&15);return t}function ti(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function ni(e,t){return e<<t|e>>>32-t}function ai(e,t,n,a){return e<20?t&n|~t&a:e<40?t^n^a:e<60?t&n|t&a|n&a:t^n^a}function oi(e){return e<20?1518500249:e<40?1859775393:e<60?-1894007588:-899497514}var ri=function(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=+$/,"")};function ii(e){for(var t=function(e){for(var t,n=1+(e.length+8>>6),a=new Array(16*n),o=0;o<16*n;o++)a[o]=0;for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<24-t%4*8;a[t>>2]|=128<<24-t%4*8;a[16*n-1]=8*e.length;return a}(e),n=new Array(80),a=1732584193,o=-271733879,r=-1732584194,i=271733878,s=-1009589776,c=0;c<t.length;c+=16){for(var u=a,l=o,f=r,p=i,d=s,g=0;g<80;g++){n[g]=g<16?t[c+g]:ni(n[g-3]^n[g-8]^n[g-14]^n[g-16],1);var h=ti(ti(ni(a,5),ai(g,o,r,i)),ti(ti(s,n[g]),oi(g)));s=i;i=r;r=ni(o,30);o=a;a=h}a=ti(a,u);o=ti(o,l);r=ti(r,f);i=ti(i,p);s=ti(s,d)}return ri(ei(a)+ei(o)+ei(r)+ei(i)+ei(s))}function si(){var e;e||(e=function(){var e="Not supported";try{var t=document.createElement("canvas"),n=t.getContext("2d");t.style.display="inline";n.textBaseline="alphabetic";n.fillStyle="#f60";n.fillRect(125,1,62,20);n.fillStyle="#069";n.font="11pt no-real-font-123";n.fillText("Cwm fjordbank glyphs vext quiz, ",2,15);n.fillStyle="rgba(102, 204, 0, 0.7)";n.font="18pt Arial";n.fillText("Cwm fjordbank glyphs vext quiz, ",4,45);e=t.toDataURL()}catch(e){}return e}());var t=ii(e);return ri(t)}var ci=function(){return a(function e(n){t(this,e);this.options=n;this.ABFPC="_abfpc";this.CNA="cna";this.VERSION="2.0";this.gl="";this.canvas=""},[{key:"writeCookie",value:function(e,t){try{var n=new Date;n.setTime(n.getTime()+31536e6);dt.setCookie(e,t,{SameSite:!0,expires:"expires=".concat(n.toString())})}catch(e){C().w(e)}}},{key:"trySyncFp",value:function(){var e=this.tryGetStoreValue(this.ABFPC);this.syncLS2Cookie(this.ABFPC,e)}},{key:"tryGetStoreValue",value:function(e){return{LSValue:ht.get(e),cookieValue:dt.getCookie(e)}}},{key:"getClientInfo",value:function(){var e={};try{e=qt?qt._aplus_client:{}}catch(e){}return e}},{key:"hasUsableSWF",value:function(){var e;try{e=void 0!==window.ActiveXObject?new ActiveXObject("ShockwaveFlash.ShockwaveFlash"):navigator.plugins["Shockwave Flash"]}catch(e){}return e?"true":"false"}},{key:"getCanvas",value:function(){try{this.canvas||(this.canvas=document.createElement("canvas"))}catch(e){}return this.canvas}},{key:"getWebGl",value:function(){try{var e=this.getCanvas();!this.gl&&e&&(this.gl=window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl")))}catch(e){}return this.gl}},{key:"initUint8ArrayHashCode2",value:function(){Uint8Array.prototype.hashCode2||(Uint8Array.prototype.hashCode2=function(){var e,t,n=0;if(0===this.length)return n;for(e=0,t=this.length;e<t;e++){n=(n<<5)-n+this[e];n|=0}return n})}},{key:"getWebGlPrinting",value:function(){var e=this.getWebGl();if(e)try{this.initUint8ArrayHashCode2();var t,n,a=e.getExtension("WEBGL_debug_renderer_info");if(a){t=e.getParameter(a.UNMASKED_VENDOR_WEBGL);n=e.getParameter(a.UNMASKED_RENDERER_WEBGL)}else{t="No debug Info";n="No debug Info"}return{myGl:e,ven:t,ren:n}}catch(e){}}},{key:"getResolution",value:function(){var e=1*screen.width,t=1*screen.height;return"".concat(screen.colorDepth,"_").concat(Math.round(e),"_").concat(Math.round(t),"_").concat(1,"_").concat(screen.width,"_").concat(screen.height,"_").concat(screen.colorDepth)}},{key:"generateWebGlPrint",value:function(){var e="",t=this.getWebGl();if(t){try{var n=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,n);var a=new Float32Array([-.2,-.9,0,.4,-.26,0,0,.732134444,0]);t.bufferData(t.ARRAY_BUFFER,a,t.STATIC_DRAW);n.itemSize=3;n.numItems=3;var o=t.createProgram(),r=t.createShader(t.VERTEX_SHADER);t.shaderSource(r,"attribute vec2 attrVertex;varying vec2 varyinTexCoordinate;uniform vec2 uniformOffset;void main(){varyinTexCoordinate=attrVertex+uniformOffset;gl_Position=vec4(attrVertex,0,1);}");t.compileShader(r);var i=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(i,"precision mediump float;varying vec2 varyinTexCoordinate;void main() {gl_FragColor=vec4(varyinTexCoordinate,0,1);}");t.compileShader(i);t.attachShader(o,r);t.attachShader(o,i);t.linkProgram(o);t.useProgram(o);o.vertexPosAttrib=t.getAttribLocation(o,"attrVertex");o.offsetUniform=t.getUniformLocation(o,"uniformOffset");t.enableVertexAttribArray(o.vertexPosArray);t.vertexAttribPointer(o.vertexPosAttrib,n.itemSize,t.FLOAT,!1,0,0);t.uniform2f(o.offsetUniform,1,1);t.drawArrays(t.TRIANGLE_STRIP,0,n.numItems);e=t.canvas.toDataURL()}catch(e){}return e}}},{key:"audioFingerPrinting",value:function(){try{var e=new(window.AudioContext||window.webkitAudioContext),t=e.destination;return"".concat(e.sampleRate.toString(),"_").concat(t.maxChannelCount,"_").concat(t.numberOfInputs,"_").concat(t.numberOfOutputs,"_").concat(t.channelCount,"_").concat(t.channelCountMode,"_").concat(t.channelInterpretation)}catch(e){return"not supported"}}},{key:"getPluginsPrinting",value:function(){var e="";if(navigator&&navigator.plugins){for(var t=navigator.plugins.length,n=0;n<t;n++)e+="".concat(navigator.plugins[n].name,"_");e=e.replace(/[^a-zA-Z ]/g,"")}return e}},{key:"checkIsTouch",value:function(){try{return"ontouchend"in document.createElement("div")?"true":"false"}catch(e){}}},{key:"generateFp",value:function(){var e=this.getWebGlPrinting()||{},t=L(x()),n=dt.getData(),a=mt.getExparamsInfos(),o=t.getMetaInfo(Z._USER_ID)||t.getMetaInfo(Z._DEV_ID)||t.getMetaInfo(Z._ANONY_ID),r=a.uidaplus||(new Date).getTime(),i=si(),s=m.assign(this.getClientInfo(),{WebGL:this.gl?"true":"false",webglPrint:this.generateWebGlPrint(),adBlock:"No",audio:this.audioFingerPrinting(),cookieEnabled:navigator?!!navigator.cookieEnabled:"false",cpu_cores:navigator&&navigator.hardwareConcurrency?navigator.hardwareConcurrency:-1,fontlist:this.hasUsableSWF(),gpu:e.ren,hash:e.hash,inc:e.inc,isSupportLS:ht.test()?"true":"false",plugins:this.getPluginsPrinting(),resolution:this.getResolution(),timezone:-(new Date).getTimezoneOffset()/60,isTouch:this.checkIsTouch(),lang:navigator?navigator.language:"",tracknick:n.tracknick||a.pu_i||o||r}),c=[i];for(var u in s)s[u]&&c.push(s[u]);var l="".concat(ii(c.join("_")),"_").concat(this.VERSION);ht.set(this.ABFPC,l);this.writeCookie(this.ABFPC,l);return l}},{key:"syncCNA",value:function(e,t,n){var a=L(x()),o=a.getMetaInfo(ae.APLUS_PV_DOMAIN)||a.getMetaInfo(ae.TRACKDOMAIN);(o=wt.fixDomain(o))&&(t?pt.loadScript("".concat(o,"/pbe.js?_abfpc=").concat(e,"&cna=").concat(t),n):pt.loadScript("".concat(o,"/pbe.js?_abfpc=").concat(e),n))}},{key:"syncLS2Cookie",value:function(e,t){var n=t.LSValue,a=t.cookieValue;n&&n!==a&&this.writeCookie(e,n);a&&!n&&ht.set(e,a)}},{key:"updateGlobalData",value:function(e){var t=L(x());e&&e._abfpc&&(e._abfpc=e._abfpc.replace("_".concat(this.VERSION),""));t&&(t.deviceInfo=e)}},{key:"fetchCNA",value:function(e,t){var n=this;this.syncCNA(e,t,function(){var t=window.goldlog,a=t?t.cna:"";if(a){n.updateGlobalData({_abfpc:e,cna:a});ht.set(n.CNA,a);n.writeCookie(n.CNA,a)}})}},{key:"run",value:function(){var e=this,t=e.tryGetStoreValue(e.ABFPC),n=e.tryGetStoreValue(e.CNA),a=L(x());e.syncLS2Cookie(this.ABFPC,t);e.syncLS2Cookie(this.CNA,n);var o=t.LSValue||t.cookieValue,r=n.LSValue||n.cookieValue;o||(o=e.generateFp());if((o=o.replace("_".concat(e.VERSION),""))&&a&&a.appendMetaInfo){var i={_abfpc:o};r&&(i.cna=r);e.updateGlobalData(i)}gt.on(window,"beforeunload",function(){e.trySyncFp()});r?H(Z.SDK_READY,function(t){"complete"===t&&e.fetchCNA(o,r)}):setTimeout(function(){H(Z.SDK_READY,function(t){"complete"===t&&e.fetchCNA(o)})},300)}}])}(),ui=bt(Object.freeze({__proto__:null,default:ci}));function li(e,t){try{!function(){if(e&&d.isArray(e)&&e.length){for(var n=yi(e).queue,a={},o=[];a=n.shift();)vi(a,t,function(e){o.push(e)});o.length>0&&setTimeout(function(){for(;a=o.shift();)vi(a,t)},100)}}()}catch(e){C().w(e)}}function fi(){return(U("_$")||{}).meta_info}var pi=[],di=[],gi=[];function hi(e){var t=function(){var e=fi()||{};return"1"!=="".concat(e.uaid)||e._anony_id?e._hold||e["aplus-waiting"]:"BLOCK"}(),n=fi()||{},a=!0,o=e.arguments||[],r=o[0],i=o[1],s="START";if("_hold"===r&&i===s)return s;if("_anony_id"===r&&i)return s;if(e&&/^.*\.(sendPV|record|setPageSPM|setMetaInfo|appendMetaInfo)$/.test(e.action)&&"BLOCK"===t&&!n[t]){gi.push(e);a=!1}return a}function _i(e){li(pi,e);li(di,e);li(gi,e)}function mi(e,t){t&&ee.indexOf(e)>-1&&(e="_".concat(e));return e}function vi(e,t,n){var a=!!t.isOpenApi,o=e?e.action:"",r=e?e.arguments:"",i=hi(e);if(i){var s=M().ctx;try{if(o&&r&&d.isArray(r)){var c,u=o.split("."),l=s,f=s;if(3===u.length)f=(l=s[u[0]][u[1]]||{})[c=mi(u[2],a)]?l[c]:"";else for(;u.length;){f=l=l[c=mi(u.shift(),a)];if(!l){b(n)&&n(e);return}}b(f)&&f.apply(l,r);"START"===i&&_i(t)}}catch(e){C().w(e)}}}function yi(e,t){for(var n,a={subscribeMwChangeQueue:[],subscribeMetaQueue:[],subscribeQueue:[],metaQueue:[],othersQueue:[]},o={};o=e.shift();)try{var r=o.action,i=o.arguments[0];/subscribe/.test(r)?"setMetaInfo"===i?a.subscribeMetaQueue.push(o):i===Z.MW_CHANGE_PV||i===Z.MW_CHANGE_HJLJ?a.subscribeMwChangeQueue.push(o):a.subscribeQueue.push(o):/MetaInfo/.test(r)?a.metaQueue.push(o):a.othersQueue.push(o)}catch(e){C().w(e);a.othersQueue.push(o)}if(t&&a[t]){n=a[t];a[t]=[]}return{queue:a.subscribeMwChangeQueue.concat(a.metaQueue).concat(a.subscribeQueue).concat(a.subscribeMetaQueue,a.othersQueue),formatQueue:n}}var bi=function(){return a(function e(n){t(this,e);this.options=n},[{key:"run",value:function(){var e=this.options.context.sdk_config.queueName,t=M(),n=yi(t[e]||[],"metaQueue");t[e]=n.queue;li(n.formatQueue,this.options.config)}}])}(),Ai=bt(Object.freeze({__proto__:null,default:bi})),Si=function(){return a(function e(n){t(this,e);this.options=n},[{key:"subscribeLogs",value:function(e,t){L(x())["".concat(x(),"_pubsub")].subscribe(e,function(e){"complete"===e.status&&t(e)})}},{key:"isJsBridgeReady",value:function(){return window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.Umeng4Aplus&&window.webkit.messageHandlers.Umeng4Aplus||window.Umeng4Aplus}},{key:"callUT",value:function(e,t){if("sendPV"===e||"sendEvent"===e){t._bridgeName=this.options.bridgeName||"AtmBridge";t._bridgeVersion=this.options.bridgeVersion||"1.1.0"}else if("getNativePageTransp"===e||"updateNextPageProperties"===e){t._bridgeName=this.options.bridgeName||"AtmBridge";t._bridgeVersion=this.options.bridgeVersion||"2.0.0"}try{window.AtmBridge.trace(e,t,function(e){C().i("SUCCESS:",e)},function(e){C().w("FAILURE:",e)})}catch(e){C().w(e)}}},{key:"globalPropertyConvert",value:function(e){var t={};if(!m.isEmptyObject(e))for(var n in e)"boolean"==typeof e[n]?t[n]=e[n]?1:0:"string"!=typeof e[n]&&"number"!=typeof e[n]||(t[n]=e[n]);return t}},{key:"watchGlobalProperty",value:function(){var e=L(D()),t=L(x()),n=this;e.push({action:Z.SUBSCRIBE,arguments:[Z.SDK_READY,function(e){if("complete"===e){H(Z.SET_META_INFO,function(e,a){var o=!!(t&&t.getMetaInfo&&t.getMetaInfo&&t.getMetaInfo(ae.APLUS_GLOBALPROPERTY_SYNC_ENABLE));e===ae.GLOBAL_PROPERTY&&o&&n.callUT("registerGlobalProperties",n.globalPropertyConvert(a))});H(Z.APPEND_META_INFO,function(e,a){var o=!!(t&&t.getMetaInfo&&t.getMetaInfo&&t.getMetaInfo(ae.APLUS_GLOBALPROPERTY_SYNC_ENABLE));e===ae.GLOBAL_PROPERTY&&o&&n.callUT("registerGlobalProperties",n.globalPropertyConvert(a))})}}]})}},{key:"watchGetPageTransp",value:function(){window.AtmBridge.getNativeTransp()}},{key:"watchLOG",value:function(){var e=this;e.subscribeLogs("mw_change_pv",function(t){var n=(t.what_to_send||{}).pvdataToUmNative||{};e.callUT("sendPV",n)});e.subscribeLogs("mw_change_hjlj",function(t){var n=(t.what_to_send||{}).hjljdataToUmNative||{};e.callUT("sendEvent",n)})}},{key:"run",value:function(){if(!window.AtmBridge){var e=function(e){var t=e.Promise,n=e.document,a=e.navigator.userAgent,o="MacIntel"===e.navigator.platform&&e.navigator.maxTouchPoints>1||!!a.match(/(iPad).*OS\s([\d_]+)/),r=/iPhone|iPod/i.test(a)||o,i=Math.floor(65536*Math.random()),s=1,c=[],u="iframe_",f="param_",p={trace:function(e,t,n,a,o){return p.call(e,t,n,a,o)},call:function(e,n,a,o,r){var i;"number"==typeof arguments[arguments.length-1]&&(r=arguments[arguments.length-1]);"function"!=typeof a&&(a=null);!t||a||o||(i=new t(function(e,t){a=e;o=t}));var s=d.getSid(),c={success:a,failure:o};r>0&&(c.timeout=setTimeout(function(){p.onFailure(s,{ret:"HY_TIMEOUT"})},r));d.registerCall(s,c);d.registerGC(s,r);d.evokeNative(e,n,s,c);return i},fireEvent:function(e,t){var a=n.createElement("HTMLEvents");a.initEvent(e,!1,!0);a.param=d.parseData(t);n.dispatchEvent(a)},getParam:function(e){return d.getParam(e)},find:function(e,t){t||d.unregisterCall(e,!1)},onSuccess:function(e,t,n){d.onComplete(e,t,"success",n)},onFailure:function(e,t){d.onComplete(e,t,"failure")},initNativeCallback:function(){pt.setWinVariableKeyValue(ae.APLUS_CALLBACK,function(e,t){C().i("after native callback result: ",t);if(t&&t.result.transp)try{var n,a=L(x());if("string"==typeof t.result.transp){C().i("before convert transp string: ".concat(JSON.stringify(t.result.transp)));n=wt.convertNativeMapStringToJSON(t.result.transp)}else n=t.result.transp;C().i("convert native transp success, transp = ",JSON.stringify(n));a&&a.setMetaInfo&&a.setMetaInfo(ae.APLUS_NEXT_PAGE_TRANSP,n);localStorage.setItem(ae.APLUS_LOCALSTORE_PAGE_TRANSP,JSON.stringify(n));C().i("after save localstorage, transp = ",localStorage.getItem(ae.APLUS_LOCALSTORE_PAGE_TRANSP));F([Z.NATIVE_TRANSP_READY,"complete",JSON.stringify(n)])}catch(e){C().w("convert native transp failed, errmsg == ",e)}})},subScribeNativeInvoke:function(e){d.evokeNative("getNativePageTransp",{},e.sid)},getNativeTransp:function(){var e={sid:d.getSid()};p.subScribeNativeInvoke(e)},updateNextPageProperties:function(e){d.evokeNative("updateNextPageProperties",e,d.getSid())}},d={params:{},calls:{},getSid:function(){return"".concat((i+s++)%65536)},buildParam:function(e){return e&&"object"===l(e)?JSON.stringify(e):e||""},getParam:function(e){return this.params[f+e]||""},setParam:function(e,t){this.params[f+e]=t},parseData:function(e){var t;if(e&&"string"==typeof e)try{t=JSON.parse(e)}catch(n){t={ret:"HY_RESULT_PARSE_ERROR",originValue:e}}else t=e||{};return t},registerCall:function(e,t){this.calls[e]=t},unregisterCall:function(e,t){var n=this.calls[e]||{},a=n.timeout;a&&clearTimeout(a);t||delete this.calls[e];return n},useIframe:function(e,t){var a=u+e,o=c.pop();if(!o){(o=n.createElement("iframe")).setAttribute("frameborder","0");o.style.cssText="width:0;height:0;border:0;display:none;"}o.setAttribute("id",a);o.setAttribute("src",t);o.parentNode||setTimeout(function(){n.body.appendChild(o)},5)},retrieveIframe:function(e){var t=u+e,a=n.querySelector("#".concat(t));if(a)if(c.length>=3)try{n.body.removeChild(a)}catch(e){}else c.indexOf(a)<0&&c.push(a)},evokeNative:function(e,t,n){var a={className:ae.JSBRIDGE_AGENT,methodName:e,sid:n,callback:"getNativePageTransp"===e?"window.".concat(ae.APLUS_CALLBACK):"",params:t},o=JSON.stringify(a);if(window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.Umeng4Aplus&&window.webkit.messageHandlers.Umeng4Aplus.postMessage){C().i("jsbridge native logs: ".concat(o));window.webkit.messageHandlers.Umeng4Aplus.postMessage(o)}if(window.Umeng4AplusFlutter){C().i("jsbridge flutter logs: ".concat(o));window.Umeng4AplusFlutter.postMessage(o)}if(window.Umeng4Aplus)if(window.Umeng4Aplus.CALL){C().i("jsbridge native logs: ".concat(o));window.Umeng4Aplus.CALL(o)}else if(window.Umeng4Aplus.call){C().i("jsbridge native hamonyos logs: ".concat(o));window.Umeng4Aplus.call(o)}if(window.qt_harmony_jsbridge&&window.qt_harmony_jsbridge.callHarmonyNext){C().i("jsbridge harmonyNext logs: ".concat(o));window.qt_harmony_jsbridge.callHarmonyNext(o)}if("sendPV"===a.methodName||"sendEvent"===a.methodName){var r=JSON.stringify(a.params||{});if(window.otherJsbridge&&window.otherJsbridge.qtLogJSBridgeMonitor){C().i("otherJsbridge logs: ".concat(r));window.otherJsbridge.qtLogJSBridgeMonitor(r)}if(window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.otherJsbridge&&window.webkit.messageHandlers.otherJsbridge.postMessage){C().i("otherJsbridge logs: ".concat(r));window.webkit.messageHandlers.otherJsbridge.postMessage(r)}}},registerGC:function(e,t){var n=this,a=Math.max(t||0,6e5),o=Math.max(t||0,6e4);setTimeout(function(){n.unregisterCall(e)},a);r&&setTimeout(function(){n.params[f+e]&&delete n.params[f+e]},o)},onComplete:function(e,t,n,a){var o=this.unregisterCall(e,a),i=o.success,s=o.failure,c=(t=this.parseData(t)).ret;"string"==typeof c&&((t=t.value||t).ret||(t.ret=[c]));"success"===n?i&&i(t):"failure"===n&&s&&s(t);if(r){this.retrieveIframe(e);this.params[f+e]&&delete this.params[f+e]}}};p.initNativeCallback();return p}(window);window.AtmBridge=e}if(window.AtmBridge){this.watchLOG();this.watchGlobalProperty();this.watchGetPageTransp()}}}])}(),Ei=bt(Object.freeze({__proto__:null,default:Si})),wi=k.extend({push:function(e){this.length++;vi(e,this.opts)}}),Ti=function(){return a(function e(n){t(this,e);this.options=n},[{key:"processAplusQueue",value:function(e){var t,n,a=this.options.config||{},o=L(e);li(o,a);t=e,n=wi.create({opts:a,startLength:o.length,length:0}),M().ctx[t]=n}},{key:"run",value:function(){var e,t,n=this.options.context.sdk_config.queueName;this.processAplusQueue(n);e=n,t=this.options.config,L(e).push({action:Z.SUBSCRIBE,arguments:[Z.SET_META_INFO,function(e,n){e===ae.DEBUG?C().setDebug(!!n):e===Z._USER_ID&&n?li(pi,t):e===Z._ANONY_ID&&n?li(di,t):"_hold"===e&&"START"===n&&_i(t)}]})}}])}(),Pi=bt(Object.freeze({__proto__:null,default:Ti})),Oi=function(){return a(function e(n){t(this,e);this.options=n},[{key:"run",value:function(){var e=parent!==self,t=this.options.config||{};!e&&t.urlRules&&d.each(t.urlRules,function(e){var t,n=new RegExp(e.rule);try{t=e.id?window.sessionStorage.getItem(e.id):""}catch(e){}if(n.test(location.href)||t){try{window.sessionStorage.setItem(e.id,!0)}catch(e){}d.isArray(e.cdnPath)?d.each(e.cdnPath,function(t){/\.css$/.test(t)?pt.addStyle(e.id,t):/\.js/.test(t)&&pt.addScript(t)}):pt.addScript(e.cdnPath)}})}}])}(),Ii=bt(Object.freeze({__proto__:null,default:Oi}));function Ci(){L(D()).push({action:"".concat(x(),".sendPV"),arguments:[{is_auto:!0,track_type:"1"},{}]})}function ki(){var e=L(x()),t=e&&e.getMetaInfo(ae.PAGE_CONFIG);if(t)if(t.hashMode){var n=vt.retrenchHash(location.hash);t[n]&&t[n].skipMe||Ci()}else{var a=location.pathname;t[a]&&t[a].skipMe||Ci()}else L(D()).push({action:Z.SUBSCRIBE,arguments:[Z.SDK_READY,function(e){"complete"===e&&Ci()}]})}function Ni(){!function(){var e=L(x());e._aplus_apv?e._aplus_apv={status:"complete"}:ki()}();vt.watchHistoryChange(ki);vt.watchHashChange(ki)}function Ri(e){var t=e||"";if(e)try{t=encodeURIComponent(e)}catch(e){}return t}function Mi(e,t,n){var a=L(x()),o=function(e,t){var n="aplus_webvt_messager=".concat(t);return e.replace("?".concat(n),"").replace("&".concat(n),"")}(e.url,e.aplus_webvt_messager),r=e.pageConfig||{},i=r.pages||[];if(0===i.length)n();else if(r.template||r.stdId)t({rs:i[0],matchRule:"template"});else{var s=!1;f(i,function(e){var n=e.regRule&&new RegExp(e.regRule);if(e.matchUrl===o||n&&o.match(n)){s=!0;t({rs:e,matchRule:"equalUrl"});return"break"}});s||f(i,function(e){var n=e.matchUrl?e.matchUrl.split("|").filter(function(e){return""!==e}):[];if(o&&n.some(function(e){return o.indexOf(e)>-1})){s=!0;t({rs:e,matchRule:"multiUrl"});return"break"}});s||f(i,function(e){if(e.spmCombineRule){var n=new RegExp("^".concat(e.spmCombineRule.replace(/\*\*\*/g,"\\w+"),"$"),"i");(a.debugMode||a.aplusDebug)&&window.console.log(n);if(n.test(o)){s=!0;t({rs:e,matchRule:"spmCombineRule"});return"break"}}});var c=["","#/"];!s&&c.indexOf(o)>-1&&f(i,function(e){if(c.indexOf(e.matchUrl)>-1){s=!0;t({rs:e,matchRule:"defaultHashs"});return"break"}});s||n()}}var xi="",Di={};function Li(e){var t=L(x()),n=t&&t.getMetaInfo?t.getMetaInfo("aplus-custom-params"):"";n&&n!==xi&&f((xi=n).split("&"),function(e){var t=e.split("=");2===t.length&&(Di[t[0]]=Ri(t[1]))});var a={};f(e||[],function(e){var t=e.commitKey||e,n=e.goldlogName||e;a[t]=Di[n]||""});return a}function Ui(e,t){var n=L(x());L(D()).push({action:Z.SUBSCRIBE,arguments:[Z.SDK_READY,function(a){if("complete"===a){var o=e.extraParams||{};o=g(o,dt.getAttrArgsFromCookie(e.cookieKeys));e.goldlogQueueKeys&&(o=g(o,Li(e.goldlogQueueKeys)));o._vt=t.template||t.stdId?2:1;e.spmB&&(o.spmB=e.spmB);var r=e.spmA,i=e.spmB;(t.template||t.stdId)&&(i+=function(e){var t="",n=e.template;if(n){var a=n.split("=");if(a&&2===a.length)switch(a[0]){case"PARAMKEYS":var o=a[1].split(",");if(o.length>0){var r=[];f(o,function(e){var t=e.toLowerCase().replace(/_|-/g,"");r.push(t+vt.getAParamFromUrl(e,location.href))});t="_".concat(r.join("_"))}break;case"HASH":t="_".concat(location.hash);break;case"PATHNAME":t=location.pathname.replace(/\.|\//g,"_")}}return t}(t));r&&i&&ye.pushIntoGoldlogQueue("".concat(x(),".setPageSPM"),[r,i]);var s=n.getMetaInfo("aplus-waiting");n.getMetaInfo(ae.APLUS_DISABLE_AUTOPV)||"MAN"===s||ye.pushIntoGoldlogQueue("".concat(x(),".sendPV"),[{is_auto:!0,title:e.title||e.pageName,track_type:"2"},o])}}]})}var ji,Bi=window,Vi="hash",Fi="history",Gi={template:-1,equalUrl:-2,spmCombineRule:-3,multiUrl:-4,defaultHashs:-5},Hi=k.extend({pathname:"",pageConfig:{},seniorCfg:{},main_callback:function(){},toSendPV:function(e,t,n){var a=this,o=a.pageConfig||{},r=function(e){e.advanced&&a.seniorCfg.run(e.advanced,!0);Ui(e,o);a.main_callback(e)};n?r(n):Mi({url:e,aplus_webvt_messager:a.aplus_webvt_messager,pageConfig:a.pageConfig},function(e){r(e.rs)},function(){Bi.console&&Bi.console.warn('warning: the page of "'.concat(e,'" have not tracker config'))})},watchHashChange:function(){var e=this;e.hash="".concat(location.hash);ye.pushIntoGoldlogQueue("".concat(x(),".on"),[Bi,"hashchange",function(){if(e.hash!==location.hash){e.hash="".concat(location.hash);e.toSendPV(location.hash,Vi)}}])},watchHistoryChange:function(){var e=this;e.pathname="".concat(location.pathname);ye.pushIntoGoldlogQueue("".concat(x(),".on"),[Bi,"popstate",function(){if(e.pathname!==location.pathname){e.pathname="".concat(location.pathname);e.toSendPV(e.pathname,Fi)}}])},clearWatchMObserver:function(){if(this._observer){this._observer.takeRecords();this._observer.disconnect()}},sendPVInInit:function(){var e,t,n,a,o;Mi({url:location.pathname,aplus_webvt_messager:this.aplus_webvt_messager,pageConfig:this.pageConfig},function(t){e=t},function(){});Mi({url:location.hash,aplus_webvt_messager:this.aplus_webvt_messager,pageConfig:this.pageConfig},function(e){t=e},function(){});if(e&&!t){a=e.rs;n=Fi;o=location.pathname}else if(!e&&t){a=t.rs;n=Vi;o=location.hash}else if(e&&t)if(Gi[t.matchRule]>=Gi[e.matchRule]){n=Vi;a=t.rs;o=location.hash}else{n=Fi;a=e.rs;o=location.pathname}a&&this.toSendPV(o,n,a)},reset:function(e,t){this.pageConfig=e;this.main_callback=t;this.sendPVInInit()},run:function(e){this.aplus_webvt_messager=_t.getAParamFromUrl("aplus_webvt_messager",location.href);this.main_callback=e;this.sendPVInInit();vt.watchHashChange(this.toSendPV.bind(this));vt.watchHistoryChange(this.toSendPV.bind(this))}}),Ki=k.extend({pageConfig:{},currentPagePoints:[],isSetAutoExpUserFn:!1,isSetAutoClkUserFn:!1,SET_METAINFO:"qt.setMetaInfo",APPEND_METAINFO:"qt.appendMetaInfo",AUTO_EXP_ACTION:"aplus-auto-exp",AUTO_CLK_ACTION:"aplus-auto-clk",getAttrArgsCfg:function(e){var t={};f(this.currentPagePoints,function(n){n.selector===e&&(t=n)});return t},getDefaultArgs:function(){var e=this.pageConfig||{};return{_vt:e.template||e.stdId?2:1}},getSpmDFromUserAttribute:function(e,t){var n;document.querySelectorAll&&f(document.querySelectorAll(e),function(e,a){if(e===t){var o=a+1;n="A"===t.tagName?a:"d".concat(o)}});return n},getSpmCFromUserAttribute:function(e,t){var n="0";try{var a=t.getAttribute("data-tracker");n=a||(n=e.replace(/'|"|;|:|=|\[|\]|\.|#|-|\/|\|/g,"")).replace(/\s+/g,"")}catch(e){}return n},getAttrArgs:function(e,t){var n=L(x()),a=this.getAttrArgsCfg(t),o={};window.g_SPM&&window.g_SPM.getParam&&(o=window.g_SPM.getParam(e));var r,i=!(!n||!n.getMetaInfo)&&"1"===n.getMetaInfo("aplus-udata-enable");if(a.spmB){o.b=a.spmB;i&&e.setAttribute("data-spm",o.b)}if(a.spmC){o.c=a.spmC;i&&e.setAttribute("data-spm",o.c)}if(!o.c||"0"===o.c){o.c=this.getSpmCFromUserAttribute(t,e)||"0";r=!0;i&&e.setAttribute("data-spm",o.c)}a.spmD?o.d=a.spmD:!a.spmD&&r&&(o.d=this.getSpmDFromUserAttribute(t,e));var s=[];for(var c in o)s.push(o[c]);var u=s.join("."),l=g(this.getDefaultArgs(),this.getAttrArgsFromDom(e,a));l=g(l,this.getAttrArgsFromStaticParams(a));l=g(l,Li(a.goldlogQueueKeys));var f=(l=g(l,dt.getAttrArgsFromCookie(a.cookieKeys))).scm||"";delete l.scm;return{userdata:l,spm:u,scm:f}},getAttrArgsFromDom:function(e,t){var n={};t.attrArgs&&f(t.attrArgs,function(t){if(t.recursive){var a=pt.getAttributeFromEachDom(e,t.attrName);a&&(n[t.commitKey]=Ri(a))}else n[t.commitKey]=Ri(ft.tryToGet(e,t.attrName))});return n},getAttrArgsFromStaticParams:function(e){var t={};if(e.customArgs)for(var n in e.customArgs)t[n]=Ri(e.customArgs[n]);return t},clearAutoActionCfg:function(e){ye.pushIntoGoldlogQueue(this.SET_METAINFO,[e,null])},appendAutoActionCfg:function(e,t){ye.pushIntoGoldlogQueue(this.APPEND_METAINFO,[e,[{logkey:t.logkey,cssSelector:t.selector,eltype:t.eltype,source:"aplus_webvt",spmC:t.spmC,spmD:t.spmD,spmB:t.spmB,customArgs:t.customArgs}]])},setAutoActionUserFn:function(e,t){var n=this;if(!n[t]){n[t]=!0;ye.pushIntoGoldlogQueue(n.SET_METAINFO,[e,function(e,t){return n.getAttrArgs(e,t)}])}},execTrackerTypes:function(e,t){var n=this;t&&"string"==typeof t&&f(t.split("|"),function(t){switch(t){case"jump":break;case"exposure":n.appendAutoActionCfg(n.AUTO_EXP_ACTION,e);break;case"click":n.appendAutoActionCfg(n.AUTO_CLK_ACTION,e)}})},reset:function(e){this.pageConfig=e.pageConfig;this.currentPagePoints=[];this.setAutoActionUserFn("".concat(this.AUTO_EXP_ACTION,"-userfn"),"isSetAutoExpUserFn");this.setAutoActionUserFn("".concat(this.AUTO_CLK_ACTION,"-userfn"),"isSetAutoClkUserFn");var t=e.pageConfig.template,n=e.pageConfig.stdId,a=this;f(this.pageConfig.points,function(o){if(t||n||o.spmB===e.spmB){a.currentPagePoints.push(o);a.execTrackerTypes(o,o.trackerType)}})}}),Wi=function(){return a(function e(){t(this,e)},[{key:"updatePageConfig",value:function(e){var t=this;if(e.isSPA)t.watchSPA&&t.watchSPA.reset(e,function(n){try{t.logG.reset({spmA:n.spmA,spmB:n.spmB,pageConfig:e})}catch(e){C().w("err == ",e)}});else{var n=e.pages[0];Ui(n,e);t.logG.reset({spmA:n.spmA,spmB:n.spmB,pageConfig:e})}}},{key:"filterTriggerMoment",value:function(e,t){switch(e){case"On_Page_Load":ye.pushIntoGoldlogQueue("".concat(x(),".on"),["onload",t]);break;case"On_Dom_Ready":ye.pushIntoGoldlogQueue("".concat(x(),".on"),["DOMReady",t]);break;case"On_CustomEvent_Trigger":ye.pushIntoGoldlogQueue(Z.SUBSCRIBE,["setMetaInfo",function(e,n){"pageReady"===e&&"complete"===n&&t()}]);break;case"On_Aplus_Ready":case"Collect_Script_Load":t();break;default:C().i("current triggerMoment can't match any values, triggerMoment = ",e)}}},{key:"doInitWebVT",value:function(e){var t=this,n=L(x()),a=e.pages[0];window.document.body.dataset&&window.document.body.dataset.pagename&&window.document.body.dataset.pagename===a.spmB||n.setPageName(a.spmB);t.logG=Ki.create({pageConfig:e});if(e.isSPA){t.watchSPA=Hi.create({pageConfig:e,seniorCfg:t.seniorCfg});t.watchSPA.run(function(n){t.logG.reset({spmA:n.spmA,spmB:n.spmB,pageConfig:e})})}else{Ui(a,e);t.logG.reset({spmA:a.spmA,spmB:a.spmB,pageConfig:e})}}},{key:"initWebVT",value:function(e,t){var n=L(x()),a=this;this.filterTriggerMoment(e.triggerMoment,function(){t();a.doInitWebVT(n._aplus_vt_cfg)})}}])}(),qi={catchException:function(e,t){var n=e;"object"===l(t)&&t.message&&(n="".concat(n,"_").concat(t.message));ye.pushIntoGoldlogQueue("".concat(x(),"._aplus_cplugin_m.do_tracker_jserror"),[{message:n,error:JSON.stringify(t),filename:e}])}},zi=document,Yi={lsWebvtConfigKey:"APLUS_WEBVT_CONFIG",getWebVtTplCdnPath:function(){var e=mt.getMetaCnt("aplus-track-config-id"),t=mt.getMetaCnt("aplus-track-config-id","turnon");return e&&"1"===t?e:""},getVtConfigPath:function(){var e=this.getWebVtTplCdnPath(),t=[],n=mt.getMetaCnt("spm-id");if(n)t=n.split(".");else{var a=mt.getMetaCnt("data-spm"),o=ft.tryToGet(zi.body,"data-spm");if(a){t.push(a);o&&t.push(o)}}2===t.length?this.originSpm={spmA:t[0],spmB:t[1]}:1===t.length&&(this.originSpm.spmA=t[0]);return e||(2===t.length?t.join("_"):1===t.length?t[0]:void 0)},fetchFromLS:function(e){this.cdnpath||(this.cdnpath=e||this.getVtConfigPath());try{return decodeURIComponent(ht.get("".concat(this.lsWebvtConfigKey,"-").concat(e)))}catch(e){return{}}},setConfigIntoLs:function(e){this.cdnpath||(this.cdnpath=this.getVtConfigPath());ht.set("".concat(this.lsWebvtConfigKey,"-").concat(this.cdnpath),encodeURIComponent(JSON.stringify(e)))}},$i="WebVtConfigBack",Qi=Z.PUBLISH,Ji=parent!==window.self;function Xi(){var e=!1,t=L(x());if(t.aplusDebug||t.debugMode)return!0;ji||(ji=function(){ji||(ji=decodeURIComponent(_t.getAParamFromUrl("parentUrl",location.href)));return ji}());if(ji&&Ji&&/aplus_webvt_messager/.test(location.href)){var n=/log2-daily\.alibaba\.net/.test(ji),a=/pre-log2\.alibaba-inc\.com/.test(ji);e=n||a}return e}var Zi=k.extend(m.assign(Yi,{pathname:"",pageConfig:{},originSpm:{spmA:"",spmB:""},updateCfgLs:function(e,t){var n=this;setTimeout(function(){n.fetchFromCdn(e,t)},1e3)},fetchFromCdn:function(e,t,n){var a,o=this;if(n)a=e;else{var r=Xi()?"vtdaily":"vt";a=[t,r,"".concat(e,".json")].join("/")}var i=Date.now(),s=L(x());Hr(a,null,function(e){s._webcfg_load=Date.now()-i;if(e)try{s._aplus_vt_cfg="object"===l(e)?e:JSON.parse(e);s._aplus_vt_cfg.points&&d.each(s._aplus_vt_cfg.points,function(e){e.selector=decodeURIComponent(e.selector)});o.setConfigIntoLs(s._aplus_vt_cfg)}catch(e){s._aplus_vt_cfg={enabled:!1}}ye.pushIntoGoldlogQueue(Qi,[$i,{pageConfig:s._aplus_vt_cfg,enable:0}])},function(e){s._aplus_vt_cfg&&s._aplus_vt_cfg.enabled&&ye.pushIntoGoldlogQueue(Qi,[$i,{pageConfig:s._aplus_vt_cfg,enable:0}]);qi.catchException("getTrackerCfg",e,{msg:a})},{timeout:ae.DEFAULT_REQUEST_TIMEOUT,credentials:!!window.fetch&&"same-origin",cors:!0})},getWebVtData:function(e,t,n,a){var o=L(x());o._webcfg_load=0;if(e){var r=this.fetchFromLS(e);if("string"==typeof r)try{r=JSON.parse(r)}catch(e){r={}}r&&r.enabled&&(o._aplus_vt_cfg=r);n?this.fetchFromCdn(e,t,a):ye.pushIntoGoldlogQueue(Qi,[$i,{pageConfig:r,enable:0}])}},syncWebVtData:function(){var e=L(x()),t=mt.getMetaCnt("aplus-vt-cfg-url")||e.getMetaInfo("aplus-vt-cfg-url");this.getWebVtData(t,"",!0,!0)},init:function(){var e=this,t=Z.SUBSCRIBE;ye.pushIntoGoldlogQueue(t,[$i,function(t){t.enable||(e.pageConfig=t.pageConfig);ye.pushIntoGoldlogQueue(Qi,["WebVtConfigFormat",{pageConfig:t.pageConfig}]);!t.enable&&e.setConfigIntoLs(e.pageConfig)}]);e.syncWebVtData()},run:function(){this.init();return this}})),es=function(){return a(function e(n){t(this,e);this.options=n;this.vtInited=0},[{key:"isVTTraced",value:function(){var e=L(x());return e&&e.getMetaInfo?e.getMetaInfo(ae.APLUS_VT_CONFIG_URL):mt.getMetaCnt(ae.APLUS_VT_CONFIG_URL)}},{key:"getPageConfig",value:function(e,t){if(e&&e.pages)for(var n=0;n<e.pages.length;n++){var a=e.pages[n]||{};a.template&&(e.template=a.template);if(!a.spmA&&!a.spmB){a.spmA=t.spmA;a.spmB=t.spmB;e.pages[n]=a}}return e}},{key:"run",value:function(){var e=L(x());if(this.isVTTraced()){Zi.create().run();var t=this;ye.pushIntoGoldlogQueue(Z.SUBSCRIBE,["WebVtConfigFormat",function(n){e._aplus_vt_cfg=n.pageConfig;var a=t.getPageConfig(e._aplus_vt_cfg,n.originSpm);if(a&&a.enabled){e._aplus_vt_cfg=a;var o=new Wi;if(0===t.vtInited){o.initWebVT(a,function(){t.vtInited=2});t.vtInited=1}else 2===t.vtInited&&o.updatePageConfig(e._aplus_vt_cfg)}}])}Ni()}}])}(),ts=bt(Object.freeze({__proto__:null,default:es}));function ns(e){var t=e;if("object"!==l(t))return null;if("string"!=typeof t.tagName)return null;var n=t.tagName.toLowerCase();if("body"===n.toLowerCase()||"html"===n.toLowerCase())return null;if(!t||!t.parentNode||!t.parentNode.children)return null;var a=t.parentNode,o=function(){var e=[],t=L(x()).getMetaInfo(ae.APLUS_AUTOTRACK_CONFIG);t&&t.collect_tags&&m.isObject(t.collect_tags)&&m.eachMap(t.collect_tags,function(t,n){n&&e.push(t)});return e}(),r=L(x()).getMetaInfo(ae.APLUS_AUTOTRACK_CONFIG_REMOTE)||[];if(pt.hasAttribute(e,"aplus-autotrack-off"))return null;if(!(r.length>0&&d.indexOf(r,n)>-1)){if("a"===n||"button"===n||"input"===n||"textarea"===n)return t;if("button"===a.tagName.toLowerCase()||"a"===a.tagName.toLowerCase())return a;if(d.indexOf(o,n)>-1)return t;var i=pt.getPrev(a);return"area"===n&&"map"===a.tagName.toLowerCase()&&i.tagName&&"img"===i.tagName.toLowerCase()?i:null}}function as(e){var t=function(e){var t={is_auto:1,auto_element:1};try{if(e&&e.hasAttributes)for(var n=e.attributes,a=0;a<n.length;a++){var o=n[a].name||"",r=n[a].value;o&&o.indexOf("data-")>-1&&(t[o.toLowerCase().replace(/^data-/,"")]=encodeURIComponent(r))}}catch(e){C().w(e&&e.message)}return t}(e);e&&(t=m.assign(t,{ap:{element_type:e.tagName.toLowerCase(),element_name:e.getAttribute&&e.getAttribute("name")||"",element_id:e.getAttribute&&e.getAttribute("id")||"",element_class_name:"string"==typeof e.className?e.className:"",element_content:pt.getElementContent(e,e.tagName)||"",element_selector:pt.getDomSelector(e)||"",element_path:pt.getElementPath(e)}}));return t}function os(){function e(e){if(!e)return!1;var t=ns(e.target);t&&function(e){var t=L(D()),n=null;if(e["clk-logkey"]){n=e["clk-logkey"];delete e["clk-logkey"]}var a=n||wt.hash(wt.getAppKey())+wt.hash(e.ap.element_selector,wt.getAppKey());t.push({action:"".concat(x(),".record"),arguments:[a,Z.CLK,e||{}]})}(as(t))}gt.addHandler(document,gt.clickEvent(),e);document.addEventListener("unload",function(){gt.removeHandler(document,gt.clickEvent(),e)},!1)}var rs=function(){return a(function e(n){t(this,e);this.options=n},[{key:"run",value:function(){!function(){var e=L(x());if(!e._autotracked_enable){os();e._autotracked_enable=!0}}()}}])}(),is=bt(Object.freeze({__proto__:null,default:rs})),ss=window,cs=document;function us(){if(!(ss._ap_xwj_heat&&6<=ss._ap_xwj_heat.version)){var e;e="BackCompat"===cs.compatMode?cs.body:cs.documentElement;var t,n,a=ss.performance||ss.mozPerformance||ss.msPerformance||ss.webkitPerformance||{_na:1},o=location,r=location.href,i=o.hostname,s=ss.navigator,c=s.appVersion,u=s?s.userAgent:"",l=N("ahot-aplus"),f=function(){var e=L(x());return N("aplus-heatmap-enabled")||e.getMetaInfo("aplus-heatmap-enabled")}(),p=function(){var e=L(x()),t=N("aplus-rate-ahot")||e.getMetaInfo("aplus-rate-ahot");return parseFloat(t||"")}(),d=N("microscope-data"),h=k(cs.getElementById("beacon-aplus"),"exparams"),_={layout:0,shouldBindMonitor:!1},m={RESOURCE_TIMING:isNaN(p)?1:p},v=function(e,t){return e.indexOf(t)>-1},y=ss.addEventListener?function(e){ss.addEventListener("load",e,!1)}:function(){},b=ss.attachEvent?function(e){ss.attachEvent("onload",e)}:y,A=function(e){var t=0;return parseFloat(e.replace(/\./g,function(){return 0===t++?".":""}))},S=function(e,t){var n,a;t[n="trident"]=.1;(a=e.match(/Trident\/([\d.]*)/))&&a[1]&&(t[n]=A(a[1]));t.core=n},E=function(e){var t,n;return(t=e.match(/MSIE ([^;]*)|Trident.*; rv(?:\s|:)?([0-9.]+)/))&&(n=t[1]||t[2])?A(n):0},w=function(e){return e||"other"},T=o.protocol,P=(new Date).getTime(),O=0,I=function(e){this.config=e};I.prototype={startup:function(){var e=this;"complete"===document.readyState?_.shouldBindMonitor&&e.bindMonitor():b(function(){_.shouldBindMonitor&&e.bindMonitor()})},collectPerformanceTiming:function(){var e=a.timing,t={};if(!e)return t;var n,o,r,i,s,c={navigationStart:"ns",unloadEventStart:"ues",unloadEventEnd:"uee",redirectStart:"rds",redirectEnd:"rde",fetchStart:"fs",domainLookupStart:"dls",domainLookupEnd:"dle",connectStart:"cs",connectEnd:"ce",secureConnectionStart:"scs",requestStart:"rqs",responseStart:"rps",responseEnd:"rpe",domLoading:"dl",domInteractive:"di",domContentLoadedEventStart:"dcles",domContentLoadedEventEnd:"dclee",domComplete:"dc",loadEventStart:"les",loadEventEnd:"lee"},u=e.navigationStart;for(n in e){o=e[n];(r=c[n])&&(0===o||void 0===o?t[r]="na":"number"==typeof o&&(t[r]=o-u))}"number"==typeof e.msFirstPaint?i=e.msFirstPaint:ss.chrome&&ss.chrome.loadTimes(s=ss.chrome.loadTimes().firstPaintTime)&&(i=Math.ceil(1e3*s));"number"==typeof i?i-=u:i="na";t.fp=i;return t},collectResourceTiming:function(){if(!("performance"in ss&&"getEntriesByType"in a&&a.getEntriesByType("resource")instanceof Array))return[];var e=[],t=a.getEntriesByType("resource"),n=function(e){return void 0===e||0===e?0:Math.floor(e)};for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var r=t[o];r.initiatorType&&e.push({rs:n(r.redirectStart),re:n(r.redirectEnd),fs:n(r.fetchStart),st:n(r.startTime),dls:n(r.domainLookupStart),dle:n(r.domainLookupEnd),cs:n(r.connectStart),ce:n(r.connectEnd),scs:n(r.secureConnectionStart),resqs:n(r.requestStart),resps:n(r.responseStart),respe:n(r.responseEnd),restype:r.initiatorType,n:r.name})}return e},sendPV:function(){var e=this;if(!this.initialized){var t,n,a,o,r,i,s,l,f,p,d,g,_;try{t=function(e){var t,n,a,o,r,i,s,u,l,f,p="",d="",g=[6,9],h="{{version}}",_="\x3c!--[if IE ".concat(h,"]><s></s><![endif]--\x3e"),m=cs&&cs.createElement("div"),v=[],y={webkit:void 0,trident:void 0,gecko:void 0,presto:void 0,chrome:void 0,safari:void 0,firefox:void 0,ie:void 0,ieMode:void 0,opera:void 0,mobile:void 0,core:void 0,shell:void 0,phantomjs:void 0,os:void 0,ipad:void 0,iphone:void 0,ipod:void 0,ios:void 0,android:void 0,nodejs:void 0,extraName:void 0,extraVersion:void 0};if(m&&m.getElementsByTagName){m.innerHTML=_.replace(h,"");v=m.getElementsByTagName("s")}if(v.length>0){S(e,y);for(o=g[0],r=g[1];o<=r;o++){m.innerHTML=_.replace(h,o);if(v.length>0){y[d="ie"]=o;break}}a=E(e);!y.ie&&a&&(y[d="ie"]=a)}else if((n=e.match(/AppleWebKit\/([\d.]*)/))&&n[1]){y[p="webkit"]=A(n[1]);(n=e.match(/OPR\/(\d+\.\d+)/))&&n[1]?y[d="opera"]=A(n[1]):(n=e.match(/Chrome\/([\d.]*)/))&&n[1]?y[d="chrome"]=A(n[1]):(n=e.match(/\/([\d.]*) Safari/))&&n[1]&&(y[d="safari"]=A(n[1]));if(/ Mobile\//.test(e)&&e.match(/iPad|iPod|iPhone/)){y.mobile="apple";(n=e.match(/OS ([^\s]*)/))&&n[1]&&(y.ios=A(n[1].replace("_",".")));t="ios";(n=e.match(/iPad|iPod|iPhone/))&&n[0]&&(y[n[0].toLowerCase()]=y.ios)}else if(/ Android/i.test(e)){if(/Mobile/.test(e)){t="android";y.mobile=t}(n=e.match(/Android ([^\s]*);/))&&n[1]&&(y.android=A(n[1]))}else(n=e.match(/NokiaN[^/]*|Android \d\.\d|webOS\/\d\.\d/))&&(y.mobile=n[0].toLowerCase());(n=e.match(/PhantomJS\/([^\s]*)/))&&n[1]&&(y.phantomjs=A(n[1]))}else if((n=e.match(/Presto\/([\d.]*)/))&&n[1]){y[p="presto"]=A(n[1]);if((n=e.match(/Opera\/([\d.]*)/))&&n[1]){y[d="opera"]=A(n[1]);(n=e.match(/Opera\/.* Version\/([\d.]*)/))&&n[1]&&(y[d]=A(n[1]));(n=e.match(/Opera Mini[^;]*/))&&n?y.mobile=n[0].toLowerCase():(n=e.match(/Opera Mobi[^;]*/))&&n&&(y.mobile=n[0])}}else if(a=E(e)){y[d="ie"]=a;S(e,y)}else if(n=e.match(/Gecko/)){y[p="gecko"]=.1;if((n=e.match(/rv:([\d.]*)/))&&n[1]){y[p]=A(n[1]);/Mobile|Tablet/.test(e)&&(y.mobile="firefox")}(n=e.match(/Firefox\/([\d.]*)/))&&n[1]&&(y[d="firefox"]=A(n[1]))}t||(t=function(){for(var t=[["Windows NT 5.1","winXP"],["Windows NT 6.1","win7"],["Windows NT 6.0","winVista"],["Windows NT 6.2","win8"],["iPad","ios"],["iPhone;","ios"],["iPod","ios"],["Macintosh","mac"],["Android","android"],["Ubuntu","ubuntu"],["Linux","linux"],["Windows NT 5.2","win2003"],["Windows NT 5.0","win2000"],["Windows 10(WOW64)","win10"],["Windows","winOther"],["rhino","rhino"]],n=0,a=t.length;n<a;++n)if(-1!==e.indexOf(t[n][0]))return t[n][1];return"other"}());if(!function(e,t,n,a){var o,r=ss.navigator.mimeTypes;try{for(o in r)if(Object.prototype.hasOwnProperty.call(r,o)&&r[o][e]===t){if(void 0!==n&&a.test(r[o][n]))return!0;if(void 0===n)return!0}return!1}catch(e){return!1}}("type","application/vnd.chromium.remoting-viewer")){l="scoped"in cs.createElement("style");f="v8Locale"in ss;try{u=ss.external||void 0}catch(e){}if(n=e.match(/360SE/))i="360";else if((n=e.match(/SE\s([\d.]*)/))||u&&"SEVersion"in u){i="sougou";s=A(n[1])||.1}else if((n=e.match(/Maxthon(?:\/)+([\d.]*)/))&&u){i="maxthon";try{s=A(u.max_version||n[1])}catch(e){s=.1}}else l&&f?i="360se":l||f||!/Gecko\)\s+Chrome/.test(c)||y.opera||y.trident||(i="360ee")}if(n=e.match(/TencentTraveler\s([\d.]*)|QQBrowser\/([\d.]*)/)){i="tt";s=A(n[2])||.1}else if((n=e.match(/LBBROWSER/))||u&&"LiebaoGetVersion"in u)i="liebao";else if(n=e.match(/TheWorld/)){i="theworld";s=3}else if(n=e.match(/TaoBrowser\/([\d.]*)/)){i="taobao";s=A(n[1])||.1}y.os=t;y.core=y.core||p;y.shell=d;y.ieMode=y.ie&&cs.documentMode||y.ie;y.extraName=i;y.extraVersion=s;y.resolution="".concat(ss.screen.width,"x").concat(ss.screen.height);return y}(u);n=t.os;a=t.shell;o=t.core;r=t.resolution;i=t.extraName;s=t.extraVersion;l=n?n+(t[n]?t[n]:""):"";f=a?a+parseInt(t[a],10):"";p=o;d=r;g=i?i+(s?parseInt(s,10):""):""}catch(e){}var m={p:1,o:w(l),b:w(f),w:w(p),s:d,mx:g};"https:"===T&&(m.isps=1);(_=function(){for(var e=h.split("&"),t={},n=0;n<e.length;n++){var a=e[n].split("=");t[a[0]]=a[1]}return t}().trid)&&(m.trid=_);setTimeout(function(){var t,n,a=e.collectPerformanceTiming();for(t in a)if(Object.prototype.hasOwnProperty.call(a,t)){n=a[t];m[t]||(m[t]=n)}e.initialized=!0;e.sendData(m,!0)},0)}},bindMonitor:function(){var e=this,t=!!cs.attachEvent;cs[t?"attachEvent":"addEventListener"]("".concat(t?"on":"","mousedown"),function(t){var n=(t=t||ss.event).target||t.srcElement;n&&e.mousedown(n,t)},!1)},mousedown:function(t,n){var a,o=t.tagName,r={type:1};if(!o||"HTML"!==o){if("A"===o||"AREA"===o){a=t.getAttribute("href",2)||"";r.href=a}var i=function(t,n,a){var o,r=Math.max(e.scrollWidth,e.clientWidth),i=e.scrollTop,s=e.scrollLeft,c=n.pageX,u=n.pageY;if(!(o=c,"number"==typeof o)){c=n.clientX+s;u=n.clientY+i}var l,f,p=-1;if(t&&t.getBoundingClientRect){p=(f=t.getBoundingClientRect()).left+s;l=f.top+i}if(0===a||"0"===a){var d=r>>1;c-=d;p-=d}else if(2===a){c-=r;p-=r}return{x:c,y:u,ex:p,ey:l,sw:r}}(t,n,this.config.layout);r.xpath=function(e){var t,n,a,o,r,i,s=cs.getElementsByTagName("*");for(t=[];e&&1===e.nodeType;e=e.parentNode)if(e.id){i=e.id;o=0;for(n=0;n<s.length;n++)if((r=s[n]).id&&r.id===i){o++;break}e.tagName.toLowerCase&&t.unshift("".concat(e.tagName.toLowerCase(),"[@id='").concat(i,"']"));if(1===o){t.unshift("/");return t.join("/")}}else{for(n=1,a=e.previousSibling;a;a=a.previousSibling)a.tagName===e.tagName&&n++;e.tagName.toLowerCase&&t.unshift("".concat(e.tagName.toLowerCase(),"[").concat(n,"]"))}return t.length?"/".concat(t.join("/")):null}(t);r.x=i.x;r.y=i.y;r.ex=i.ex;r.ey=i.ey;r.sw=i.sw;r.ew=t.offsetWidth;r.eh=t.offsetHeight;r.t=(new Date).getTime()-P;r.n=++O;l&&d&&(r.so=encodeURIComponent(d));this.sendData(r)}},sendData:function(e,t){var n=Math.ceil(1e3*Math.random()),a=L(D());t?a.push({action:"".concat(x(),".sendPV"),arguments:[{is_auto:!0},e]}):n<1e3*m.RESOURCE_TIMING&&f&&a.push({action:"".concat(x(),".record"),arguments:["$$_hotpoint",Z.CLK,g({is_auto:1},e),ie.POST]})}};(function(){if(l)return!0;var e,t=["item.taobao.com","detail.tmall.com","s.taobao.com"],n=t.length;for(e=0;e<n;e++)if(v(i,t[e]))return!1;return!v(r,"/go/act/")&&!v(h,"atp_isdpp")})()&&(_.shouldBindMonitor=!0);var C=a.setResourceTimingBufferSize||a.webkitSetResourceTimingBufferSize;C&&C.call(a,200);ss._ap_xwj_heat={version:6};new I(_).startup()}function k(e,t){return e&&e.getAttribute&&e.getAttribute(t)||""}function N(e){var a,o,r,i=function(){t=t||cs.getElementsByTagName("head")[0];return n||(t?n=t.getElementsByTagName("meta"):[])}(),s=i.length;for(a=0;a<s;a++)if(k(o=i[a],"name")===e){r=k(o,"content");break}return r}}var ls,fs,ps=function(){return a(function e(n){t(this,e);this.options=n},[{key:"run",value:function(){var e=L(x());if(e._aplus_plugin_xwj);else{e._aplus_plugin_xwj={status:"init"};!function(){try{us()}catch(e){L(D()).push({action:"".concat(x(),"._aplus_cplugin_m.do_tracker_jserror"),arguments:[{message:"headmapall",error:encodeURIComponent(e.stack),filename:"aplus_xwj_plugin"}]})}}()}}}])}(),ds=bt(Object.freeze({__proto__:null,default:ps})),gs=function(){return a(function e(n){t(this,e);this.options=n},[{key:"run",value:function(){gt.on(window,"unload",function(){try{L(D()).push({action:"".concat(x(),".record"),arguments:[ae.PAGE_LEAVE,"OTHER",{}]});"hidden"===document.visibilityState&&window.sessionStorage.removeItem(ae.START_ID)}catch(e){C().w("send browser close evnet failed")}})}}])}(),hs=bt(Object.freeze({__proto__:null,default:gs})),_s="hidden",ms="visible",vs="scroll",ys="visibilitychange",bs="blur",As="unload",Ss=function(){return a(function e(n){t(this,e);this.options=n;this.scrollStartTs=Date.now();this.lastTabVisibleState=ms},[{key:"triggerStayEvent",value:function(e){var t=e.triggerTiming,n=L(x()),a=Date.now(),o=a-this.scrollStartTs;n.record(ae.PAGE_STAY,"OTHER",{duration:o,triggerTiming:t});this.scrollStartTs=a}},{key:"handleScroll",value:function(){var e=this;Date.now()-this.scrollStartTs>=ae.PAGE_SCROLL_DURATION&&window.requestAnimationFrame(function(){e.triggerStayEvent({triggerTiming:vs})})}},{key:"handleTabBlur",value:function(){this.triggerStayEvent({triggerTiming:bs})}},{key:"handleTabVisibilityChange",value:function(){this.lastTabVisibleState===ms&&document.visibilityState===_s&&this.handleTabBlur();this.lastTabVisibleState=document.visibilityState}},{key:"addEventListeners",value:function(){gt.on(window,vs,this.handleScroll.bind(this));_s in document?gt.on(document,ys,this.handleTabVisibilityChange.bind(this)):gt.on(window,bs,this.handleTabBlur.bind(this))}},{key:"removeEventListeners",value:function(){gt.un(window,vs,this.handleScroll.bind(this));_s in document?gt.un(document,ys,this.handleTabVisibilityChange.bind(this)):gt.un(window,bs,this.handleTabBlur.bind(this))}},{key:"run",value:function(){var e=this,t=L(D()),n=L(x());t.push({action:Z.SUBSCRIBE,arguments:[Z.SDK_READY,function(t){if("complete"===t&&n&&n.getMetaInfo&&n.getMetaInfo(ae.APLUS_PAGEVIEW_DURATION_CAN_TRACK)){e.addEventListeners();gt.on(window,As,function(){e.triggerStayEvent({triggerTiming:As});e.removeEventListeners()})}}]})}}])}(),Es=bt(Object.freeze({__proto__:null,default:Ss})),ws={apiName:"aplus",queueName:"aplus_queue",metaInfo:{sdk_version:At,sdkId:"qt_web_".concat(At),"aplus-cpvdata":{},"aplus-exdata":{},"aplus-globaldata":{},"aplus-mmstat-timeout":"10000","aplus-disable-autoevent":!1,"aplus-exposure-event-can-repeat":!0,"aplus-globalproperty-sync-enable":!0},globalConfig:{ETAG_STORAGE_KEY:"__ETAG__CNA__ID__",script_name:"qt_web.js",lver:At},plugins:[{name:"aplus_session_manager",path:Dt},{name:"aplus_track_debug",path:Ut},{name:"aplus_body_ready",path:Bt},{name:"aplus_client",path:Ft},{name:"aplus_meta_inject",path:Jt},{name:"aplus_ac",path:$n},{name:"aplus_ae",path:Fa},{name:"aplus_web_http_um",path:Ao},{name:"pubsub",path:Oo},{name:"aplus_log_inject",path:Co,deps:["aplus_meta_inject"],config:{plugins:{pv:[{name:"remote_config",path:Zo},{name:"when_to_sendpv",path:tr,config:{aplusWaiting:""}},{name:"where_to_send",path:ar},{name:"what_to_send",path:sr,config:{pvdataToUt:{}}},{name:"what_to_sendpv_userdata",path:ur,deps:["what_to_send"]},{name:"what_to_sendpv_userdata_web",path:ur,deps:["what_to_send","what_to_sendpv_userdata"]},{name:"what_to_sendpv_um2native",path:fr,deps:["what_to_send"]},{name:"can_to_sendpv",path:yr,config:{flag:"NO"}},{name:"after_pv",path:Ar}],hjlj:[{name:"remote_config",path:Zo},{name:"where_to_send",path:ar,deps:[]},{name:"what_to_send",path:sr,deps:[]},{name:"what_to_hjlj_userdata",path:Er,deps:["what_to_send"]},{name:"what_to_hjlj_um2native",path:Tr,deps:["what_to_send"]}]}}},{name:"aplus_spm_inject",path:Rr},{name:"aplus_api",path:Zr},{name:"aplus_fingerpint",path:ui},{name:"meta_queue",path:Ai},{name:"aplusUmBridge",path:Ei},{name:"sdk_queue",path:Pi},{name:"hot_loader",path:Ii,config:{urlRules:[{rule:"aplus_webvt_messager",cdnPath:"https://o.alicdn.com/QTSDK/quicktracking-sdk/qt_webvt_messager.umd.js"}]}},{name:"aplus_apv",path:ts,deps:["aplus_log_inject","aplus_api"]},{name:"aplus_autotrack",path:is},{name:"aplus_heatmap",path:ds,deps:["aplus_log_inject","aplus_api"]},{name:"aplus_pageleave",path:hs,deps:["aplus_log_inject","aplus_api"]},{name:"qt_page_stay",path:Es,deps:["aplus_log_inject","aplus_api"]}]};ls="QuickTracking SDK INIT SUCCESS!",yt(fs||ws,function(){C().v(ls||"QT SDK INIT SUCCESS!")})},"function"==typeof define&&define.amd?define(e):e();var e;
